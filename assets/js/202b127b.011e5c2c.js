"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[1264],{8400:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var t=r(85893),o=r(11151),s=r(74866),a=r(85162);const l={title:"Build with Docker Dev Image"},i=void 0,c={id:"deployment/build-based-on-docker",title:"Build with Docker Dev Image",description:"This guide provides instructions for building Apache Cloudberry using a Docker-based development environment. This method is particularly useful for ensuring a consistent build environment across different systems and for saving setup time.",source:"@site/docs/deployment/build-based-on-docker.md",sourceDirName:"deployment",slug:"/deployment/build-based-on-docker",permalink:"/docs/next/deployment/build-based-on-docker",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/docs/deployment/build-based-on-docker.md",tags:[],version:"current",lastUpdatedBy:"TomShawn",lastUpdatedAt:1761905913,formattedLastUpdatedAt:"Oct 31, 2025",frontMatter:{title:"Build with Docker Dev Image"},sidebar:"docsbars",previous:{title:"Comparison with Greenplum Features",permalink:"/docs/next/cbdb-vs-gp-features"},next:{title:"Build Apache Cloudberry from Source: Complete Guide",permalink:"/docs/next/deployment/"}},u={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Run the Docker Dev Image",id:"run-the-docker-dev-image",level:2},{value:"What&#39;s next?",id:"whats-next",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This guide provides instructions for building Apache Cloudberry using a Docker-based development environment. This method is particularly useful for ensuring a consistent build environment across different systems and for saving setup time."}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Docker: Ensure you have Docker installed on your system. You can download and install Docker from the official website: ",(0,t.jsx)(n.a,{href:"https://www.docker.com/get-started",children:"Docker"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Harddisk space: Ensure you have at least 10 GB of free disk space available for the Docker image and build artifacts."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"run-the-docker-dev-image",children:"Run the Docker Dev Image"}),"\n",(0,t.jsx)(n.p,{children:"Run the following command to start a Docker container with the Apache Cloudberry development image:"}),"\n",(0,t.jsxs)(s.Z,{children:[(0,t.jsx)(a.Z,{value:"rocky-linux-8",label:"Rocky Linux 8",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --name cbdb-dev -it --rm -h cdw --shm-size=2gb apache/incubator-cloudberry:cbdb-build-rocky8-latest\n"})})}),(0,t.jsx)(a.Z,{value:"rocky-linux-9",label:"Rocky Linux 9",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --name cbdb-dev -it --rm -h cdw --shm-size=2gb apache/incubator-cloudberry:cbdb-build-rocky9-latest\n"})})}),(0,t.jsx)(a.Z,{value:"ubuntu-22",label:"Ubuntu 22.04",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --name cbdb-dev -it --rm -h cdw --shm-size=2gb apache/incubator-cloudberry:cbdb-build-ubuntu22.04-latest\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:"Explaination:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--name=cbdb-dev"})," will set the name of the container to ",(0,t.jsx)(n.code,{children:"cbdb-dev"}),". You can change it to any name you prefer."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-it"})," will run the container in interactive mode, allowing you to execute commands inside it."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--rm"})," will remove the container after you exit it. If you want to keep the container for further use, you can remove this option."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-h cdw"})," will set the hostname of the container to ",(0,t.jsx)(n.code,{children:"cdw"})," (Coordinator Data Warehouse)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--shm-size=2gb"})," is used to set the container's shared memory for test suites run successfully. Test failures can occur when the Cloudberry cluster lacks sufficient shared memory resources, then you may need to increase the container's shared memory using this option."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This development environment has done the following things for you:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Created a user named ",(0,t.jsx)(n.code,{children:"gpadmin"})," with the necessary permissions."]}),"\n",(0,t.jsx)(n.li,{children:"Set up the environment variables and paths."}),"\n",(0,t.jsx)(n.li,{children:"Configured the specific system resource limits."}),"\n",(0,t.jsx)(n.li,{children:"Installed the necessary dependencies."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Then you will be inside the Docker container with the Apache Cloudberry development environment ready to use. Before you go on, you need to make sure you have login the docker container as the ",(0,t.jsx)(n.code,{children:"gpadmin"})," user like this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"======================================================================\n\n                          ++++++++++       ++++++\n                        ++++++++++++++   +++++++\n                       ++++        +++++ ++++\n                      ++++          +++++++++\n                   =+====         =============+\n                 ========       =====+      =====\n                ====  ====     ====           ====\n               ====    ===     ===             ====\n               ====            === ===         ====\n               ====            ===  ==--       ===\n                =====          ===== --       ====\n                 =====================     ======\n                   ============================\n                                     =-----=\n     ____  _                    _  _\n    / ___|| |  ___   _   _   __| || |__    ___  _ __  _ __  _   _\n   | |    | | / _ \\ | | | | / _` || '_ \\  / _ \\| '__|| '__|| | | |\n   | |___ | || (_) || |_| || (_| || |_) ||  __/| |   | |   | |_| |\n    \\____||_| \\____  \\__,_| \\__,_||_.__/  \\___||_|   |_|    \\__, |\n                                                            |___/\n----------------------------------------------------------------------\n\nWelcome to the Apache Cloudberry Build Environment!\n\nContainer OS ........ : Rocky Linux 9.5 (Blue Onyx)\nUser ................ : gpadmin\nContainer hostname .. : cdw\nIP Address .......... : 170.17.0.1\nCPU Info ............ : Intel(R) Xeon(R) Gold 6151 CPU @ 3.00GHz\nCPU(s) .............. : 8\nMemory .............. : 15Gi total\n======================================================================\n\n[gpadmin@cdw ~]$\n"})}),"\n",(0,t.jsx)(n.h2,{id:"whats-next",children:"What's next?"}),"\n",(0,t.jsx)(n.p,{children:"You can now proceed with the following steps to build and install Apache Cloudberry:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/next/deployment/download-source-code",children:"Download the source code"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/next/deployment/configure",children:"Configure Apache Cloudberry Build"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/next/deployment/build-and-install",children:"Build and Install Apache Cloudberry and contrib extensions"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/next/deployment/set-demo-cluster",children:"Set up a Cloudberry Demo Cluster"})," (start with the step ",(0,t.jsx)(n.code,{children:"Set up Cloudberry environment variables"}),")"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/next/deployment/post-installation",children:"Post installation"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Or just running the following command more quickly:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"## Download the source code\ngit clone --recurse-submodules --branch main --single-branch --depth=1 https://github.com/apache/cloudberry.git\n\n## Change directory\ncd /home/gpadmin/cloudberry\n\n## Set up the SRC_DIR environment variable and create a directory for build logs\nexport SRC_DIR=/home/gpadmin/cloudberry\nmkdir -p ${SRC_DIR}/build-logs\n\n## Configure, build, and install Cloudberry\n./devops/build/automation/cloudberry/scripts/configure-cloudberry.sh\n./devops/build/automation/cloudberry/scripts/build-cloudberry.sh\n\n## Set up a Cloudberry Demo Cluster\n./devops/build/automation/cloudberry/scripts/create-cloudberry-demo-cluster.sh\n\n## Start a Cloudberry Demo Cluster\nsource /usr/local/cloudberry-db/cloudberry-env.sh\nsource /home/gpadmin/cloudberry/gpAux/gpdemo/gpdemo-env.sh\npsql -p 7000 postgres\n"})})]})}function m(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},85162:(e,n,r)=>{r.d(n,{Z:()=>a});r(67294);var t=r(90512);const o={tabItem:"tabItem_Ymn6"};var s=r(85893);function a(e){let{children:n,hidden:r,className:a}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.Z)(o.tabItem,a),hidden:r,children:n})}},74866:(e,n,r)=>{r.d(n,{Z:()=>j});var t=r(67294),o=r(90512),s=r(12466),a=r(16550),l=r(20469),i=r(91980),c=r(67392),u=r(50012);function d(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:r,attributes:t,default:o}}=e;return{value:n,label:r,attributes:t,default:o}}))}(r);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function m(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function b(e){let{queryString:n=!1,groupId:r}=e;const o=(0,a.k6)(),s=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,i._X)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(o.location.search);n.set(s,e),o.replace({...o.location,search:n.toString()})}),[s,o])]}function p(e){const{defaultValue:n,queryString:r=!1,groupId:o}=e,s=h(e),[a,i]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=r.find((e=>e.default))??r[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[c,d]=b({queryString:r,groupId:o}),[p,f]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[o,s]=(0,u.Nk)(r);return[o,(0,t.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:o}),y=(()=>{const e=c??p;return m({value:e,tabValues:s})?e:null})();(0,l.Z)((()=>{y&&i(y)}),[y]);return{selectedValue:a,selectValue:(0,t.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),f(e)}),[d,f,s]),tabValues:s}}var f=r(72389);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=r(85893);function v(e){let{className:n,block:r,selectedValue:t,selectValue:a,tabValues:l}=e;const i=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.o5)(),u=e=>{const n=e.currentTarget,r=i.indexOf(n),o=l[r].value;o!==t&&(c(n),a(o))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const r=i.indexOf(e.currentTarget)+1;n=i[r]??i[0];break}case"ArrowLeft":{const r=i.indexOf(e.currentTarget)-1;n=i[r]??i[i.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":r},n),children:l.map((e=>{let{value:n,label:r,attributes:s}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>i.push(e),onKeyDown:d,onClick:u,...s,className:(0,o.Z)("tabs__item",y.tabItem,s?.className,{"tabs__item--active":t===n}),children:r??n},n)}))})}function g(e){let{lazy:n,children:r,selectedValue:o}=e;const s=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===o));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==o})))})}function _(e){const n=p(e);return(0,x.jsxs)("div",{className:(0,o.Z)("tabs-container",y.tabList),children:[(0,x.jsx)(v,{...e,...n}),(0,x.jsx)(g,{...e,...n})]})}function j(e){const n=(0,f.Z)();return(0,x.jsx)(_,{...e,children:d(e.children)},String(n))}},11151:(e,n,r)=>{r.d(n,{Z:()=>l,a:()=>a});var t=r(67294);const o={},s=t.createContext(o);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);