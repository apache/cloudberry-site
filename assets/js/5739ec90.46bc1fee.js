"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[74464],{77655:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>a});var d=t(85893),n=t(11151);const r={title:"pg_shdepend"},o="pg_shdepend",c={id:"sys-catalogs/sys-tables/pg-shdepend",title:"pg_shdepend",description:"The pgshdepend system catalog table records the dependency relationships between database objects and shared objects, such as roles. This information allows Apache Cloudberry to ensure that those objects are unreferenced before attempting to delete them. See also pgdepend, which performs a similar function for dependencies involving objects within a single database. Unlike most system catalogs, pgshdepend is shared across all databases of Cloudberry system: there is only one copy of pgshdepend per system, not one per database.",source:"@site/versioned_docs/version-2.x/sys-catalogs/sys-tables/pg-shdepend.md",sourceDirName:"sys-catalogs/sys-tables",slug:"/sys-catalogs/sys-tables/pg-shdepend",permalink:"/docs/sys-catalogs/sys-tables/pg-shdepend",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/versioned_docs/version-2.x/sys-catalogs/sys-tables/pg-shdepend.md",tags:[],version:"2.x",lastUpdatedBy:"Dianjin Wang",lastUpdatedAt:1751854107,formattedLastUpdatedAt:"Jul 7, 2025",frontMatter:{title:"pg_shdepend"},sidebar:"docsbars",previous:{title:"pg_sequence",permalink:"/docs/sys-catalogs/sys-tables/pg-sequence"},next:{title:"pg_shdescription",permalink:"/docs/sys-catalogs/sys-tables/pg-shdescription"}},i={},a=[];function l(e){const s={a:"a",code:"code",h1:"h1",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.h1,{id:"pg_shdepend",children:"pg_shdepend"}),"\n",(0,d.jsxs)(s.p,{children:["The ",(0,d.jsx)(s.code,{children:"pg_shdepend"})," system catalog table records the dependency relationships between database objects and shared objects, such as roles. This information allows Apache Cloudberry to ensure that those objects are unreferenced before attempting to delete them. See also ",(0,d.jsx)(s.a,{href:"/docs/sys-catalogs/sys-tables/pg-depend",children:"pg_depend"}),", which performs a similar function for dependencies involving objects within a single database. Unlike most system catalogs, ",(0,d.jsx)(s.code,{children:"pg_shdepend"})," is shared across all databases of Cloudberry system: there is only one copy of ",(0,d.jsx)(s.code,{children:"pg_shdepend"})," per system, not one per database."]}),"\n",(0,d.jsxs)(s.p,{children:["In all cases, a ",(0,d.jsx)(s.code,{children:"pg_shdepend"})," entry indicates that the referenced object may not be dropped without also dropping the dependent object. However, there are several subflavors identified by ",(0,d.jsx)(s.code,{children:"deptype"}),":"]}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"SHARED_DEPENDENCY_OWNER (o)"})," \u2014 The referenced object (which must be a role) is the owner of the dependent object."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"SHARED_DEPENDENCY_ACL (a)"})," \u2014 The referenced object (which must be a role) is mentioned in the ACL (access control list) of the dependent object."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"SHARED_DEPENDENCY_PIN (p)"})," \u2014 There is no dependent object; this type of entry is a signal that the system itself depends on the referenced object, and so that object must never be deleted. Entries of this type are created only by system initialization. The columns for the dependent object contain zeroes."]}),"\n"]}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:"column"}),(0,d.jsx)(s.th,{children:"type"}),(0,d.jsx)(s.th,{children:"references"}),(0,d.jsx)(s.th,{children:"description"})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"dbid"})}),(0,d.jsx)(s.td,{children:"oid"}),(0,d.jsx)(s.td,{children:"pg_database.oid"}),(0,d.jsx)(s.td,{children:"The OID of the database the dependent object is in, or zero for a shared object."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"classid"})}),(0,d.jsx)(s.td,{children:"oid"}),(0,d.jsx)(s.td,{children:"pg_class.oid"}),(0,d.jsx)(s.td,{children:"The OID of the system catalog the dependent object is in."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"objid"})}),(0,d.jsx)(s.td,{children:"oid"}),(0,d.jsx)(s.td,{children:"any OID column"}),(0,d.jsx)(s.td,{children:"The OID of the specific dependent object."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"objsubid"})}),(0,d.jsx)(s.td,{children:"integer"}),(0,d.jsx)(s.td,{children:"\xa0"}),(0,d.jsx)(s.td,{children:"For a table column, this is the column number. For all other object types, this column is zero."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"refclassid"})}),(0,d.jsx)(s.td,{children:"oid"}),(0,d.jsx)(s.td,{children:"pg_class.oid"}),(0,d.jsx)(s.td,{children:"The OID of the system catalog the referenced object is in (must be a shared catalog)."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"refobjid"})}),(0,d.jsx)(s.td,{children:"oid"}),(0,d.jsx)(s.td,{children:"any OID column"}),(0,d.jsx)(s.td,{children:"The OID of the specific referenced object."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"deptype"})}),(0,d.jsx)(s.td,{children:"char"}),(0,d.jsx)(s.td,{children:"\xa0"}),(0,d.jsx)(s.td,{children:"A code defining the specific semantics of this dependency relationship."})]})]})]})]})}function h(e={}){const{wrapper:s}={...(0,n.a)(),...e.components};return s?(0,d.jsx)(s,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},11151:(e,s,t)=>{t.d(s,{Z:()=>c,a:()=>o});var d=t(67294);const n={},r=d.createContext(n);function o(e){const s=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),d.createElement(r.Provider,{value:s},e.children)}}}]);