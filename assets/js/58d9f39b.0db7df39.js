"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[71379],{5610:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>n,metadata:()=>r,toc:()=>l});var d=s(85893),i=s(11151);const n={title:"pg_stat_database"},a="pg_stat_database",r={id:"sys-catalogs/sys-views/pg-stat-database",title:"pg_stat_database",description:"The pgstatdatabase view provides cumulative statistics for each database in the cluster. It includes metrics such as the number of committed and rolled-back transactions, disk block reads and cache hits, tuples returned or fetched, and counts of inserted, updated, and deleted rows. This view is useful for monitoring overall database activity and performance.",source:"@site/versioned_docs/version-2.x/sys-catalogs/sys-views/pg-stat-database.md",sourceDirName:"sys-catalogs/sys-views",slug:"/sys-catalogs/sys-views/pg-stat-database",permalink:"/docs/sys-catalogs/sys-views/pg-stat-database",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/versioned_docs/version-2.x/sys-catalogs/sys-views/pg-stat-database.md",tags:[],version:"2.x",lastUpdatedBy:"Dianjin Wang",lastUpdatedAt:1749194421,formattedLastUpdatedAt:"Jun 6, 2025",frontMatter:{title:"pg_stat_database"},sidebar:"docsbars",previous:{title:"pg_stat_database_conflicts",permalink:"/docs/sys-catalogs/sys-views/pg-stat-database-conflicts"},next:{title:"pg_stat_gssapi",permalink:"/docs/sys-catalogs/sys-views/pg-stat-gssapi"}},c={},l=[];function o(e){const t={code:"code",h1:"h1",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.h1,{id:"pg_stat_database",children:"pg_stat_database"}),"\n",(0,d.jsxs)(t.p,{children:["The ",(0,d.jsx)(t.code,{children:"pg_stat_database"})," view provides cumulative statistics for each database in the cluster. It includes metrics such as the number of committed and rolled-back transactions, disk block reads and cache hits, tuples returned or fetched, and counts of inserted, updated, and deleted rows. This view is useful for monitoring overall database activity and performance."]}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"column"}),(0,d.jsx)(t.th,{children:"type"}),(0,d.jsx)(t.th,{children:"references"}),(0,d.jsx)(t.th,{children:"description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"gp_segment_id"})}),(0,d.jsx)(t.td,{children:"integer"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Unique identifier of a segment (or coordinator) instance."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"datid"})}),(0,d.jsx)(t.td,{children:"oid"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"OID of this database, or 0 for objects belonging to a shared relation."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"datname"})}),(0,d.jsx)(t.td,{children:"name"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Name of this database, or NULL for shared objects."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"numbackends"})}),(0,d.jsx)(t.td,{children:"integer"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of backends currently connected to this database, or NULL for shared objects. This is the only column in this view that returns a value reflecting current state; all other columns return the accumulated values since the last reset."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"xact_commit"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of transactions in this database that have been committed."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"xact_rollback"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of transactions in this database that have been rolled back."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"blks_read"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of disk blocks read in this database."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"blks_hit"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of times disk blocks were found already in the buffer cache, so that a read was not necessary (this only includes hits in the PostgreSQL buffer cache, not the operating system's file system cache)."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"tup_returned"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of live rows fetched by sequential scans and index entries returned by index scans in this database."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"tup_fetched "})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of live rows fetched by index scans in this database."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"tup_inserted"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of rows inserted by queries in this database."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"tup_updated"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of rows updated by queries in this database."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:"`tup_deleted"}),(0,d.jsx)(t.td,{children:"bigint`"}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"conflicts"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of queries canceled due to conflicts with recovery in this database."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"temp_files"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsxs)(t.td,{children:["Number of temporary files created by queries in this database. All temporary files are counted, regardless of why the temporary file was created (for example, sorting or hashing), and regardless of the ",(0,d.jsx)(t.code,{children:"log_temp_files"})," setting."]})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"temp_bytes"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Total amount of data written to temporary files by queries in this database. All temporary files are counted, regardless of why the temporary file was created, and regardless of the log_temp_files setting."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"deadlocks"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of deadlocks detected in this database."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"checksum_failures"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of data page checksum failures detected in this database (or on a shared object), or NULL if data checksums are not enabled."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"checksum_last_failure"})}),(0,d.jsx)(t.td,{children:"timestamp with time zone"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Time at which the last data page checksum failure was detected in this database (or on a shared object), or NULL if data checksums are not enabled."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"blk_read_time"})}),(0,d.jsx)(t.td,{children:"double precision"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Time spent reading data file blocks by backends in this database, in milliseconds (if track_io_timing is enabled, otherwise zero)."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"session_time"})}),(0,d.jsx)(t.td,{children:"double precision"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Time spent by database sessions in this database, in milliseconds (note that statistics are only updated when the state of a session changes, so if sessions have been idle for a long time, this idle time won't be included)."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"active_time"})}),(0,d.jsx)(t.td,{children:"double precision"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Time spent executing SQL statements in this database, in milliseconds (this corresponds to the states active and fastpath function call in pg_stat_activity)."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"idle_in_transaction_time"})}),(0,d.jsx)(t.td,{children:"double precision"}),(0,d.jsx)(t.td,{}),(0,d.jsxs)(t.td,{children:["Time spent idling while in a transaction in this database, in milliseconds (this corresponds to the states idle in transaction and idle in transaction (aborted) in ",(0,d.jsx)(t.code,{children:"gp_stat_activity"}),")"]})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"sessions"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Total number of sessions established to this database."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"sessions_abandoned"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of database sessions to this database that were terminated because connection to the client was lost."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"sessions_fatal"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of database sessions to this database that were terminated by fatal errors."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"sessions_killed"})}),(0,d.jsx)(t.td,{children:"bigint"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Number of database sessions to this database that were terminated by operator intervention."})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"stats_reset"})}),(0,d.jsx)(t.td,{children:"timestamp with time zone"}),(0,d.jsx)(t.td,{}),(0,d.jsx)(t.td,{children:"Time at which these statistics were last reset."})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,d.jsx)(t,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},11151:(e,t,s)=>{s.d(t,{Z:()=>r,a:()=>a});var d=s(67294);const i={},n=d.createContext(i);function a(e){const t=d.useContext(n);return d.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),d.createElement(n.Provider,{value:t},e.children)}}}]);