"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[95239],{31305:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>u});var r=l(85893),a=l(11151),s=l(74866),i=l(85162);const t={title:"Install required packages"},o=void 0,c={id:"deployment/install-required-packages",title:"Install required packages",description:"This step installs essential development tools, libraries, and dependencies required for building Apache Cloudberry.",source:"@site/versioned_docs/version-2.x/deployment/install-required-packages.md",sourceDirName:"deployment",slug:"/deployment/install-required-packages",permalink:"/docs/deployment/install-required-packages",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/versioned_docs/version-2.x/deployment/install-required-packages.md",tags:[],version:"2.x",lastUpdatedBy:"Dianjin Wang",lastUpdatedAt:1770019228,formattedLastUpdatedAt:"Feb 2, 2026",frontMatter:{title:"Install required packages"},sidebar:"docsbars",previous:{title:"Configure System settings",permalink:"/docs/deployment/system-settings"},next:{title:"Download Source Code",permalink:"/docs/deployment/download-source-code"}},d={},u=[{value:"Install basic system packages",id:"install-basic-system-packages",level:2},{value:"Enable additional development tools and libraries",id:"enable-additional-development-tools-and-libraries",level:3},{value:"Install gcc and gcc-c++ 11+ for Rocky Linux 8 (Optional)",id:"install-gcc-and-gcc-c-11-for-rocky-linux-8-optional",level:3},{value:"Install Apache Xerces-C for ORCA",id:"install-apache-xerces-c-for-orca",level:3},{value:"Extra dependencies for building PAX (Optional)",id:"extra-dependencies-for-building-pax-optional",level:3}];function p(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"This step installs essential development tools, libraries, and dependencies required for building Apache Cloudberry."}),"\n",(0,r.jsx)(n.h2,{id:"install-basic-system-packages",children:"Install basic system packages"}),"\n",(0,r.jsx)(n.p,{children:"The following command installs the full set of primary packages required for Cloudberry development:"}),"\n",(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(i.Z,{value:"rocky-linux",label:"For Rocky Linux 8+",default:!0,children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y apr-devel \\\n  bison \\\n  bzip2-devel \\\n  curl \\\n  cmake3 \\\n  diffutils \\\n  flex \\\n  gcc \\\n  gcc-c++ \\\n  glibc-langpack-en \\\n  glibc-locale-source \\\n  iproute \\\n  krb5-devel \\\n  libcurl-devel \\\n  libevent-devel \\\n  libxml2-devel \\\n  libuuid-devel \\\n  libzstd-devel \\\n  lz4-devel \\\n  net-tools \\\n  openldap-devel \\\n  openssl-devel \\\n  openssh-server \\\n  pam-devel \\\n  perl \\\n  perl-ExtUtils-Embed \\\n  perl-Test-Simple \\\n  perl-Env \\\n  python3-devel \\\n  python3-pip \\\n  readline-devel \\\n  rsync \\\n  wget \\\n  which \\\n  zlib-devel\n"})}),(0,r.jsx)(n.h3,{id:"enable-additional-development-tools-and-libraries",children:"Enable additional development tools and libraries"}),(0,r.jsxs)(n.p,{children:["For Rocky Linux, we also need to install ",(0,r.jsx)(n.code,{children:"CodeReady Builder (CRB)"})," or ",(0,r.jsx)(n.code,{children:"devel"})," repos- they can provide additional development tools and libraries."]}),(0,r.jsx)(n.p,{children:"On Rocky Linux, they are disabled by default and must be explicitly enabled."}),(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(i.Z,{value:"rocky-linux-8",label:"For Rocky Linux 8",default:!0,children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"For Apache Cloudberry 2.1.0"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y --enablerepo=devel liburing-devel libuv-devel libyaml-devel perl-IPC-Run protobuf-devel\n"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"For Apache Cloudberry 2.0.0"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y --enablerepo=devel libuv-devel libyaml-devel perl-IPC-Run protobuf-devel\n"})})]}),(0,r.jsxs)(i.Z,{value:"rocky-linux-9",label:"For Rocky Linux 9",children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"For Apache Cloudberry 2.1.0"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y --enablerepo=crb liburing-devel libuv-devel libyaml-devel perl-IPC-Run protobuf-devel\n"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"For Apache Cloudberry 2.0.0"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y --enablerepo=crb libuv-devel libyaml-devel perl-IPC-Run protobuf-devel\n"})})]})]}),(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:'In Red Hat Enterprise Linux (RHEL), this repository is called "PowerTools."'})}),(0,r.jsx)(n.h3,{id:"install-gcc-and-gcc-c-11-for-rocky-linux-8-optional",children:"Install gcc and gcc-c++ 11+ for Rocky Linux 8 (Optional)"}),(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"This step is only required for Apache Cloudberry 2.0.0. You can skip this step when building Apache Cloudberry 2.1.0."})}),(0,r.jsx)(n.p,{children:"For Rocky Linux 8, we need to install the higher version of gcc and gcc-c++ to build Apache Cloudberry 2.0.0 with PAX support:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'sudo yum install -y gcc-toolset-11-gcc gcc-toolset-11-gcc-c++\nscl enable gcc-toolset-11 bash # for temprory use\nsudo echo "source /opt/rh/gcc-toolset-11/enable" >> /etc/profile.d/gcc.sh\nsudo source /etc/profile.d/gcc.sh #  for permanent use\n'})}),(0,r.jsx)(n.p,{children:"You can verify the gcc and gcc-c++ 11+ version by running:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gcc --version\ng++ --version\n"})}),(0,r.jsx)(n.h3,{id:"install-apache-xerces-c-for-orca",children:"Install Apache Xerces-C for ORCA"}),(0,r.jsx)(n.p,{children:"Apache Xerces-C is a required dependency for enabling the Orca query optimizer in Cloudberry. The following steps download the source code, verify its integrity, build the library, and install it."}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Set variables (helper)"}),"\n",(0,r.jsx)(n.p,{children:"To streamline the commands and make them reusable, define the following helper variables:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'XERCES_LATEST_RELEASE=3.3.0\nXERCES_INSTALL_PREFIX="/usr/local/xerces-c"\n'})}),"\n"]}),"\n"]}),(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"These variables are used throughout the build process to specify the version of Apache Xerces-C being installed (XERCES_LATEST_RELEASE) and its installation directory (XERCES_INSTALL_PREFIX). This ensures consistency and simplifies the commands."})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Download and verify the source package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'wget -nv "https://dlcdn.apache.org//xerces/c/3/sources/xerces-c-${XERCES_LATEST_RELEASE}.tar.gz"\necho "$(curl -sL https://dlcdn.apache.org//xerces/c/3/sources/xerces-c-${XERCES_LATEST_RELEASE}.tar.gz.sha256)" | sha256sum -c -\n'})}),"\n"]}),"\n"]}),(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Ensure the SHA-256 checksum validation passes (output: ",(0,r.jsx)(n.code,{children:"xerces-c-3.3.0.tar.gz: OK"}),"). If it fails, do not proceed and verify the source package's integrity."]})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Extract, configure, build, test, and install"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'tar xf "xerces-c-${XERCES_LATEST_RELEASE}.tar.gz"\nrm "xerces-c-${XERCES_LATEST_RELEASE}.tar.gz"\ncd xerces-c-${XERCES_LATEST_RELEASE}\n\n./configure --prefix="${XERCES_INSTALL_PREFIX}-${XERCES_LATEST_RELEASE}" | tee configure-$(date "+%Y.%m.%d-%H.%M.%S").log\nmake -j$(nproc) | tee make-$(date "+%Y.%m.%d-%H.%M.%S").log\nmake check | tee make-check-$(date "+%Y.%m.%d-%H.%M.%S").log\nsudo make install | tee make-install-$(date "+%Y.%m.%d-%H.%M.%S").log\nsudo ln -s ${XERCES_INSTALL_PREFIX}-${XERCES_LATEST_RELEASE} ${XERCES_INSTALL_PREFIX}\n'})}),"\n"]}),"\n"]}),(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"make"})," command is run in parallel (",(0,r.jsx)(n.code,{children:"-j$(nproc)"}),") to leverage all available CPU cores for faster builds. The ",(0,r.jsx)(n.code,{children:"nproc"})," command dynamically retrieves the number of cores."]}),"\n",(0,r.jsxs)(n.li,{children:["During ",(0,r.jsx)(n.code,{children:"make check"}),", failures listed as ",(0,r.jsx)(n.strong,{children:"XFAIL"})," (expected failures) are acceptable and do not indicate a problem with the build."]}),"\n",(0,r.jsx)(n.li,{children:"The output of the commands are saved to timestamped log files for future reference or troubleshooting."}),"\n"]})})]}),(0,r.jsxs)(i.Z,{value:"ubuntu",label:"For Ubuntu 20.04+",children:[(0,r.jsx)(n.p,{children:"For Ubuntu users:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The gcc and g++ versions in Ubuntu 20.04+ are sufficient for building Apache Cloudberry."}),"\n",(0,r.jsxs)(n.li,{children:["We will use the default version of ",(0,r.jsx)(n.code,{children:"libxerces-c"})," available in the Ubuntu repositories, which is compatible with Apache Cloudberry."]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install -y bison \\\n  bzip2 \\\n  cmake \\\n  curl \\\n  flex \\\n  gcc \\\n  g++ \\\n  iproute2 \\\n  iputils-ping \\\n  language-pack-en \\\n  locales \\\n  libapr1-dev \\\n  libbz2-dev \\\n  libcurl4-gnutls-dev \\\n  libevent-dev \\\n  libkrb5-dev \\\n  libipc-run-perl \\\n  libldap2-dev \\\n  libpam0g-dev \\\n  libprotobuf-dev \\\n  libreadline-dev \\\n  libssl-dev \\\n  libuv1-dev \\\n  liblz4-dev \\\n  libxerces-c-dev \\\n  libxml2-dev \\\n  libyaml-dev \\\n  libzstd-dev \\\n  libperl-dev \\\n  make \\\n  pkg-config \\\n  protobuf-compiler \\\n  python3-dev \\\n  python3-pip \\\n  python3-setuptools \\\n  rsync\n"})}),(0,r.jsx)(n.h3,{id:"extra-dependencies-for-building-pax-optional",children:"Extra dependencies for building PAX (Optional)"}),(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Only required for Apache Cloudberry 2.1.0. You can skip this step when building Apache Cloudberry 2.0.0."})}),(0,r.jsxs)(n.p,{children:["In Apache Cloudberry 2.1.0, we have introduced a new dependency ",(0,r.jsx)(n.code,{children:"liburing"})," for building PAX."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"For Ubuntu 22.04"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install -y liburing-dev\n"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"For Ubuntu 20.04"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'sudo apt install -y git build-essential\nwget https://github.com/axboe/liburing/archive/refs/tags/liburing-2.1.tar.gz\ntar -xzf liburing-2.1.tar.gz\nrm "liburing-2.1.tar.gz"\ncd liburing-liburing-2.1\nmake -j$(nproc)\nsudo make install\nsudo ldconfig\n'})})]})]})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},85162:(e,n,l)=>{l.d(n,{Z:()=>i});l(67294);var r=l(90512);const a={tabItem:"tabItem_Ymn6"};var s=l(85893);function i(e){let{children:n,hidden:l,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,i),hidden:l,children:n})}},74866:(e,n,l)=>{l.d(n,{Z:()=>E});var r=l(67294),a=l(90512),s=l(12466),i=l(16550),t=l(20469),o=l(91980),c=l(67392),d=l(50012);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:l}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:l,attributes:r,default:a}}=e;return{value:n,label:l,attributes:r,default:a}}))}(l);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,l])}function h(e){let{value:n,tabValues:l}=e;return l.some((e=>e.value===n))}function b(e){let{queryString:n=!1,groupId:l}=e;const a=(0,i.k6)(),s=function(e){let{queryString:n=!1,groupId:l}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!l)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return l??null}({queryString:n,groupId:l});return[(0,o._X)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(a.location.search);n.set(s,e),a.replace({...a.location,search:n.toString()})}),[s,a])]}function g(e){const{defaultValue:n,queryString:l=!1,groupId:a}=e,s=p(e),[i,o]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:l}=e;if(0===l.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:l}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${l.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=l.find((e=>e.default))??l[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[c,u]=b({queryString:l,groupId:a}),[g,m]=function(e){let{groupId:n}=e;const l=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,s]=(0,d.Nk)(l);return[a,(0,r.useCallback)((e=>{l&&s.set(e)}),[l,s])]}({groupId:a}),x=(()=>{const e=c??g;return h({value:e,tabValues:s})?e:null})();(0,t.Z)((()=>{x&&o(x)}),[x]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),m(e)}),[u,m,s]),tabValues:s}}var m=l(72389);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=l(85893);function f(e){let{className:n,block:l,selectedValue:r,selectValue:i,tabValues:t}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.o5)(),d=e=>{const n=e.currentTarget,l=o.indexOf(n),a=t[l].value;a!==r&&(c(n),i(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const l=o.indexOf(e.currentTarget)+1;n=o[l]??o[0];break}case"ArrowLeft":{const l=o.indexOf(e.currentTarget)-1;n=o[l]??o[o.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":l},n),children:t.map((e=>{let{value:n,label:l,attributes:s}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>o.push(e),onKeyDown:u,onClick:d,...s,className:(0,a.Z)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":r===n}),children:l??n},n)}))})}function y(e){let{lazy:n,children:l,selectedValue:a}=e;const s=(Array.isArray(l)?l:[l]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function j(e){const n=g(e);return(0,v.jsxs)("div",{className:(0,a.Z)("tabs-container",x.tabList),children:[(0,v.jsx)(f,{...e,...n}),(0,v.jsx)(y,{...e,...n})]})}function E(e){const n=(0,m.Z)();return(0,v.jsx)(j,{...e,children:u(e.children)},String(n))}},11151:(e,n,l)=>{l.d(n,{Z:()=>t,a:()=>i});var r=l(67294);const a={},s=r.createContext(a);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);