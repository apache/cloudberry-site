"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[5200],{41176:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var a=n(85893),s=n(11151);const i={title:"Routine System Maintenance Tasks"},o="Routine System Maintenance Tasks",r={id:"sys-admin/routine-maintain-tasks",title:"Routine System Maintenance Tasks",description:"To keep a Apache Cloudberry system running efficiently, the database must be regularly cleared of expired data and the table statistics must be updated so that the query optimizer has accurate information.",source:"@site/docs/sys-admin/routine-maintain-tasks.md",sourceDirName:"sys-admin",slug:"/sys-admin/routine-maintain-tasks",permalink:"/docs/next/sys-admin/routine-maintain-tasks",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/docs/sys-admin/routine-maintain-tasks.md",tags:[],version:"current",lastUpdatedBy:"TomShawn",lastUpdatedAt:1761905913,formattedLastUpdatedAt:"Oct 31, 2025",frontMatter:{title:"Routine System Maintenance Tasks"},sidebar:"docsbars",previous:{title:"Recommended Monitoring and Maintenance Tasks",permalink:"/docs/next/sys-admin/recommended-maintenance-monitoring-tasks"},next:{title:"Monitor Long-Running Operations",permalink:"/docs/next/sys-admin/monitor-long-running-operations"}},c={},l=[{value:"Routine vacuum and analyze",id:"routine-vacuum-and-analyze",level:2},{value:"Transaction ID management",id:"transaction-id-management",level:3},{value:"Recover from a transaction ID limit error",id:"recover-from-a-transaction-id-limit-error",level:4},{value:"System catalog maintenance",id:"system-catalog-maintenance",level:3},{value:"Regular system catalog maintenance",id:"regular-system-catalog-maintenance",level:4},{value:"Intensive system catalog maintenance",id:"intensive-system-catalog-maintenance",level:4},{value:"Vacuum and analyze for query optimization",id:"vacuum-and-analyze-for-query-optimization",level:3},{value:"Routine reindexing",id:"routine-reindexing",level:2},{value:"Manage Apache Cloudberry log files",id:"manage-apache-cloudberry-log-files",level:2},{value:"Database server log files",id:"database-server-log-files",level:3},{value:"Management utility log files",id:"management-utility-log-files",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"routine-system-maintenance-tasks",children:"Routine System Maintenance Tasks"}),"\n",(0,a.jsx)(t.p,{children:"To keep a Apache Cloudberry system running efficiently, the database must be regularly cleared of expired data and the table statistics must be updated so that the query optimizer has accurate information."}),"\n",(0,a.jsxs)(t.p,{children:["Apache Cloudberry requires that certain tasks be performed regularly to achieve optimal performance. The tasks discussed here are required, but database administrators can automate them using standard UNIX tools such as ",(0,a.jsx)(t.code,{children:"cron"})," scripts. An administrator sets up the appropriate scripts and checks that they ran successfully. See ",(0,a.jsx)(t.a,{href:"/docs/next/sys-admin/recommended-maintenance-monitoring-tasks",children:"Recommended Monitoring and Maintenance Tasks"})," for additional suggested maintenance activities you can implement to keep your Cloudberry system running optimally."]}),"\n",(0,a.jsx)(t.h2,{id:"routine-vacuum-and-analyze",children:"Routine vacuum and analyze"}),"\n",(0,a.jsxs)(t.p,{children:["The design of the MVCC transaction concurrency model used in Apache Cloudberry means that deleted or updated data rows still occupy physical space on disk even though they are not visible to new transactions. If your database has many updates and deletes, many expired rows exist and the space they use must be reclaimed with the ",(0,a.jsx)(t.code,{children:"VACUUM"})," command. The ",(0,a.jsx)(t.code,{children:"VACUUM"})," command also collects table-level statistics, such as numbers of rows and pages, so it is also necessary to vacuum append-optimized tables, even when there is no space to reclaim from updated or deleted rows."]}),"\n",(0,a.jsx)(t.p,{children:"Vacuuming an append-optimized table follows a different process than vacuuming heap tables. On each segment, a new segment file is created and visible rows are copied into it from the current segment. When the segment file has been copied, the original is scheduled to be dropped and the new segment file is made available. This requires sufficient available disk space for a copy of the visible rows until the original segment file is dropped."}),"\n",(0,a.jsxs)(t.p,{children:["If the ratio of hidden rows to total rows in a segment file is less than a threshold value (10, by default), the segment file is not compacted. The threshold value can be configured with the ",(0,a.jsx)(t.code,{children:"gp_appendonly_compaction_threshold"})," server configuration parameter. ",(0,a.jsx)(t.code,{children:"VACUUM FULL"})," ignores the value of ",(0,a.jsx)(t.code,{children:"gp_appendonly_compaction_threshold"})," and rewrites the segment file regardless of the ratio."]}),"\n",(0,a.jsxs)(t.p,{children:["You can use the ",(0,a.jsx)(t.code,{children:"__gp_aovisimap_compaction_info()"})," function in the ",(0,a.jsx)(t.em,{children:"gp_toolkit"})," schema to investigate the effectiveness of a VACUUM operation on append-optimized tables."]}),"\n",(0,a.jsxs)(t.p,{children:["For information about the ",(0,a.jsx)(t.code,{children:"__gp_aovisimap_compaction_info()"})," function, see ",(0,a.jsx)(t.a,{href:"/docs/next/sys-catalogs/gp_toolkit#check-append-optimized-tables",children:"Checking Append-Optimized Tables"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"VACUUM"})," can be deactivated for append-optimized tables using the ",(0,a.jsx)(t.code,{children:"gp_appendonly_compaction"})," server configuration parameter."]}),"\n",(0,a.jsxs)(t.p,{children:["For details about vacuuming a database, see ",(0,a.jsx)(t.a,{href:"/docs/next/sql-stmts/vacuum",children:"Vacuuming the Database"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"transaction-id-management",children:"Transaction ID management"}),"\n",(0,a.jsxs)(t.p,{children:["Cloudberry's MVCC transaction semantics depend on comparing transaction ID (XID) numbers to determine visibility to other transactions. Transaction ID numbers are compared using modulo 232 arithmetic, so a Cloudberry system that runs more than about two billion transactions can experience transaction ID wraparound, where past transactions appear to be in the future. This means past transactions' outputs become invisible. Therefore, it is necessary to ",(0,a.jsx)(t.code,{children:"VACUUM"})," every table in every database at least once per two billion transactions."]}),"\n",(0,a.jsx)(t.p,{children:"Apache Cloudberry assigns XID values only to transactions that involve DDL or DML operations, which are typically the only transactions that require an XID."}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsx)(t.p,{children:"Apache Cloudberry monitors transaction IDs. If you do not vacuum the database regularly, Apache Cloudberry will generate a warning and error."})}),"\n",(0,a.jsx)(t.p,{children:"Apache Cloudberry issues the following warning when a significant portion of the transaction IDs are no longer available and before transaction ID wraparound occurs:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:'WARNING: database "database_name" must be vacuumed within *number_of_transactions* transactions'})}),"\n",(0,a.jsxs)(t.p,{children:["When the warning is issued, a ",(0,a.jsx)(t.code,{children:"VACUUM"})," operation is required. If a ",(0,a.jsx)(t.code,{children:"VACUUM"})," operation is not performed, Apache Cloudberry stops creating transactions when it reaches a limit prior to when transaction ID wraparound occurs. Apache Cloudberry issues this error when it stops creating transactions to avoid possible data loss:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'FATAL: database is not accepting commands to avoid \nwraparound data loss in database "database_name"\n'})}),"\n",(0,a.jsxs)(t.p,{children:["The Apache Cloudberry configuration parameter ",(0,a.jsx)(t.code,{children:"xid_warn_limit"})," controls when the warning is displayed. The parameter ",(0,a.jsx)(t.code,{children:"xid_stop_limit"})," controls when Apache Cloudberry stops creating transactions."]}),"\n",(0,a.jsx)(t.h4,{id:"recover-from-a-transaction-id-limit-error",children:"Recover from a transaction ID limit error"}),"\n",(0,a.jsxs)(t.p,{children:["When Apache Cloudberry reaches the ",(0,a.jsx)(t.code,{children:"xid_stop_limit"})," transaction ID limit due to infrequent ",(0,a.jsx)(t.code,{children:"VACUUM"})," maintenance, it becomes unresponsive. To recover from this situation, perform the following steps as database administrator:"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Shut down Apache Cloudberry."}),"\n",(0,a.jsxs)(t.li,{children:["Temporarily lower the ",(0,a.jsx)(t.code,{children:"xid_stop_limit"})," by 10,000,000."]}),"\n",(0,a.jsx)(t.li,{children:"Start Apache Cloudberry."}),"\n",(0,a.jsxs)(t.li,{children:["Run ",(0,a.jsx)(t.code,{children:"VACUUM FREEZE"})," on all affected databases."]}),"\n",(0,a.jsxs)(t.li,{children:["Reset the ",(0,a.jsx)(t.code,{children:"xid_stop_limit"})," to its original value."]}),"\n",(0,a.jsx)(t.li,{children:"Restart Apache Cloudberry."}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["For information about transaction ID wraparound see the ",(0,a.jsx)(t.a,{href:"https://www.postgresql.org/docs/12/index.html",children:"PostgreSQL documentation"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"system-catalog-maintenance",children:"System catalog maintenance"}),"\n",(0,a.jsxs)(t.p,{children:["Numerous database updates with ",(0,a.jsx)(t.code,{children:"CREATE"})," and ",(0,a.jsx)(t.code,{children:"DROP"})," commands increase the system catalog size and affect system performance. For example, running many ",(0,a.jsx)(t.code,{children:"DROP TABLE"})," statements degrades the overall system performance due to excessive data scanning during metadata operations on catalog tables. The performance loss occurs between thousands to tens of thousands of ",(0,a.jsx)(t.code,{children:"DROP TABLE"})," statements, depending on the system."]}),"\n",(0,a.jsx)(t.p,{children:"You should run a system catalog maintenance procedure regularly to reclaim the space occupied by deleted objects. If a regular procedure has not been run for a long time, you may need to run a more intensive procedure to clear the system catalog. This topic describes both procedures."}),"\n",(0,a.jsx)(t.h4,{id:"regular-system-catalog-maintenance",children:"Regular system catalog maintenance"}),"\n",(0,a.jsxs)(t.p,{children:["It is recommended that you periodically run ",(0,a.jsx)(t.code,{children:"REINDEX"})," and ",(0,a.jsx)(t.code,{children:"VACUUM"})," on the system catalog to clear the space that deleted objects occupy in the system indexes and tables. If regular database operations include numerous ",(0,a.jsx)(t.code,{children:"DROP"})," statements, it is safe and appropriate to run a system catalog maintenance procedure with ",(0,a.jsx)(t.code,{children:"VACUUM"})," daily at off-peak hours. You can do this while the system is available."]}),"\n",(0,a.jsx)(t.p,{children:"These are Apache Cloudberry system catalog maintenance steps."}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Perform a ",(0,a.jsx)(t.code,{children:"REINDEX"})," on the system catalog tables to rebuild the system catalog indexes. This removes bloat in the indexes and improves ",(0,a.jsx)(t.code,{children:"VACUUM"})," performance."]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"REINDEX"})," causes locking of system catalog tables, which could affect currently running queries. To avoid disrupting ongoing business operations, schedule the ",(0,a.jsx)(t.code,{children:"REINDEX"})," operation during a period of low activity."]})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Perform a ",(0,a.jsx)(t.code,{children:"VACUUM"})," on the system catalog tables."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Perform an ",(0,a.jsx)(t.code,{children:"ANALYZE"})," on the system catalog tables to update the catalog table statistics."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["This example script performs a ",(0,a.jsx)(t.code,{children:"REINDEX"}),", ",(0,a.jsx)(t.code,{children:"VACUUM"}),", and ",(0,a.jsx)(t.code,{children:"ANALYZE"})," of a Apache Cloudberry system catalog. In the script, replace ",(0,a.jsx)(t.code,{children:"<database-name>"})," with a database name."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:"#!/bin/bash\nDBNAME=\"<database-name>\"\nSYSTABLES=\"' pg_catalog.' || relname || ';' FROM pg_class a, pg_namespace b \nWHERE a.relnamespace=b.oid AND b.nspname='pg_catalog' AND a.relkind='r'\"\n\nreindexdb --system -d $DBNAME\npsql -tc \"SELECT 'VACUUM' || $SYSTABLES\" $DBNAME | psql -a $DBNAME\nanalyzedb -as pg_catalog -d $DBNAME\n"})}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsxs)(t.p,{children:["If you are performing catalog maintenance during a maintenance period and you need to stop a process due to time constraints, run the Apache Cloudberry function ",(0,a.jsx)(t.code,{children:"pg_cancel_backend(<PID>)"})," to safely stop the Apache Cloudberry process."]})}),"\n",(0,a.jsx)(t.h4,{id:"intensive-system-catalog-maintenance",children:"Intensive system catalog maintenance"}),"\n",(0,a.jsxs)(t.p,{children:["If system catalog maintenance has not been performed in a long time, the catalog can become bloated with dead space; this causes excessively long wait times for simple metadata operations. A wait of more than two seconds to list user tables, such as with the ",(0,a.jsx)(t.code,{children:"\\d"})," metacommand from within ",(0,a.jsx)(t.code,{children:"psql"}),", is an indication of catalog bloat."]}),"\n",(0,a.jsxs)(t.p,{children:["If you see indications of system catalog bloat, you must perform an intensive system catalog maintenance procedure with ",(0,a.jsx)(t.code,{children:"VACUUM FULL"})," during a scheduled downtime period. During this period, stop all catalog activity on the system; the ",(0,a.jsx)(t.code,{children:"VACUUM FULL"})," system catalog maintenance procedure takes exclusive locks against the system catalog."]}),"\n",(0,a.jsx)(t.p,{children:"Running regular system catalog maintenance procedures can prevent the need for this more costly procedure."}),"\n",(0,a.jsx)(t.p,{children:"These are steps for intensive system catalog maintenance."}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Stop all catalog activity on the Apache Cloudberry system."}),"\n",(0,a.jsxs)(t.li,{children:["Perform a ",(0,a.jsx)(t.code,{children:"REINDEX"})," on the system catalog tables to rebuild the system catalog indexes. This removes bloat in the indexes and improves ",(0,a.jsx)(t.code,{children:"VACUUM"})," performance."]}),"\n",(0,a.jsxs)(t.li,{children:["Perform a ",(0,a.jsx)(t.code,{children:"VACUUM FULL"})," on the system catalog tables. See the following Note."]}),"\n",(0,a.jsxs)(t.li,{children:["Perform an ",(0,a.jsx)(t.code,{children:"ANALYZE"})," on the system catalog tables to update the catalog table statistics."]}),"\n"]}),"\n",(0,a.jsxs)(t.admonition,{type:"note",children:[(0,a.jsxs)(t.p,{children:["The system catalog table ",(0,a.jsx)(t.code,{children:"pg_attribute"})," is usually the largest catalog table. If the ",(0,a.jsx)(t.code,{children:"pg_attribute"})," table is significantly bloated, a ",(0,a.jsx)(t.code,{children:"VACUUM FULL"})," operation on the table might require a significant amount of time and might need to be performed separately. The presence of both of these conditions indicate a significantly bloated ",(0,a.jsx)(t.code,{children:"pg_attribute"})," table that might require a long ",(0,a.jsx)(t.code,{children:"VACUUM FULL"})," time:"]}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["The ",(0,a.jsx)(t.code,{children:"pg_attribute"})," table contains a large number of records."]}),"\n",(0,a.jsxs)(t.li,{children:["The diagnostic message for ",(0,a.jsx)(t.code,{children:"pg_attribute"})," is ",(0,a.jsx)(t.code,{children:"significant amount of bloat"})," in the ",(0,a.jsx)(t.code,{children:"gp_toolkit.gp_bloat_diag"})," view."]}),"\n"]})]}),"\n",(0,a.jsx)(t.h3,{id:"vacuum-and-analyze-for-query-optimization",children:"Vacuum and analyze for query optimization"}),"\n",(0,a.jsxs)(t.p,{children:["Apache Cloudberry uses a cost-based query optimizer that relies on database statistics. Accurate statistics allow the query optimizer to better estimate selectivity and the number of rows that a query operation retrieves. These estimates help it choose the most efficient query plan. The ",(0,a.jsx)(t.code,{children:"ANALYZE"})," command collects column-level statistics for the query optimizer."]}),"\n",(0,a.jsxs)(t.p,{children:["You can run both ",(0,a.jsx)(t.code,{children:"VACUUM"})," and ",(0,a.jsx)(t.code,{children:"ANALYZE"})," operations in the same command. For example:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"=# VACUUM ANALYZE mytable;\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Running the VACUUM ANALYZE command might produce incorrect statistics when the command is run on a table with a significant amount of bloat (a significant amount of table disk space is occupied by deleted or obsolete rows). For large tables, the ",(0,a.jsx)(t.code,{children:"ANALYZE"})," command calculates statistics from a random sample of rows. It estimates the number rows in the table by multiplying the average number of rows per page in the sample by the number of actual pages in the table. If the sample contains many empty pages, the estimated row count can be inaccurate."]}),"\n",(0,a.jsxs)(t.p,{children:["For a table, you can view information about the amount of unused disk space (space that is occupied by deleted or obsolete rows) in the ",(0,a.jsx)(t.em,{children:"gp_toolkit"})," view ",(0,a.jsx)(t.em,{children:"gp_bloat_diag"}),". If the ",(0,a.jsx)(t.code,{children:"bdidiag"})," column for a table contains the value ",(0,a.jsx)(t.code,{children:"significant amount of bloat suspected"}),", a significant amount of table disk space consists of unused space. Entries are added to the ",(0,a.jsx)(t.em,{children:"gp_bloat_diag"})," view after a table has been vacuumed."]}),"\n",(0,a.jsx)(t.p,{children:"To remove unused disk space from the table, you can run the command VACUUM FULL on the table. Due to table lock requirements, VACUUM FULL might not be possible until a maintenance period."}),"\n",(0,a.jsxs)(t.p,{children:["As a temporary workaround, run ANALYZE to compute column statistics and then run VACUUM on the table to generate an accurate row count. This example runs ANALYZE and then VACUUM on the ",(0,a.jsx)(t.em,{children:"cust_info"})," table."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"ANALYZE cust_info;\nVACUUM cust_info;\n"})}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["If you intend to run queries on partitioned tables with GPORCA enabled (the default), you must collect statistics on the root partitioned table with the ANALYZE command. For information about GPORCA, see ",(0,a.jsx)(t.a,{href:"/docs/next/performance/optimize-queries/use-orca/use-orca-overview",children:"Overview of GPORCA"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["You can use the Apache Cloudberry utility analyzedb to update table statistics. Tables can be analyzed concurrently. For append optimized tables, analyzedb updates statistics only if the statistics are not current. See the ",(0,a.jsx)(t.a,{href:"/docs/next/sys-utilities/analyzedb",children:(0,a.jsx)(t.code,{children:"analyzedb"})})," utility."]}),"\n"]}),"\n"]})}),"\n",(0,a.jsx)(t.h2,{id:"routine-reindexing",children:"Routine reindexing"}),"\n",(0,a.jsxs)(t.p,{children:["For B-tree indexes, a freshly-constructed index is slightly faster to access than one that has been updated many times because logically adjacent pages are usually also physically adjacent in a newly built index. Reindexing older indexes periodically can improve access speed. If all but a few index keys on a page have been deleted, there will be wasted space on the index page. A reindex will reclaim that wasted space. In Apache Cloudberry it is often faster to drop an index (",(0,a.jsx)(t.code,{children:"DROP INDEX"}),") and then recreate it (",(0,a.jsx)(t.code,{children:"CREATE INDEX"}),") than it is to use the ",(0,a.jsx)(t.code,{children:"REINDEX"})," command."]}),"\n",(0,a.jsx)(t.p,{children:"For table columns with indexes, some operations such as bulk updates or inserts to the table might perform more slowly because of the updates to the indexes. To enhance performance of bulk operations on tables with indexes, you can drop the indexes, perform the bulk operation, and then re-create the index."}),"\n",(0,a.jsx)(t.h2,{id:"manage-apache-cloudberry-log-files",children:"Manage Apache Cloudberry log files"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#database-server-log-files",children:"Database Server Log Files"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#management-utility-log-files",children:"Management Utility Log Files"})}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"database-server-log-files",children:"Database server log files"}),"\n",(0,a.jsx)(t.p,{children:"Apache Cloudberry log output tends to be voluminous, especially at higher debug levels, and you do not need to save it indefinitely. Administrators should purge older log files periodically."}),"\n",(0,a.jsxs)(t.p,{children:["Apache Cloudberry by default has log file rotation enabled for the coordinator and segment database logs. Log files are created in the ",(0,a.jsx)(t.code,{children:"log"})," subdirectory of the coordinator and each segment data directory using the following naming convention: ",(0,a.jsx)(t.code,{children:"gpdb-*YYYY*-*MM*-*DD_hhmmss*.csv"}),". Administrators need to implement scripts or programs to periodically clean up old log files in the ",(0,a.jsx)(t.code,{children:"log"})," directory of the coordinator and each segment instance."]}),"\n",(0,a.jsxs)(t.p,{children:["Log rotation can be triggered by the size of the current log file or the age of the current log file. The ",(0,a.jsx)(t.code,{children:"log_rotation_size"})," configuration parameter sets the size of an individual log file that triggers log rotation. When the log file size is equal to or greater than the specified size, the file is closed and a new log file is created. The ",(0,a.jsx)(t.code,{children:"log_rotation_size"})," value is specified in kilobytes. The default is 1048576 kilobytes, or 1GB. If ",(0,a.jsx)(t.code,{children:"log_rotation_size"})," is set to 0, size-based rotation is deactivated."]}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"log_rotation_age"})," configuration parameter specifies the age of a log file that triggers rotation. When the specified amount of time has elapsed since the log file was created, the file is closed and a new log file is created. The default ",(0,a.jsx)(t.code,{children:"log_rotation_age"}),", 1d, creates a new log file 24 hours after the current log file was created. If ",(0,a.jsx)(t.code,{children:"log_rotation_age"})," is set to 0, time-based rotation is deactivated."]}),"\n",(0,a.jsxs)(t.p,{children:["For information about viewing the database server log files, see ",(0,a.jsx)(t.a,{href:"/docs/next/sys-admin/recommended-maintenance-monitoring-tasks",children:"Viewing the Database Server Log Files"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"management-utility-log-files",children:"Management utility log files"}),"\n",(0,a.jsxs)(t.p,{children:["Log files for the Apache Cloudberry management utilities are written to ",(0,a.jsx)(t.code,{children:"~/gpAdminLogs"})," by default. The naming convention for management log files is:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"<script_name>_<date>.log\n"})}),"\n",(0,a.jsx)(t.p,{children:"The log entry format is:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"<timestamp>:<utility>:<host>:<user>:[INFO|WARN|FATAL]:<message>\n"})}),"\n",(0,a.jsx)(t.p,{children:"The log file for a particular utility execution is appended to its daily log file each time that utility is run."})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>o});var a=n(67294);const s={},i=a.createContext(s);function o(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);