"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[83386],{90136:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var r=l(85893),t=l(11151),a=l(74866),s=l(85162);const i={title:"Install required packages"},o=void 0,c={id:"deployment/install-required-packages",title:"Install required packages",description:"This step installs essential development tools, libraries, and dependencies required for building Apache Cloudberry.",source:"@site/docs/deployment/install-required-packages.md",sourceDirName:"deployment",slug:"/deployment/install-required-packages",permalink:"/docs/next/deployment/install-required-packages",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/docs/deployment/install-required-packages.md",tags:[],version:"current",lastUpdatedBy:"Dianjin Wang",lastUpdatedAt:1758076255,formattedLastUpdatedAt:"Sep 17, 2025",frontMatter:{title:"Install required packages"},sidebar:"docsbars",previous:{title:"Configure System settings",permalink:"/docs/next/deployment/system-settings"},next:{title:"Download Source Code",permalink:"/docs/next/deployment/download-source-code"}},d={},u=[{value:"Install basic system packages",id:"install-basic-system-packages",level:2},{value:"Enable additional development tools and libraries",id:"enable-additional-development-tools-and-libraries",level:3},{value:"Install Apache Xerces-C for ORCA",id:"install-apache-xerces-c-for-orca",level:3}];function p(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"This step installs essential development tools, libraries, and dependencies required for building Apache Cloudberry."}),"\n",(0,r.jsx)(n.h2,{id:"install-basic-system-packages",children:"Install basic system packages"}),"\n",(0,r.jsx)(n.p,{children:"The following command installs the full set of primary packages required for Cloudberry development:"}),"\n",(0,r.jsxs)(a.Z,{children:[(0,r.jsxs)(s.Z,{value:"rocky-linux",label:"For Rocky Linux 8+",default:!0,children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y apr-devel \\\n  bison \\\n  bzip2-devel \\\n  cmake3 \\\n  curl \\\n  diffutils \\\n  flex \\\n  gcc \\\n  gcc-c++ \\\n  glibc-langpack-en \\\n  glibc-locale-source \\\n  iproute \\\n  krb5-devel \\\n  libcurl-devel \\\n  libevent-devel \\\n  libxml2-devel \\\n  libuuid-devel \\\n  libzstd-devel \\\n  lz4-devel \\\n  net-tools \\\n  openldap-devel \\\n  openssl-devel \\\n  openssh-server \\\n  pam-devel \\\n  perl \\\n  perl-ExtUtils-Embed \\\n  perl-Test-Simple \\\n  perl-Env \\\n  python3-devel \\\n  python3-pip \\\n  readline-devel \\\n  rsync \\\n  wget \\\n  which \\\n  zlib-devel\n"})}),(0,r.jsx)(n.h3,{id:"enable-additional-development-tools-and-libraries",children:"Enable additional development tools and libraries"}),(0,r.jsxs)(n.p,{children:["For Rocky Linux, we also need to install ",(0,r.jsx)(n.code,{children:"CodeReady Builder (CRB)"})," or ",(0,r.jsx)(n.code,{children:"devel"})," repos- they can provide additional development tools and libraries."]}),(0,r.jsx)(n.p,{children:"On Rocky Linux, they are disabled by default and must be explicitly enabled."}),(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(s.Z,{value:"rocky-linux-8",label:"For Rocky Linux 8",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y --enablerepo=devel libuv-devel libyaml-devel perl-IPC-Run protobuf-devel\n"})})}),(0,r.jsx)(s.Z,{value:"rocky-linux-9",label:"For Rocky Linux 9",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y --enablerepo=crb libuv-devel libyaml-devel perl-IPC-Run protobuf-devel\n"})})})]}),(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:'In Red Hat Enterprise Linux (RHEL), this repository is called "PowerTools."'})}),(0,r.jsx)(n.h3,{id:"install-apache-xerces-c-for-orca",children:"Install Apache Xerces-C for ORCA"}),(0,r.jsx)(n.p,{children:"Apache Xerces-C is a required dependency for enabling the Orca query optimizer in Cloudberry. The following steps download the source code, verify its integrity, build the library, and install it."}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Set variables (helper)"}),"\n",(0,r.jsx)(n.p,{children:"To streamline the commands and make them reusable, define the following helper variables:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'XERCES_LATEST_RELEASE=3.3.0\nXERCES_INSTALL_PREFIX="/usr/local/xerces-c"\n'})}),"\n"]}),"\n"]}),(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"These variables are used throughout the build process to specify the version of Apache Xerces-C being installed (XERCES_LATEST_RELEASE) and its installation directory (XERCES_INSTALL_PREFIX). This ensures consistency and simplifies the commands."})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Download and verify the source package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'wget -nv "https://dlcdn.apache.org//xerces/c/3/sources/xerces-c-${XERCES_LATEST_RELEASE}.tar.gz"\necho "$(curl -sL https://dlcdn.apache.org//xerces/c/3/sources/xerces-c-${XERCES_LATEST_RELEASE}.tar.gz.sha256)" | sha256sum -c -\n'})}),"\n"]}),"\n"]}),(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Ensure the SHA-256 checksum validation passes (output: ",(0,r.jsx)(n.code,{children:"xerces-c-3.3.0.tar.gz: OK"}),"). If it fails, do not proceed and verify the source package's integrity."]})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Extract, configure, build, test, and install"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'tar xf "xerces-c-${XERCES_LATEST_RELEASE}.tar.gz"\nrm "xerces-c-${XERCES_LATEST_RELEASE}.tar.gz"\ncd xerces-c-${XERCES_LATEST_RELEASE}\n\n./configure --prefix="${XERCES_INSTALL_PREFIX}-${XERCES_LATEST_RELEASE}" | tee configure-$(date "+%Y.%m.%d-%H.%M.%S").log\nmake -j$(nproc) | tee make-$(date "+%Y.%m.%d-%H.%M.%S").log\nmake check | tee make-check-$(date "+%Y.%m.%d-%H.%M.%S").log\nsudo make install | tee make-install-$(date "+%Y.%m.%d-%H.%M.%S").log\nsudo ln -s ${XERCES_INSTALL_PREFIX}-${XERCES_LATEST_RELEASE} ${XERCES_INSTALL_PREFIX}\n'})}),"\n"]}),"\n"]}),(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"make"})," command is run in parallel (",(0,r.jsx)(n.code,{children:"-j$(nproc)"}),") to leverage all available CPU cores for faster builds. The ",(0,r.jsx)(n.code,{children:"nproc"})," command dynamically retrieves the number of cores."]}),"\n",(0,r.jsxs)(n.li,{children:["During ",(0,r.jsx)(n.code,{children:"make check"}),", failures listed as ",(0,r.jsx)(n.strong,{children:"XFAIL"})," (expected failures) are acceptable and do not indicate a problem with the build."]}),"\n",(0,r.jsx)(n.li,{children:"The output of the commands are saved to timestamped log files for future reference or troubleshooting."}),"\n"]})})]}),(0,r.jsxs)(s.Z,{value:"ubuntu",label:"For Ubuntu 20.04+",children:[(0,r.jsx)(n.p,{children:"For Ubuntu users:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The gcc and g++ versions in Ubuntu 20.04+ are sufficient for building Apache Cloudberry."}),"\n",(0,r.jsxs)(n.li,{children:["We will use the default version of ",(0,r.jsx)(n.code,{children:"libxerces-c"})," available in the Ubuntu repositories, which is compatible with Apache Cloudberry."]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install -y bison \\\n  bzip2 \\\n  cmake \\\n  curl \\\n  flex \\\n  gcc \\\n  g++ \\\n  iproute2 \\\n  iputils-ping \\\n  language-pack-en \\\n  locales \\\n  libapr1-dev \\\n  libbz2-dev \\\n  libcurl4-gnutls-dev \\\n  libevent-dev \\\n  libkrb5-dev \\\n  libipc-run-perl \\\n  libldap2-dev \\\n  libpam0g-dev \\\n  libprotobuf-dev \\\n  libreadline-dev \\\n  libssl-dev \\\n  libuv1-dev \\\n  liblz4-dev \\\n  libxerces-c-dev \\\n  libxml2-dev \\\n  libyaml-dev \\\n  libzstd-dev \\\n  libperl-dev \\\n  make \\\n  pkg-config \\\n  protobuf-compiler \\\n  python3-dev \\\n  python3-pip \\\n  python3-setuptools \\\n  rsync\n"})})]})]})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},85162:(e,n,l)=>{l.d(n,{Z:()=>s});l(67294);var r=l(90512);const t={tabItem:"tabItem_Ymn6"};var a=l(85893);function s(e){let{children:n,hidden:l,className:s}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.Z)(t.tabItem,s),hidden:l,children:n})}},74866:(e,n,l)=>{l.d(n,{Z:()=>j});var r=l(67294),t=l(90512),a=l(12466),s=l(16550),i=l(20469),o=l(91980),c=l(67392),d=l(50012);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:l}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:l,attributes:r,default:t}}=e;return{value:n,label:l,attributes:r,default:t}}))}(l);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,l])}function h(e){let{value:n,tabValues:l}=e;return l.some((e=>e.value===n))}function b(e){let{queryString:n=!1,groupId:l}=e;const t=(0,s.k6)(),a=function(e){let{queryString:n=!1,groupId:l}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!l)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return l??null}({queryString:n,groupId:l});return[(0,o._X)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})}),[a,t])]}function m(e){const{defaultValue:n,queryString:l=!1,groupId:t}=e,a=p(e),[s,o]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:l}=e;if(0===l.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:l}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${l.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=l.find((e=>e.default))??l[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a}))),[c,u]=b({queryString:l,groupId:t}),[m,f]=function(e){let{groupId:n}=e;const l=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,a]=(0,d.Nk)(l);return[t,(0,r.useCallback)((e=>{l&&a.set(e)}),[l,a])]}({groupId:t}),v=(()=>{const e=c??m;return h({value:e,tabValues:a})?e:null})();(0,i.Z)((()=>{v&&o(v)}),[v]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),f(e)}),[u,f,a]),tabValues:a}}var f=l(72389);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=l(85893);function g(e){let{className:n,block:l,selectedValue:r,selectValue:s,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.o5)(),d=e=>{const n=e.currentTarget,l=o.indexOf(n),t=i[l].value;t!==r&&(c(n),s(t))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const l=o.indexOf(e.currentTarget)+1;n=o[l]??o[0];break}case"ArrowLeft":{const l=o.indexOf(e.currentTarget)-1;n=o[l]??o[o.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.Z)("tabs",{"tabs--block":l},n),children:i.map((e=>{let{value:n,label:l,attributes:a}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>o.push(e),onKeyDown:u,onClick:d,...a,className:(0,t.Z)("tabs__item",v.tabItem,a?.className,{"tabs__item--active":r===n}),children:l??n},n)}))})}function y(e){let{lazy:n,children:l,selectedValue:t}=e;const a=(Array.isArray(l)?l:[l]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===t));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function E(e){const n=m(e);return(0,x.jsxs)("div",{className:(0,t.Z)("tabs-container",v.tabList),children:[(0,x.jsx)(g,{...e,...n}),(0,x.jsx)(y,{...e,...n})]})}function j(e){const n=(0,f.Z)();return(0,x.jsx)(E,{...e,children:u(e.children)},String(n))}},11151:(e,n,l)=>{l.d(n,{Z:()=>i,a:()=>s});var r=l(67294);const t={},a=r.createContext(t);function s(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);