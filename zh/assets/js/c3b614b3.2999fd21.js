"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[32028],{41410:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>d,toc:()=>l});var i=n(85893),s=n(11151);const o={title:"Post installation"},a=void 0,d={id:"deployment/post-installation",title:"Post installation",description:"Validate basic functionalities",source:"@site/docs/deployment/post-installation.md",sourceDirName:"deployment",slug:"/deployment/post-installation",permalink:"/zh/docs/next/deployment/post-installation",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/docs/deployment/post-installation.md",tags:[],version:"current",lastUpdatedBy:"TomShawn",lastUpdatedAt:1750137774,formattedLastUpdatedAt:"2025\u5e746\u670817\u65e5",frontMatter:{title:"Post installation"},sidebar:"docsbars",previous:{title:"Set up a Cloudberry demo cluster",permalink:"/zh/docs/next/deployment/set-demo-cluster"},next:{title:"Build with Docker Dev Image",permalink:"/zh/docs/next/deployment/build-based-on-docker"}},r={},l=[{value:"Validate basic functionalities",id:"validate-basic-functionalities",level:2},{value:"1. Test results",id:"1-test-results",level:3},{value:"2. Troubleshoot test failures",id:"2-troubleshoot-test-failures",level:3}];function c(e){const t={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"validate-basic-functionalities",children:"Validate basic functionalities"}),"\n",(0,i.jsx)(t.p,{children:"Run the installcheck test suite to verify basic functionality. It is recommended to test with both Orca (the query optimizer) enabled and disabled:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# Run tests with Orca optimizer enabled\nPGOPTIONS='-c optimizer=on' make --directory=~/cloudberry installcheck\n\n# Run tests with Orca optimizer disabled\nPGOPTIONS='-c optimizer=off' make --directory=~/cloudberry installcheck\n"})}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.p,{children:["Even though Orca is the default Cloudberry optimizer, you must explicitly set ",(0,i.jsx)(t.code,{children:"optimizer=on"})," when running installcheck. Without this setting, the ",(0,i.jsx)(t.code,{children:"explain"})," test will fail due to missing the explicit configuration option."]})}),"\n",(0,i.jsx)(t.h3,{id:"1-test-results",children:"1. Test results"}),"\n",(0,i.jsx)(t.p,{children:"The installcheck target provides a basic test of functionality. During execution, you'll see output like this:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"test tablespace                   ... ok         3236 ms (diff   76 ms)\nparallel group (20 tests):  pg_lsn oid txid name char varchar int2 regproc text ...\n     boolean                      ... ok          862 ms (diff   56 ms)\n     char                         ... ok          419 ms (diff   87 ms)\n     explain                      ... FAILED      310 ms (diff  139 ms)\n"})}),"\n",(0,i.jsx)(t.p,{children:"At the end, you'll see a summary, for example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"========================\n 1 of 658 tests failed. \n========================\n"})}),"\n",(0,i.jsx)(t.p,{children:"If any tests fail:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"regression.diffs"}),": Shows differences between actual and expected results"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"regression.out"}),": Contains the complete test execution output"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["The files will be located in ",(0,i.jsx)(t.code,{children:"/home/gpadmin/cloudberry/src/test/regress/"}),"."]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"installcheck is just one of several test schedules available. This guide focuses on basic development environment setup and validation."})}),"\n",(0,i.jsx)(t.h3,{id:"2-troubleshoot-test-failures",children:"2. Troubleshoot test failures"}),"\n",(0,i.jsx)(t.p,{children:"If a test fails, you might need to examine the log files from various cluster components. You can locate the data directories containing these logs by querying the segment configuration:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"psql -P pager=off template1 -c 'SELECT * from gp_segment_configuration'\n"})}),"\n",(0,i.jsxs)(t.p,{children:["This shows the complete cluster configuration. The ",(0,i.jsx)(t.code,{children:"content = -1"})," identifies coordinator nodes:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:" dbid | content | role | preferred_role | mode | status | port | hostname | address |                                  datadir                                   | warehouseid \n------+---------+------+----------------+------+--------+------+----------+---------+----------------------------------------------------------------------------+-------------\n    1 |      -1 | p    | p              | n    | u      | 7000 | cdw      | cdw     | /home/gpadmin/cloudberry/gpAux/gpdemo/datadirs/qddir/demoDataDir-1         |           0\n    8 |      -1 | m    | m              | s    | u      | 7001 | cdw      | cdw     | /home/gpadmin/cloudberry/gpAux/gpdemo/datadirs/standby                     |           0\n    2 |       0 | p    | p              | s    | u      | 7002 | cdw      | cdw     | /home/gpadmin/cloudberry/gpAux/gpdemo/datadirs/dbfast1/demoDataDir0        |           0\n    5 |       0 | m    | m              | s    | u      | 7005 | cdw      | cdw     | /home/gpadmin/cloudberry/gpAux/gpdemo/datadirs/dbfast_mirror1/demoDataDir0 |           0\n    3 |       1 | p    | p              | s    | u      | 7003 | cdw      | cdw     | /home/gpadmin/cloudberry/gpAux/gpdemo/datadirs/dbfast2/demoDataDir1        |           0\n    6 |       1 | m    | m              | s    | u      | 7006 | cdw      | cdw     | /home/gpadmin/cloudberry/gpAux/gpdemo/datadirs/dbfast_mirror2/demoDataDir1 |           0\n    4 |       2 | p    | p              | s    | u      | 7004 | cdw      | cdw     | /home/gpadmin/cloudberry/gpAux/gpdemo/datadirs/dbfast3/demoDataDir2        |           0\n    7 |       2 | m    | m              | s    | u      | 7007 | cdw      | cdw     | /home/gpadmin/cloudberry/gpAux/gpdemo/datadirs/dbfast_mirror3/demoDataDir2 |           0\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Each ",(0,i.jsx)(t.code,{children:"datadir"})," contains log files that can help diagnose test failures. Review the logs in the relevant component's directory based on which test failed."]})]})}function u(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>d,a:()=>a});var i=n(67294);const s={},o=i.createContext(s);function a(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);