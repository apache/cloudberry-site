"use strict";(self.webpackChunkApache_Cloudberry_Incubating_website=self.webpackChunkApache_Cloudberry_Incubating_website||[]).push([[96434],{5979:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>x,frontMatter:()=>t,metadata:()=>r,toc:()=>o});var l=s(85893),i=s(11151);const t={title:"\u52a0\u5bc6\u6570\u636e\u4e0e\u6570\u636e\u5e93\u8fde\u63a5"},d="\u52a0\u5bc6\u6570\u636e\u4e0e\u6570\u636e\u5e93\u8fde\u63a5",r={id:"security/encrypt-data-and-db-connections",title:"\u52a0\u5bc6\u6570\u636e\u4e0e\u6570\u636e\u5e93\u8fde\u63a5",description:"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5bf9\u6570\u636e\u5e93\u4e2d\u7684\u9759\u6001\u6570\u636e\u6216\u7f51\u7edc\u4e2d\u4f20\u8f93\u7684\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u4ee5\u9632\u6b62\u88ab\u7a83\u542c\u6216\u906d\u53d7\u4e2d\u95f4\u4eba\u653b\u51fb\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.x/security/encrypt-data-and-db-connections.md",sourceDirName:"security",slug:"/security/encrypt-data-and-db-connections",permalink:"/zh/docs/security/encrypt-data-and-db-connections",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/cloudberry-site/edit/main/i18n/zh/docusaurus-plugin-content-docs/version-2.x/security/encrypt-data-and-db-connections.md",tags:[],version:"2.x",lastUpdatedBy:"Dianjin Wang",lastUpdatedAt:1754381087,formattedLastUpdatedAt:"2025\u5e748\u67085\u65e5",frontMatter:{title:"\u52a0\u5bc6\u6570\u636e\u4e0e\u6570\u636e\u5e93\u8fde\u63a5"},sidebar:"docsbars",previous:{title:"\u914d\u7f6e\u6570\u636e\u5e93\u6388\u6743",permalink:"/zh/docs/security/configure-db-auth"},next:{title:"\u900f\u660e\u6570\u636e\u52a0\u5bc6",permalink:"/zh/docs/security/transparent-data-encryption"}},c={},o=[{value:"\u52a0\u5bc6 gpfdist \u8fde\u63a5",id:"\u52a0\u5bc6-gpfdist-\u8fde\u63a5",level:2},{value:"\u4f7f\u7528 pgcrypto \u52a0\u5bc6\u9759\u6001\u6570\u636e",id:"\u4f7f\u7528-pgcrypto-\u52a0\u5bc6\u9759\u6001\u6570\u636e",level:2},{value:"\u521b\u5efa PGP \u5bc6\u94a5",id:"\u521b\u5efa-pgp-\u5bc6\u94a5",level:3},{value:"\u4f7f\u7528 PGP \u52a0\u5bc6\u8868\u4e2d\u6570\u636e",id:"\u4f7f\u7528-pgp-\u52a0\u5bc6\u8868\u4e2d\u6570\u636e",level:3},{value:"\u5bc6\u94a5\u7ba1\u7406",id:"\u5bc6\u94a5\u7ba1\u7406",level:3},{value:"\u4f7f\u7528 TDE \u52a0\u5bc6\u6570\u636e",id:"\u4f7f\u7528-tde-\u52a0\u5bc6\u6570\u636e",level:2}];function h(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h1,{id:"\u52a0\u5bc6\u6570\u636e\u4e0e\u6570\u636e\u5e93\u8fde\u63a5",children:"\u52a0\u5bc6\u6570\u636e\u4e0e\u6570\u636e\u5e93\u8fde\u63a5"}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u5bf9\u6570\u636e\u5e93\u4e2d\u7684\u9759\u6001\u6570\u636e\u6216\u7f51\u7edc\u4e2d\u4f20\u8f93\u7684\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u4ee5\u9632\u6b62\u88ab\u7a83\u542c\u6216\u906d\u53d7\u4e2d\u95f4\u4eba\u653b\u51fb\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u5ba2\u6237\u7aef\u4e0e Coordinator \u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u53ef\u4ee5\u901a\u8fc7 SSL \u52a0\u5bc6\u3002\u8be5\u529f\u80fd\u7531\u670d\u52a1\u5668\u914d\u7f6e\u53c2\u6570 ",(0,l.jsx)(e.code,{children:"ssl"})," \u63a7\u5236\uff0c\u9ed8\u8ba4\u503c\u4e3a ",(0,l.jsx)(e.code,{children:"off"}),"\u3002\u5c06 ",(0,l.jsx)(e.code,{children:"ssl"})," \u8bbe\u7f6e\u4e3a ",(0,l.jsx)(e.code,{children:"on"})," \u540e\uff0c\u5ba2\u6237\u7aef\u4e0e Coordinator \u4e4b\u95f4\u7684\u901a\u4fe1\u5c06\u542f\u7528\u52a0\u5bc6\u3002\u9700\u8981\u63d0\u524d\u4e3a Coordinator \u914d\u7f6e SSL\uff0c\u5177\u4f53\u53c2\u8003 ",(0,l.jsx)(e.a,{href:"/zh/docs/security/client-auth#openssl-configuration",children:"OpenSSL \u914d\u7f6e"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["Apache Cloudberry \u652f\u6301\u5728 ",(0,l.jsx)(e.code,{children:"gpfdist"}),"\uff08Cloudberry \u5e76\u884c\u6587\u4ef6\u5206\u53d1\u670d\u52a1\uff09\u4e0e\u5404 Segment \u8282\u70b9\u4e4b\u95f4\u7684\u7f51\u7edc\u4f20\u8f93\u4e2d\u4f7f\u7528 SSL \u52a0\u5bc6\u3002\u53c2\u89c1",(0,l.jsx)(e.a,{href:"#encrypt-gpfdist-connections",children:"\u52a0\u5bc6 gpfdist \u8fde\u63a5"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u53ef\u4ee5\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"pgcrypto"})," \u6a21\u5757\u5bf9\u6570\u636e\u5e93\u4e2d\u9759\u6001\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\u6216\u89e3\u5bc6\u3002\u5217\u7ea7\u52a0\u5bc6\u53ef\u4ee5\u4fdd\u62a4\u5982\u793e\u4f1a\u4fdd\u969c\u53f7\u3001\u4fe1\u7528\u5361\u53f7\u7b49\u654f\u611f\u4fe1\u606f\u3002\u53c2\u89c1",(0,l.jsx)(e.a,{href:"#%E4%BD%BF%E7%94%A8-pgcrypto-%E5%8A%A0%E5%AF%86%E9%9D%99%E6%80%81%E6%95%B0%E6%8D%AE",children:"\u4f7f\u7528 pgcrypto \u52a0\u5bc6\u9759\u6001\u6570\u636e"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u52a0\u5bc6-gpfdist-\u8fde\u63a5",children:"\u52a0\u5bc6 gpfdist \u8fde\u63a5"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"gpfdists"})," \u662f ",(0,l.jsx)(e.code,{children:"gpfdist"})," \u534f\u8bae\u7684\u5b89\u5168\u7248\u672c\uff0c\u53ef\u5b9e\u73b0\u6587\u4ef6\u670d\u52a1\u5668\u4e0e Apache Cloudberry \u4e4b\u95f4\u7684\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5e76\u5bf9\u53cc\u65b9\u901a\u4fe1\u8fdb\u884c\u52a0\u5bc6\u3002\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"gpfdists"})," \u53ef\u4ee5\u9632\u6b62\u6570\u636e\u88ab\u7a83\u542c\u6216\u906d\u9047\u4e2d\u95f4\u4eba\u653b\u51fb\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"gpfdists"})," \u534f\u8bae\u4f7f\u7528\u5ba2\u6237\u7aef/\u670d\u52a1\u7aef SSL \u5b89\u5168\u673a\u5236\uff0c\u5177\u5907\u4ee5\u4e0b\u5173\u952e\u7279\u6027\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8981\u6c42\u5ba2\u6237\u7aef\u8bc1\u4e66\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u4e0d\u652f\u6301\u591a\u8bed\u8a00\u8bc1\u4e66\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u4e0d\u652f\u6301\u8bc1\u4e66\u540a\u9500\u5217\u8868\uff08CRL\uff09\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u8981\u6c42\u6700\u4f4e TLS \u7248\u672c\u4e3a 1.2\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301 SSL \u4f1a\u8bdd\u91cd\u534f\u5546\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u4e0d\u5141\u8bb8\u4e3b\u673a\u540d\u6821\u9a8c\u5ffd\u7565\uff08\u5373\u5fc5\u987b\u5339\u914d\uff09\uff1b"}),"\n",(0,l.jsxs)(e.li,{children:["\u4e0d\u652f\u6301\u4f7f\u7528\u5e26\u53e3\u4ee4\u7684\u79c1\u94a5\uff0c\u9002\u7528\u4e8e ",(0,l.jsx)(e.code,{children:"gpfdist"})," \u670d\u52a1\u5668\uff08server.key\uff09\u53ca Apache Cloudberry \u5ba2\u6237\u7aef\uff08client.key\uff09\uff1b"]}),"\n",(0,l.jsxs)(e.li,{children:["\u7528\u6237\u9700\u81ea\u884c\u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u7b7e\u53d1\u9002\u914d\u7684\u8bc1\u4e66\u3002\u901a\u5e38\u53ef\u4f7f\u7528 SSL \u8f6c\u6362\u5de5\u5177\uff08\u5982 ",(0,l.jsx)(e.a,{href:"http://www.commoncriteriaportal.org/products/?expand#ALL",children:"https://www.sslshopper.com/ssl-converter.html"}),"\uff09\u8fdb\u884c\u683c\u5f0f\u8f6c\u6362\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5982\u679c\u4ee5 ",(0,l.jsx)(e.code,{children:"--ssl"})," \u53c2\u6570\u542f\u52a8 ",(0,l.jsx)(e.code,{children:"gpfdist"})," \u670d\u52a1\u5668\uff0c\u5219\u53ea\u80fd\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"gpfdists"})," \u534f\u8bae\u8fdb\u884c\u901a\u4fe1\uff1b\u82e5\u4e0d\u52a0 ",(0,l.jsx)(e.code,{children:"--ssl"})," \u53c2\u6570\uff0c\u5219\u53ea\u80fd\u4f7f\u7528\u666e\u901a\u7684 ",(0,l.jsx)(e.code,{children:"gpfdist"})," \u534f\u8bae\u3002\u6709\u5173 ",(0,l.jsx)(e.code,{children:"gpfdist"})," \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53c2\u89c1 ",(0,l.jsx)(e.a,{href:"/zh/docs/data-loading/load-data-using-gpfdist",children:(0,l.jsx)(e.code,{children:"gpfdist"})}),"\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u542f\u7528 ",(0,l.jsx)(e.code,{children:"gpfdists"})," \u534f\u8bae\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"--ssl"})," \u53c2\u6570\u542f\u52a8 ",(0,l.jsx)(e.code,{children:"gpfdist"}),"\uff0c\u5e76\u5728 ",(0,l.jsx)(e.code,{children:"CREATE EXTERNAL TABLE"})," \u8bed\u53e5\u4e2d\u7684 ",(0,l.jsx)(e.code,{children:"LOCATION"})," \u5b50\u53e5\u4e2d\u6307\u5b9a\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"gpfdists"})," \u534f\u8bae\uff1b"]}),"\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528\u5e26\u6709 ",(0,l.jsx)(e.code,{children:"ssl: true"})," \u8bbe\u7f6e\u7684 YAML \u63a7\u5236\u6587\u4ef6\u8fd0\u884c ",(0,l.jsx)(e.code,{children:"gpload"}),"\uff0c\u6b64\u65f6 ",(0,l.jsx)(e.code,{children:"gpload"})," \u4f1a\u81ea\u52a8\u4ee5 ",(0,l.jsx)(e.code,{children:"--ssl"})," \u53c2\u6570\u542f\u52a8 ",(0,l.jsx)(e.code,{children:"gpfdist"}),"\uff0c\u5e76\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"gpfdists"})," \u534f\u8bae\u52a0\u8f7d\u6570\u636e\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"gpfdists"})," \u65f6\uff0c\u6bcf\u4e2a Segment \u8282\u70b9\u7684 ",(0,l.jsx)(e.code,{children:"$PGDATA/gpfdists"})," \u76ee\u5f55\u4e2d\u5fc5\u987b\u5305\u542b\u4ee5\u4e0b\u5ba2\u6237\u7aef\u8bc1\u4e66\u6587\u4ef6\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u5ba2\u6237\u7aef\u8bc1\u4e66\u6587\u4ef6\uff1a",(0,l.jsx)(e.code,{children:"client.crt"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u5ba2\u6237\u7aef\u79c1\u94a5\u6587\u4ef6\uff1a",(0,l.jsx)(e.code,{children:"client.key"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u53d7\u4fe1\u4efb\u7684\u6839\u8bc1\u4e66\u5217\u8868\uff1a",(0,l.jsx)(e.code,{children:"root.crt"})]}),"\n"]}),"\n",(0,l.jsx)(e.admonition,{title:"\u5c0f\u5fc3",type:"caution",children:(0,l.jsx)(e.p,{children:"\u4e0d\u8981\u4e3a\u79c1\u94a5\u6587\u4ef6\u8bbe\u7f6e\u53e3\u4ee4\u3002\u670d\u52a1\u5668\u4e0d\u4f1a\u63d0\u793a\u8f93\u5165\u53e3\u4ee4\uff0c\u5982\u679c\u79c1\u94a5\u88ab\u52a0\u5bc6\uff0c\u6570\u636e\u52a0\u8f7d\u8fc7\u7a0b\u4f1a\u5931\u8d25\u5e76\u62a5\u9519\u3002"})}),"\n",(0,l.jsxs)(e.p,{children:["\u5f53\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"gpload"})," \u5e76\u542f\u7528 SSL \u65f6\uff0c\u4f60\u9700\u8981\u5728 YAML \u63a7\u5236\u6587\u4ef6\u4e2d\u6307\u5b9a\u670d\u52a1\u5668\u8bc1\u4e66\u7684\u4f4d\u7f6e\u3002\u82e5\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"gpfdist"})," \u542f\u7528 SSL\uff0c\u5219\u901a\u8fc7 ",(0,l.jsx)(e.code,{children:"--ssl"})," \u53c2\u6570\u6307\u5b9a\u670d\u52a1\u5668\u8bc1\u4e66\u8def\u5f84\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u4e0b\u9762\u662f\u4e00\u4e2a\u901a\u8fc7 ",(0,l.jsx)(e.code,{children:"gpfdists"})," \u534f\u8bae\u5b89\u5168\u52a0\u8f7d\u5916\u90e8\u6570\u636e\u8868\u7684\u793a\u4f8b\u3002\u8be5\u793a\u4f8b\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3a ",(0,l.jsx)(e.code,{children:"ext_expenses"})," \u7684\u53ef\u8bfb\u5916\u90e8\u8868\uff0c\u8bfb\u53d6\u6240\u6709\u6269\u5c55\u540d\u4e3a ",(0,l.jsx)(e.code,{children:".txt"})," \u7684\u6587\u4ef6\u3002\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"gpfdists"})," \u534f\u8bae\u4f20\u8f93\u6570\u636e\uff0c\u6587\u4ef6\u4ee5\u7ad6\u7ebf\uff08",(0,l.jsx)(e.code,{children:"|"}),"\uff09\u4f5c\u4e3a\u5217\u5206\u9694\u7b26\uff0c\u7a7a\u683c\u4ee3\u8868\u7a7a\u503c\u3002"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u5728\u6240\u6709 Segment \u4e3b\u673a\u4e0a\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"--ssl"})," \u53c2\u6570\u542f\u52a8 ",(0,l.jsx)(e.code,{children:"gpfdist"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u767b\u5f55\u6570\u636e\u5e93\u5e76\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"=# CREATE EXTERNAL TABLE ext_expenses \n   ( name text, date date, amount float4, category text, desc1 text )\nLOCATION ('gpfdists://etlhost-1:8081/*.txt', 'gpfdists://etlhost-2:8082/*.txt')\nFORMAT 'TEXT' ( DELIMITER '|' NULL ' ') ;\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4f7f\u7528-pgcrypto-\u52a0\u5bc6\u9759\u6001\u6570\u636e",children:"\u4f7f\u7528 pgcrypto \u52a0\u5bc6\u9759\u6001\u6570\u636e"}),"\n",(0,l.jsxs)(e.p,{children:["Apache Cloudberry \u63d0\u4f9b\u7684 ",(0,l.jsx)(e.code,{children:"pgcrypto"})," \u6a21\u5757\u652f\u6301\u5728\u6570\u636e\u5e93\u4e2d\u5bf9\u9759\u6001\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\u3002\u7ba1\u7406\u5458\u53ef\u4ee5\u5bf9\u542b\u6709\u654f\u611f\u4fe1\u606f\u7684\u5217\uff08\u5982\u8eab\u4efd\u8bc1\u53f7\u3001\u4fe1\u7528\u5361\u53f7\u7b49\uff09\u8fdb\u884c\u52a0\u5bc6\uff0c\u589e\u52a0\u6570\u636e\u5b89\u5168\u6027\u3002\u52a0\u5bc6\u540e\u7684\u6570\u636e\u53ea\u6709\u62e5\u6709\u5bc6\u94a5\u7684\u7528\u6237\u624d\u80fd\u89e3\u5bc6\u8bfb\u53d6\uff0c\u5373\u4f7f\u8bbf\u95ee\u78c1\u76d8\u4e5f\u65e0\u6cd5\u76f4\u63a5\u83b7\u53d6\u539f\u59cb\u4fe1\u606f\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"pgcrypto"})," \u5728\u5b89\u88c5 Apache Cloudberry \u65f6\u9ed8\u8ba4\u5305\u542b\uff0c\u4f46\u4f60\u5fc5\u987b\u5728\u6bcf\u4e2a\u8981\u4f7f\u7528\u5b83\u7684\u6570\u636e\u5e93\u4e2d\u663e\u5f0f\u542f\u7528\u8be5\u6a21\u5757\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"pgcrypto"})," \u652f\u6301\u4f7f\u7528 PGP \u6a21\u5f0f\u8fdb\u884c\u5bf9\u79f0\u52a0\u5bc6\u548c\u975e\u5bf9\u79f0\u52a0\u5bc6\u3002\u5bf9\u79f0\u52a0\u5bc6\u4f7f\u7528\u540c\u4e00\u4e2a\u5bc6\u94a5\u8fdb\u884c\u52a0\u89e3\u5bc6\uff0c\u901f\u5ea6\u8f83\u5feb\uff0c\u9002\u5408\u5bc6\u94a5\u4ea4\u6362\u65e0\u969c\u788d\u7684\u573a\u666f\u3002\u975e\u5bf9\u79f0\u52a0\u5bc6\u4f7f\u7528\u516c\u94a5\u52a0\u5bc6\u3001\u79c1\u94a5\u89e3\u5bc6\uff0c\u867d\u7136\u66f4\u5b89\u5168\uff0c\u4f46\u901f\u5ea6\u8f83\u6162\uff0c\u4e14\u5bf9\u5bc6\u94a5\u5f3a\u5ea6\u8981\u6c42\u66f4\u9ad8\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"pgcrypto"})," \u9700\u8981\u8003\u8651\u6027\u80fd\u548c\u53ef\u7ef4\u62a4\u6027\u5f00\u9500\u3002\u5efa\u8bae\u4ec5\u5bf9\u786e\u9700\u52a0\u5bc6\u7684\u5b57\u6bb5\u542f\u7528\u52a0\u5bc6\u529f\u80fd\u3002\u6ce8\u610f\uff0c\u52a0\u5bc6\u540e\u7684\u5b57\u6bb5\u65e0\u6cd5\u901a\u8fc7\u7d22\u5f15\u8fdb\u884c\u641c\u7d22\u67e5\u8be2\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u5b9e\u65bd\u6570\u636e\u5e93\u52a0\u5bc6\u524d\uff0c\u5e94\u4e86\u89e3\u4ee5\u4e0b PGP \u9650\u5236\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4e0d\u652f\u6301\u7b7e\u540d\u529f\u80fd\uff0c\u610f\u5473\u7740\u4e0d\u4f1a\u9a8c\u8bc1\u52a0\u5bc6\u5b50\u5bc6\u94a5\u662f\u5426\u5f52\u5c5e\u4e8e Coordinator \u5bc6\u94a5\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u4e0d\u652f\u6301\u5c06\u52a0\u5bc6\u5bc6\u94a5\u4f5c\u4e3a Coordinator \u5bc6\u94a5\uff0c\u4f46\u8fd9\u79cd\u505a\u6cd5\u672c\u5c31\u4e0d\u63a8\u8350\uff0c\u56e0\u6b64\u4e0d\u6784\u6210\u5b9e\u9645\u9650\u5236\uff1b"}),"\n",(0,l.jsxs)(e.li,{children:["\u4e0d\u652f\u6301\u591a\u4e2a\u5b50\u5bc6\u94a5\uff0c\u867d\u7136\u5728\u5e38\u89c4 PGP \u4f7f\u7528\u4e2d\u5f88\u5e38\u89c1\uff0c\u4f46\u4e0d\u5e94\u5728 ",(0,l.jsx)(e.code,{children:"pgcrypto"})," \u4e2d\u4f7f\u7528\u65e5\u5e38\u7684 GPG/PGP \u5bc6\u94a5\uff0c\u5efa\u8bae\u4e3a\u6b64\u4e13\u95e8\u751f\u6210\u65b0\u7684\u5bc6\u94a5\u5bf9\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"Apache Cloudberry \u9ed8\u8ba4\u7f16\u8bd1\u65f6\u542f\u7528\u4e86 zlib\uff0c\u56e0\u6b64 PGP \u52a0\u5bc6\u51fd\u6570\u5728\u52a0\u5bc6\u524d\u53ef\u5bf9\u6570\u636e\u8fdb\u884c\u538b\u7f29\u3002\u5982\u679c\u4f7f\u7528 OpenSSL \u7f16\u8bd1\uff0c\u8fd8\u5c06\u652f\u6301\u66f4\u591a\u52a0\u5bc6\u7b97\u6cd5\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u7531\u4e8e ",(0,l.jsx)(e.code,{children:"pgcrypto"})," \u51fd\u6570\u5728\u6570\u636e\u5e93\u670d\u52a1\u5668\u5185\u90e8\u8fd0\u884c\uff0c\u6570\u636e\u4e0e\u5bc6\u7801\u4f1a\u4ee5\u660e\u6587\u5f62\u5f0f\u5728 ",(0,l.jsx)(e.code,{children:"pgcrypto"})," \u4e0e\u5ba2\u6237\u7aef\u5e94\u7528\u4e4b\u95f4\u4f20\u8f93\u3002\u4e3a\u4e86\u786e\u4fdd\u5b89\u5168\uff0c\u5efa\u8bae\u4f7f\u7528\u672c\u5730\u8fde\u63a5\u6216\u542f\u7528 SSL\uff0c\u5e76\u786e\u4fdd\u7cfb\u7edf\u7ba1\u7406\u5458\u4e0e\u6570\u636e\u5e93\u7ba1\u7406\u5458\u7684\u53ef\u4fe1\u5ea6\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"pgcrypto"})," \u4f1a\u6839\u636e PostgreSQL \u4e3b\u914d\u7f6e\u811a\u672c\u81ea\u52a8\u914d\u7f6e\u81ea\u8eab\u884c\u4e3a\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u542f\u7528\u4e86 ",(0,l.jsx)(e.code,{children:"zlib"})," \u7f16\u8bd1\u9009\u9879\u540e\uff0c",(0,l.jsx)(e.code,{children:"pgcrypto"})," \u53ef\u4ee5\u5728\u52a0\u5bc6\u524d\u538b\u7f29\u6570\u636e\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"pgcrypto"})," \u63d0\u4f9b\u591a\u79cd\u4ece\u57fa\u7840\u5230\u9ad8\u7ea7\u7684\u52a0\u5bc6\u529f\u80fd\u3002\u4e0b\u8868\u5217\u51fa\u4e86\u652f\u6301\u7684\u52a0\u5bc6\u7b97\u6cd5\uff1a"]}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u529f\u80fd\u7c7b\u578b"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u5185\u5efa\u652f\u6301"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"OpenSSL \u652f\u6301"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MD5"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"SHA1"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"SHA224/256/384/512"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u5176\u4ed6\u6458\u8981\u7b97\u6cd5"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u5426"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"Blowfish"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"AES"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"DES/3DES/CAST5"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u5426"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u539f\u59cb\u52a0\u5bc6\uff08Raw Encryption\uff09"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"PGP \u5bf9\u79f0\u5bc6\u94a5\u52a0\u5bc6"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"PGP \u516c\u94a5\u52a0\u5bc6"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u521b\u5efa-pgp-\u5bc6\u94a5",children:"\u521b\u5efa PGP \u5bc6\u94a5"}),"\n",(0,l.jsx)(e.p,{children:"\u5728 Apache Cloudberry \u4e2d\u4f7f\u7528 PGP \u975e\u5bf9\u79f0\u52a0\u5bc6\u524d\uff0c\u5fc5\u987b\u5148\u751f\u6210\u516c\u94a5\u548c\u79c1\u94a5\u5e76\u5b8c\u6210\u5b89\u88c5\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u672c\u8282\u5047\u8bbe\u4f60\u5728 Linux \u7cfb\u7edf\u4e0a\u5b89\u88c5 Apache Cloudberry\uff0c\u5e76\u4f7f\u7528 Gnu Privacy Guard\uff08",(0,l.jsx)(e.code,{children:"gpg"}),"\uff09\u547d\u4ee4\u884c\u5de5\u5177\u3002\u8bf7\u4f7f\u7528\u6700\u65b0\u7248\u7684 GPG \u6765\u521b\u5efa\u5bc6\u94a5\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u7f51\u5740\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u8f7d\u5b89\u88c5 GPG \u5de5\u5177\uff1a",(0,l.jsx)(e.a,{href:"https://www.gnupg.org/download/",children:"https://www.gnupg.org/download/"}),"\u3002\u8be5\u7f51\u7ad9\u63d0\u4f9b\u9002\u7528\u4e8e\u4e3b\u6d41 Linux \u53d1\u884c\u7248\u7684\u5b89\u88c5\u5305\uff0c\u4e5f\u6709\u9002\u7528\u4e8e Windows \u548c macOS \u7684\u5b89\u88c5\u94fe\u63a5\u3002"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4ee5 root \u8eab\u4efd\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u5728\u4ea4\u4e92\u83dc\u5355\u4e2d\u9009\u62e9\u9009\u9879 1\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# gpg --gen-key \ngpg (GnuPG) 2.0.14; Copyright (C) 2009 Free Software Foundation, Inc.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n \ngpg: directory '/root/.gnupg' created\ngpg: new configuration file '/root/.gnupg/gpg.conf' created\ngpg: WARNING: options in '/root/.gnupg/gpg.conf' are not yet active during this run\ngpg: keyring '/root/.gnupg/secring.gpg' created\ngpg: keyring '/root/.gnupg/pubring.gpg' created\nPlease select what kind of key you want:\n (1) RSA and RSA (default)\n (2) DSA and Elgamal\n (3) DSA (sign only)\n (4) RSA (sign only)\nYour selection? **1**\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6839\u636e\u63d0\u793a\u586b\u5199\u4fe1\u606f\uff0c\u6309\u7167\u6307\u5f15\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"RSA keys may be between 1024 and 4096 bits long.\nWhat keysize do you want? (2048) Press enter to accept default key size\nRequested keysize is 2048 bits\nPlease specify how long the key should be valid.\n 0 = key does not expire\n <n> = key expires in n days\n <n>w = key expires in n weeks\n <n>m = key expires in n months\n <n>y = key expires in n years\n Key is valid for? (0) **365**\nKey expires at Wed 13 Jan 2016 10:35:39 AM PST\nIs this correct? (y/N) **y**\n\nGnuPG needs to construct a user ID to identify your key.\n\nReal name: **John Doe**\nEmail address: **jdoe@email.com**\nComment: \nYou selected this USER-ID:\n \"John Doe <jdoe@email.com>\"\n\nChange (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? **O**\nYou need a Passphrase to protect your secret key.\n*(For this demo the passphrase is blank.)*\ncan't connect to '/root/.gnupg/S.gpg-agent': No such file or directory\nYou don't want a passphrase - this is probably a *bad* idea!\nI will do it anyway.  You can change your passphrase at any time,\nusing this program with the option \"--edit-key\".\n\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\ngpg: /root/.gnupg/trustdb.gpg: trustdb created\ngpg: key 2027CC30 marked as ultimately trusted\npublic and secret key created and signed.\n\ngpg:  checking the trustdbgpg: \n      3 marginal(s) needed, 1 complete(s) needed, PGP trust model\ngpg:  depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u\ngpg:  next trustdb check due at 2016-01-13\npub   2048R/2027CC30 2015-01-13 [expires: 2016-01-13]\n      Key fingerprint = 7EDA 6AD0 F5E0 400F 4D45   3259 077D 725E 2027 CC30\nuid                  John Doe <jdoe@email.com>\nsub   2048R/4FD2EFBB 2015-01-13 [expires: 2016-01-13]\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u5df2\u751f\u6210\u7684 PGP \u5bc6\u94a5\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"gpg --list-secret-keys \n/root/.gnupg/secring.gpg\n------------------------\nsec   2048R/2027CC30 2015-01-13 [expires: 2016-01-13]\nuid                  John Doe <jdoe@email.com>\nssb   2048R/4FD2EFBB 2015-01-13\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u793a\u4f8b\u8f93\u51fa\u4e2d\uff0c",(0,l.jsx)(e.code,{children:"2027CC30"})," \u662f\u516c\u94a5 ID\uff0c\u7528\u4e8e\u5728\u6570\u636e\u5e93\u4e2d\u52a0\u5bc6\u6570\u636e\uff1b",(0,l.jsx)(e.code,{children:"4FD2EFBB"})," \u662f\u79c1\u94a5 ID\uff0c\u7528\u4e8e\u89e3\u5bc6\u6570\u636e\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5bfc\u51fa\u5bc6\u94a5\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# gpg -a --export 4FD2EFBB > public.key\n# gpg -a --export-secret-keys 2027CC30 > secret.key\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u66f4\u591a\u6709\u5173 PGP \u52a0\u5bc6\u51fd\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u8003 ",(0,l.jsx)(e.a,{href:"https://www.postgresql.org/docs/14/pgcrypto.html",children:"pgcrypto \u5b98\u65b9\u6587\u6863"}),"\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528-pgp-\u52a0\u5bc6\u8868\u4e2d\u6570\u636e",children:"\u4f7f\u7528 PGP \u52a0\u5bc6\u8868\u4e2d\u6570\u636e"}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u8282\u6f14\u793a\u5982\u4f55\u4f7f\u7528\u4e4b\u524d\u751f\u6210\u7684 PGP \u5bc6\u94a5\u52a0\u5bc6\u63d2\u5165\u8868\u4e2d\u7684\u6570\u636e\u3002"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u8bfb\u53d6 ",(0,l.jsx)(e.code,{children:"public.key"})," \u6587\u4ef6\u5185\u5bb9\uff0c\u5e76\u5c06\u5176\u590d\u5236\u5230\u526a\u8d34\u677f\u4e2d\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# cat public.key\n-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: GnuPG v2.0.14 (GNU/Linux)\n            \nmQENBFS1Zf0BCADNw8Qvk1V1C36Kfcwd3Kpm/dijPfRyyEwB6PqKyA05jtWiXZTh\n2His1ojSP6LI0cSkIqMU9LAlncecZhRIhBhuVgKlGSgd9texg2nnSL9Admqik/yX\nR5syVKG+qcdWuvyZg9oOOmeyjhc3n+kkbRTEMuM3flbMs8shOwzMvstCUVmuHU/V\nvG5rJAe8PuYDSJCJ74I6w7SOH3RiRIc7IfL6xYddV42l3ctd44bl8/i71hq2UyN2\n/Hbsjii2ymg7ttw3jsWAx2gP9nssDgoy8QDy/o9nNqC8EGlig96ZFnFnE6Pwbhn+\nic8MD0lK5/GAlR6Hc0ZIHf8KEcavruQlikjnABEBAAG0HHRlc3Qga2V5IDx0ZXN0\na2V5QGVtYWlsLmNvbT6JAT4EEwECACgFAlS1Zf0CGwMFCQHhM4AGCwkIBwMCBhUI\nAgkKCwQWAgMBAh4BAheAAAoJEAd9cl4gJ8wwbfwH/3VyVsPkQl1owRJNxvXGt1bY\n7BfrvU52yk+PPZYoes9UpdL3CMRk8gAM9bx5Sk08q2UXSZLC6fFOpEW4uWgmGYf8\nJRoC3ooezTkmCBW8I1bU0qGetzVxopdXLuPGCE7hVWQe9HcSntiTLxGov1mJAwO7\nTAoccXLbyuZh9Rf5vLoQdKzcCyOHh5IqXaQOT100TeFeEpb9TIiwcntg3WCSU5P0\nDGoUAOanjDZ3KE8Qp7V74fhG1EZVzHb8FajR62CXSHFKqpBgiNxnTOk45NbXADn4\neTUXPSnwPi46qoAp9UQogsfGyB1XDOTB2UOqhutAMECaM7VtpePv79i0Z/NfnBe5\nAQ0EVLVl/QEIANabFdQ+8QMCADOipM1bF/JrQt3zUoc4BTqICaxdyzAfz0tUSf/7\nZro2us99GlARqLWd8EqJcl/xmfcJiZyUam6ZAzzFXCgnH5Y1sdtMTJZdLp5WeOjw\ngCWG/ZLu4wzxOFFzDkiPv9RDw6e5MNLtJrSp4hS5o2apKdbO4Ex83O4mJYnav/rE\niDDCWU4T0lhv3hSKCpke6LcwsX+7liozp+aNmP0Ypwfi4hR3UUMP70+V1beFqW2J\nbVLz3lLLouHRgpCzla+PzzbEKs16jq77vG9kqZTCIzXoWaLljuitRlfJkO3vQ9hO\nv/8yAnkcAmowZrIBlyFg2KBzhunYmN2YvkUAEQEAAYkBJQQYAQIADwUCVLVl/QIb\nDAUJAeEzgAAKCRAHfXJeICfMMOHYCACFhInZA9uAM3TC44l+MrgMUJ3rW9izrO48\nWrdTsxR8WkSNbIxJoWnYxYuLyPb/shc9k65huw2SSDkj//0fRrI61FPHQNPSvz62\nWH+N2lasoUaoJjb2kQGhLOnFbJuevkyBylRz+hI/+8rJKcZOjQkmmK8Hkk8qb5x/\nHMUc55H0g2qQAY0BpnJHgOOQ45Q6pk3G2/7Dbek5WJ6K1wUrFy51sNlGWE8pvgEx\n/UUZB+dYqCwtvX0nnBu1KNCmk2AkEcFK3YoliCxomdOxhFOv9AKjjojDyC65KJci\nPv2MikPS2fKOAg1R3LpMa8zDEtl4w3vckPQNrQNnYuUtfj6ZoCxv\n=XZ8J\n-----END PGP PUBLIC KEY BLOCK-----\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u521b\u5efa\u540d\u4e3a ",(0,l.jsx)(e.code,{children:"userssn"})," \u7684\u8868\uff0c\u5e76\u63d2\u5165\u5305\u542b\u654f\u611f\u4fe1\u606f\u7684\u6570\u636e\uff08\u4f8b\u5982 Bob \u548c Alice \u7684\u793e\u4f1a\u4fdd\u969c\u53f7\u7801\uff09\u3002\u5c06\u521a\u624d\u590d\u5236\u7684 ",(0,l.jsx)(e.code,{children:"public.key"})," \u5185\u5bb9\u7c98\u8d34\u5728 ",(0,l.jsx)(e.code,{children:"dearmor("})," \u540e\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE userssn( ssn_id SERIAL PRIMARY KEY, \n    username varchar(100), ssn bytea); \n\nINSERT INTO userssn(username, ssn)\nSELECT robotccs.username, pgp_pub_encrypt(robotccs.ssn, keys.pubkey) AS ssn\nFROM ( \n        VALUES ('Alice', '123-45-6788'), ('Bob', '123-45-6799')) \n            AS robotccs(username, ssn)\nCROSS JOIN  (SELECT  dearmor('-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: GnuPG v2.0.14 (GNU/Linux)\n            \nmQENBFS1Zf0BCADNw8Qvk1V1C36Kfcwd3Kpm/dijPfRyyEwB6PqKyA05jtWiXZTh\n2His1ojSP6LI0cSkIqMU9LAlncecZhRIhBhuVgKlGSgd9texg2nnSL9Admqik/yX\nR5syVKG+qcdWuvyZg9oOOmeyjhc3n+kkbRTEMuM3flbMs8shOwzMvstCUVmuHU/V\nvG5rJAe8PuYDSJCJ74I6w7SOH3RiRIc7IfL6xYddV42l3ctd44bl8/i71hq2UyN2\n/Hbsjii2ymg7ttw3jsWAx2gP9nssDgoy8QDy/o9nNqC8EGlig96ZFnFnE6Pwbhn+\nic8MD0lK5/GAlR6Hc0ZIHf8KEcavruQlikjnABEBAAG0HHRlc3Qga2V5IDx0ZXN0\na2V5QGVtYWlsLmNvbT6JAT4EEwECACgFAlS1Zf0CGwMFCQHhM4AGCwkIBwMCBhUI\nAgkKCwQWAgMBAh4BAheAAAoJEAd9cl4gJ8wwbfwH/3VyVsPkQl1owRJNxvXGt1bY\n7BfrvU52yk+PPZYoes9UpdL3CMRk8gAM9bx5Sk08q2UXSZLC6fFOpEW4uWgmGYf8\nJRoC3ooezTkmCBW8I1bU0qGetzVxopdXLuPGCE7hVWQe9HcSntiTLxGov1mJAwO7\nTAoccXLbyuZh9Rf5vLoQdKzcCyOHh5IqXaQOT100TeFeEpb9TIiwcntg3WCSU5P0\nDGoUAOanjDZ3KE8Qp7V74fhG1EZVzHb8FajR62CXSHFKqpBgiNxnTOk45NbXADn4\neTUXPSnwPi46qoAp9UQogsfGyB1XDOTB2UOqhutAMECaM7VtpePv79i0Z/NfnBe5\nAQ0EVLVl/QEIANabFdQ+8QMCADOipM1bF/JrQt3zUoc4BTqICaxdyzAfz0tUSf/7\nZro2us99GlARqLWd8EqJcl/xmfcJiZyUam6ZAzzFXCgnH5Y1sdtMTJZdLp5WeOjw\ngCWG/ZLu4wzxOFFzDkiPv9RDw6e5MNLtJrSp4hS5o2apKdbO4Ex83O4mJYnav/rE\niDDCWU4T0lhv3hSKCpke6LcwsX+7liozp+aNmP0Ypwfi4hR3UUMP70+V1beFqW2J\nbVLz3lLLouHRgpCzla+PzzbEKs16jq77vG9kqZTCIzXoWaLljuitRlfJkO3vQ9hO\nv/8yAnkcAmowZrIBlyFg2KBzhunYmN2YvkUAEQEAAYkBJQQYAQIADwUCVLVl/QIb\nDAUJAeEzgAAKCRAHfXJeICfMMOHYCACFhInZA9uAM3TC44l+MrgMUJ3rW9izrO48\nWrdTsxR8WkSNbIxJoWnYxYuLyPb/shc9k65huw2SSDkj//0fRrI61FPHQNPSvz62\nWH+N2lasoUaoJjb2kQGhLOnFbJuevkyBylRz+hI/+8rJKcZOjQkmmK8Hkk8qb5x/\nHMUc55H0g2qQAY0BpnJHgOOQ45Q6pk3G2/7Dbek5WJ6K1wUrFy51sNlGWE8pvgEx\n/UUZB+dYqCwtvX0nnBu1KNCmk2AkEcFK3YoliCxomdOxhFOv9AKjjojDyC65KJci\nPv2MikPS2fKOAg1R3LpMa8zDEtl4w3vckPQNrQNnYuUtfj6ZoCxv\n=XZ8J\n-----END PGP PUBLIC KEY BLOCK-----' AS pubkey) AS keys;\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u9a8c\u8bc1 ",(0,l.jsx)(e.code,{children:"ssn"})," \u5217\u4e2d\u7684\u6570\u636e\u5df2\u88ab\u52a0\u5bc6\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"test_db=# select * from userssn;\nssn_id   | 1\nusername | Alice\nssn      | \\301\\300L\\003\\235M%_O\\322\\357\\273\\001\\010\\000\\272\\227\\010\\341\\216\\360\\217C\\020\\261)_\\367\n[\\227\\034\\313:C\\354d<\\337\\006Q\\351('\\2330\\031lX\\263Qf\\341\\262\\200\\3015\\235\\036AK\\242fL+\\315g\\322\n7u\\270*\\304\\361\\355\\220\\021\\330\"\\200%\\264\\274}R\\213\\377\\363\\235\\366\\030\\023)\\364!\\331\\303\\237t\\277=\nf \\015\\004\\242\\231\\263\\225%\\032\\271a\\001\\035\\277\\021\\375X\\232\\304\\305/\\340\\334\\0131\\325\\344[~\\362\\0\n37-\\251\\336\\303\\340\\377_\\011\\275\\301/MY\\334\\343\\245\\244\\372y\\257S\\374\\230\\346\\277\\373W\\346\\230\\276\\\n017fi\\226Q\\307\\012\\326\\3646\\000\\326\\005:E\\364W\\252=zz\\010(:\\343Y\\237\\257iqU\\0326\\350=v0\\362\\327\\350\\\n315G^\\027:K_9\\254\\362\\354\\215<\\001\\304\\357\\331\\355\\323,\\302\\213Fe\\265\\315\\232\\367\\254\\245%(\\\\\\373\n4\\254\\230\\331\\356\\006B\\257\\333\\326H\\022\\013\\353\\216F?\\023\\220\\370\\035vH5/\\227\\344b\\322\\227\\026\\362=\\\n42\\033\\322<\\001}\\243\\224;)\\030zqX\\214\\340\\221\\035\\275U\\345\\327\\214\\032\\351\\223c\\2442\\345\\304K\\016\\\n011\\214\\307\\227\\237\\270\\026'R\\205\\205a~1\\263\\236[\\037C\\260\\031\\205\\374\\245\\317\\033k|\\366\\253\\037\n---------+--------------------------------------------------------------------------------------------\n------------------------------------------------------------------------------------------------------\n------------------------------------------------------------------------------------------------------\n------------------------------------------------------------------------------------------------------\n------------------------------------------------------------------------------------------------------\n------------------------------------------------------------------------------------------------------\n------------------------------------------------------------------------------------------------------\n------------------------------------------------------------------------------------------------------\n------------------------------------------------------------------------------------------------------\n------------------------------------------------------------------------------\nssn_id   | 2\nusername | Bob\nssn      | \\301\\300L\\003\\235M%_O\\322\\357\\273\\001\\007\\377t>\\345\\343,\\200\\256\\272\\300\\012\\033M4\\265\\032L\nL[v\\262k\\244\\2435\\264\\232B\\357\\370d9\\375\\011\\002\\327\\235<\\246\\210b\\030\\012\\337@\\226Z\\361\\246\\032\\00\n7'\\012c\\353]\\355d7\\360T\\335\\314\\367\\370;X\\371\\350*\\231\\212\\260B\\010#RQ0\\223\\253c7\\0132b\\355\\242\\233\\34\n1\\000\\370\\370\\366\\013\\022\\357\\005i\\202~\\005\\\\z\\301o\\012\\230Z\\014\\362\\244\\324&\\243g\\351\\362\\325\\375\n\\213\\032\\226$\\2751\\256XR\\346k\\266\\030\\234\\267\\201vUh\\004\\250\\337A\\231\\223u\\247\\366/i\\022\\275\\276\\350\\2\n20\\316\\306|\\203+\\010\\261;\\232\\254tp\\255\\243\\261\\373Rq;\\316w\\357\\006\\207\\374U\\333\\365\\365\\245hg\\031\\005\n\\322\\347ea\\220\\015l\\212g\\337\\264\\336b\\263\\004\\311\\210.4\\340G+\\221\\274D\\035\\375\\2216\\241'\\346a0\\273wE\\2\n12\\342y^\\202\\262|A7\\202t\\240\\333p\\345G\\373\\253\\243oCO\\011\\360\\247\\211\\014\\024{\\272\\271\\322<\\001\\267\n\\347\\240\\005\\213\\0078\\036\\210\\307$\\317\\322\\311\\222\\035\\354\\006<\\266\\264\\004\\376\\251q\\256\\220(+\\030\\\n3270\\013c\\327\\272\\212%\\363\\033\\252\\322\\337\\354\\276\\225\\232\\201\\212^\\304\\210\\2269@\\3230\\370{\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4ece\u6570\u636e\u5e93\u4e2d\u63d0\u53d6\u52a0\u5bc6\u6240\u7528\u7684 PGP \u516c\u94a5 ID\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"SELECT pgp_key_id(dearmor('-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: GnuPG v2.0.14 (GNU/Linux)\n\nmQENBFS1Zf0BCADNw8Qvk1V1C36Kfcwd3Kpm/dijPfRyyEwB6PqKyA05jtWiXZTh\n2His1ojSP6LI0cSkIqMU9LAlncecZhRIhBhuVgKlGSgd9texg2nnSL9Admqik/yX\nR5syVKG+qcdWuvyZg9oOOmeyjhc3n+kkbRTEMuM3flbMs8shOwzMvstCUVmuHU/V\nvG5rJAe8PuYDSJCJ74I6w7SOH3RiRIc7IfL6xYddV42l3ctd44bl8/i71hq2UyN2\n/Hbsjii2ymg7ttw3jsWAx2gP9nssDgoy8QDy/o9nNqC8EGlig96ZFnFnE6Pwbhn+\nic8MD0lK5/GAlR6Hc0ZIHf8KEcavruQlikjnABEBAAG0HHRlc3Qga2V5IDx0ZXN0\na2V5QGVtYWlsLmNvbT6JAT4EEwECACgFAlS1Zf0CGwMFCQHhM4AGCwkIBwMCBhUI\nAgkKCwQWAgMBAh4BAheAAAoJEAd9cl4gJ8wwbfwH/3VyVsPkQl1owRJNxvXGt1bY\n7BfrvU52yk+PPZYoes9UpdL3CMRk8gAM9bx5Sk08q2UXSZLC6fFOpEW4uWgmGYf8\nJRoC3ooezTkmCBW8I1bU0qGetzVxopdXLuPGCE7hVWQe9HcSntiTLxGov1mJAwO7\nTAoccXLbyuZh9Rf5vLoQdKzcCyOHh5IqXaQOT100TeFeEpb9TIiwcntg3WCSU5P0\nDGoUAOanjDZ3KE8Qp7V74fhG1EZVzHb8FajR62CXSHFKqpBgiNxnTOk45NbXADn4\neTUXPSnwPi46qoAp9UQogsfGyB1XDOTB2UOqhutAMECaM7VtpePv79i0Z/NfnBe5\nAQ0EVLVl/QEIANabFdQ+8QMCADOipM1bF/JrQt3zUoc4BTqICaxdyzAfz0tUSf/7\nZro2us99GlARqLWd8EqJcl/xmfcJiZyUam6ZAzzFXCgnH5Y1sdtMTJZdLp5WeOjw\ngCWG/ZLu4wzxOFFzDkiPv9RDw6e5MNLtJrSp4hS5o2apKdbO4Ex83O4mJYnav/rE\niDDCWU4T0lhv3hSKCpke6LcwsX+7liozp+aNmP0Ypwfi4hR3UUMP70+V1beFqW2J\nbVLz3lLLouHRgpCzla+PzzbEKs16jq77vG9kqZTCIzXoWaLljuitRlfJkO3vQ9hO\nv/8yAnkcAmowZrIBlyFg2KBzhunYmN2YvkUAEQEAAYkBJQQYAQIADwUCVLVl/QIb\nDAUJAeEzgAAKCRAHfXJeICfMMOHYCACFhInZA9uAM3TC44l+MrgMUJ3rW9izrO48\nWrdTsxR8WkSNbIxJoWnYxYuLyPb/shc9k65huw2SSDkj//0fRrI61FPHQNPSvz62\nWH+N2lasoUaoJjb2kQGhLOnFbJuevkyBylRz+hI/+8rJKcZOjQkmmK8Hkk8qb5x/\nHMUc55H0g2qQAY0BpnJHgOOQ45Q6pk3G2/7Dbek5WJ6K1wUrFy51sNlGWE8pvgEx\n/UUZB+dYqCwtvX0nnBu1KNCmk2AkEcFK3YoliCxomdOxhFOv9AKjjojDyC65KJci\nPv2MikPS2fKOAg1R3LpMa8zDEtl4w3vckPQNrQNnYuUtfj6ZoCxv\n=XZ8J\n-----END PGP PUBLIC KEY BLOCK-----'));\n\npgp_key_id | 9D4D255F4FD2EFBB\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u8f93\u51fa\u5c06\u663e\u793a\u7528\u4e8e\u52a0\u5bc6 ",(0,l.jsx)(e.code,{children:"ssn"})," \u5217\u7684 PGP \u5bc6\u94a5 ID\uff0c\u4f8b\u5982\uff1a",(0,l.jsx)(e.code,{children:"9D4D255F4FD2EFBB"}),"\u3002\u5efa\u8bae\u6bcf\u6b21\u521b\u5efa\u65b0\u5bc6\u94a5\u540e\u6267\u884c\u6b64\u64cd\u4f5c\uff0c\u5e76\u4fdd\u5b58\u5bc6\u94a5 ID \u4ee5\u4f9b\u540e\u7eed\u8ffd\u8e2a\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u5bc6\u94a5 ID \u6765\u786e\u8ba4\u662f\u54ea\u4e00\u5bf9\u5bc6\u94a5\u52a0\u5bc6\u4e86\u8fd9\u4e9b\u6570\u636e\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"SELECT username, pgp_key_id(ssn) As key_used\nFROM userssn;\nusername | Bob\nkey_used | 9D4D255F4FD2EFBB\n---------+-----------------\nusername | Alice\nkey_used | 9D4D255F4FD2EFBB\n"})}),"\n",(0,l.jsx)(e.admonition,{title:"\u6ce8\u610f",type:"note",children:(0,l.jsxs)(e.p,{children:["\u4e0d\u540c\u7684\u5bc6\u94a5\u53ef\u80fd\u5177\u6709\u76f8\u540c\u7684 ID\u3002\u867d\u7136\u8fd9\u79cd\u60c5\u51b5\u8f83\u5c11\u89c1\uff0c\u4f46\u5c5e\u4e8e\u6b63\u5e38\u73b0\u8c61\u3002\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u5e94\u5c1d\u8bd5\u7528\u6240\u6709\u5bc6\u94a5\u8fdb\u884c\u89e3\u5bc6\uff0c\u4ee5\u627e\u51fa\u5339\u914d\u9879\u2014\u2014\u7c7b\u4f3c\u5904\u7406 ",(0,l.jsx)(e.code,{children:"ANYKEY"}),"\u3002\u8be6\u89c1 pgcrypto \u6587\u6863\u4e2d\u7684 ",(0,l.jsx)(e.a,{href:"https://www.postgresql.org/docs/14/pgcrypto.html",children:(0,l.jsx)(e.code,{children:"pgp_key_id()"})}),"\u3002"]})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u79c1\u94a5\u89e3\u5bc6\u6570\u636e\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"SELECT username, pgp_pub_decrypt(ssn, keys.privkey) \n                 AS decrypted_ssn FROM userssn\n                 CROSS JOIN\n                 (SELECT dearmor('-----BEGIN PGP PRIVATE KEY BLOCK-----\nVersion: GnuPG v2.0.14 (GNU/Linux)\n\n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\n=fa+6\n-----END PGP PRIVATE KEY BLOCK-----') AS privkey) AS keys;\n\nusername | decrypted_ssn \n----------+---------------\n Alice    | 123-45-6788\n Bob      | 123-45-6799\n(2 rows)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u4f60\u5728\u521b\u5efa\u5bc6\u94a5\u65f6\u8bbe\u7f6e\u4e86\u53e3\u4ee4\uff0c\u8fd9\u91cc\u53ef\u80fd\u9700\u8981\u8f93\u5165\u3002\u4e0d\u8fc7\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u53e3\u4ee4\u4e3a\u7a7a\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5bc6\u94a5\u7ba1\u7406",children:"\u5bc6\u94a5\u7ba1\u7406"}),"\n",(0,l.jsx)(e.p,{children:"\u65e0\u8bba\u4f7f\u7528\u5bf9\u79f0\u52a0\u5bc6\uff08\u5355\u4e2a\u79c1\u94a5\uff09\u8fd8\u662f\u975e\u5bf9\u79f0\u52a0\u5bc6\uff08\u516c\u94a5\u548c\u79c1\u94a5\uff09\uff0c\u5b89\u5168\u5b58\u50a8\u534f\u8c03\u8282\u70b9\u6216\u79c1\u94a5\u90fd\u975e\u5e38\u91cd\u8981\u3002\u4f60\u53ef\u4ee5\u9009\u62e9\u591a\u79cd\u65b9\u5f0f\u5b58\u50a8\u52a0\u5bc6\u5bc6\u94a5\uff0c\u4f8b\u5982\u6587\u4ef6\u7cfb\u7edf\u3001\u5bc6\u94a5\u5e93\u3001\u52a0\u5bc6 USB\u3001\u53ef\u4fe1\u5e73\u53f0\u6a21\u5757\uff08TPM\uff09\u6216\u786c\u4ef6\u5b89\u5168\u6a21\u5757\uff08HSM\uff09\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u89c4\u5212\u5bc6\u94a5\u7ba1\u7406\u7b56\u7565\u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u4ee5\u4e0b\u95ee\u9898\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5bc6\u94a5\u5c06\u5b58\u50a8\u5728\u54ea\u91cc\uff1f"}),"\n",(0,l.jsx)(e.li,{children:"\u4f55\u65f6\u8ba9\u5bc6\u94a5\u8fc7\u671f\uff1f"}),"\n",(0,l.jsx)(e.li,{children:"\u5982\u4f55\u4fdd\u62a4\u5bc6\u94a5\uff1f"}),"\n",(0,l.jsx)(e.li,{children:"\u5982\u4f55\u8bbf\u95ee\u5bc6\u94a5\uff1f"}),"\n",(0,l.jsx)(e.li,{children:"\u5982\u4f55\u6062\u590d\u548c\u540a\u9500\u5bc6\u94a5\uff1f"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["OWASP\uff08\u5f00\u653e Web \u5e94\u7528\u5b89\u5168\u9879\u76ee\uff09\u63d0\u4f9b\u4e86\u4e00\u4efd\u975e\u5e38\u5168\u9762\u7684",(0,l.jsx)(e.a,{href:"https://www.owasp.org/index.php/Cryptographic_Storage_Cheat_Sheet",children:"\u52a0\u5bc6\u5bc6\u94a5\u5b89\u5168\u6307\u5357"}),"\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4f7f\u7528-tde-\u52a0\u5bc6\u6570\u636e",children:"\u4f7f\u7528 TDE \u52a0\u5bc6\u6570\u636e"}),"\n",(0,l.jsx)(e.p,{children:"\u4e3a\u6ee1\u8db3\u7528\u6237\u6570\u636e\u5b89\u5168\u4fdd\u62a4\u7684\u8981\u6c42\uff0cApache Cloudberry \u652f\u6301\u900f\u660e\u6570\u636e\u52a0\u5bc6\uff08TDE\uff09\u3002"}),"\n",(0,l.jsx)(e.p,{children:"TDE \u662f\u4e00\u79cd\u7528\u4e8e\u52a0\u5bc6\u6570\u636e\u5e93\u6570\u636e\u6587\u4ef6\u7684\u6280\u672f\uff0c\u5177\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u201c\u6570\u636e\u201d\u6307\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5185\u5bb9\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u6587\u4ef6\u4ee5\u5bc6\u6587\u5f62\u5f0f\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\uff0c\u5728\u5185\u5b58\u4e2d\u4ee5\u660e\u6587\u5f62\u5f0f\u8fdb\u884c\u5904\u7406\u3002TDE \u7528\u4e8e\u4fdd\u62a4\u9759\u6001\u6570\u636e\uff0c\u56e0\u6b64\u4e5f\u79f0\u4e3a\u9759\u6001\u6570\u636e\u52a0\u5bc6\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u201c\u900f\u660e\u201d\u610f\u5473\u7740\u7528\u6237\u65e0\u9700\u66f4\u6539\u4f7f\u7528\u4e60\u60ef\uff0cTDE \u81ea\u52a8\u5904\u7406\u52a0\u89e3\u5bc6\u8fc7\u7a0b\uff0c\u65e0\u9700\u7528\u6237\u6216\u5e94\u7528\u7a0b\u5e8f\u5e72\u9884\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u8be6\u60c5\u8bf7\u53c2\u8003",(0,l.jsx)(e.a,{href:"/zh/docs/security/transparent-data-encryption",children:"\u900f\u660e\u6570\u636e\u52a0\u5bc6"}),"\u3002"]})]})}function x(n={}){const{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}},11151:(n,e,s)=>{s.d(e,{Z:()=>r,a:()=>d});var l=s(67294);const i={},t=l.createContext(i);function d(n){const e=l.useContext(t);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),l.createElement(t.Provider,{value:e},n.children)}}}]);