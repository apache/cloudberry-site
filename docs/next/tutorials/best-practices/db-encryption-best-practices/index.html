<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/best-practices/db-encryption-best-practices" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Encrypt Data and Database Connections | Apache Cloudberry (Incubating)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://cloudberry.apache.org/docs/next/tutorials/best-practices/db-encryption-best-practices"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Encrypt Data and Database Connections | Apache Cloudberry (Incubating)"><meta data-rh="true" name="description" content="Best practices for implementing encryption and managing keys."><meta data-rh="true" property="og:description" content="Best practices for implementing encryption and managing keys."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cloudberry.apache.org/docs/next/tutorials/best-practices/db-encryption-best-practices"><link data-rh="true" rel="alternate" href="https://cloudberry.apache.org/docs/next/tutorials/best-practices/db-encryption-best-practices" hreflang="en"><link data-rh="true" rel="alternate" href="https://cloudberry.apache.org/docs/next/tutorials/best-practices/db-encryption-best-practices" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Cloudberry (Incubating) is one advanced and mature open-source MPP (Massively Parallel Processing) databases available. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Cloudberry (Incubating) is one advanced and mature open-source MPP (Massively Parallel Processing) databases available. Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Apache Cloudberry (Incubating) is one advanced and mature open-source MPP (Massively Parallel Processing) databases available. JSON Feed">




<link rel="preconnect" href="https://analytics.apache.org/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://analytics.apache.org/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","66"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel="stylesheet" href="/assets/css/styles.6426df7d.css">
<script src="/assets/js/runtime~main.fdf700fe.js" defer="defer"></script>
<script src="/assets/js/main.759f761c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="tipsWrap_WWTe"><div class="tipsContent_sMsy"><div class="text_VINd"><a href="https://github.com/apache/cloudberry" target="_blank" rel="noopener noreferrer"><span>If you like Apache Cloudberry (Incubating), give it a star on GitHub! </span><img src="/img/home/hcard/star.svg" alt=""></a></div><div class="close_vVex"><img src="/img/home/hcard/close.svg" alt=""></div></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div class="nav-left-logo"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/apache_cloudberry_color_black.svg" alt="Apache Cloudberry (Incubating)" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/apache_cloudberry_color_white.svg" alt="Apache Cloudberry (Incubating)" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/">2.x (Current)</a></li><li><a class="dropdown__link" href="/docs/1.x">1.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community">Overview</a></li><li><a class="dropdown__link" href="/community/slack">Slack Guide</a></li><li><a class="dropdown__link" href="/community/wechat">WeChat Guide</a></li><li><a class="dropdown__link" href="/community/events">Community Events</a></li><li><a class="dropdown__link" href="/community/mailing-lists">Mailing Lists</a></li><li><a class="dropdown__link" href="/community/brand">Brand Guidelines</a></li><li><a class="dropdown__link" href="/community/security">Security Policy</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contribute">Overview</a></li><li><a class="dropdown__link" href="/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/contribute/git">Working with Git &amp; GitHub</a></li><li><a class="dropdown__link" href="/contribute/code">Code Contribution Guide</a></li><li><a class="dropdown__link" href="/contribute/proposal">Proposal Guide</a></li><li><a class="dropdown__link" href="/contribute/doc">Doc Contribution Guide</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/releases">Download</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Team</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/team">Who we are</a></li><li><a class="dropdown__link" href="/team/new-committers">Inviting New Committers</a></li><li><a class="dropdown__link" href="/team/sign-icla">Sign ICLA</a></li><li><a class="dropdown__link" href="/team/setup-apache-email-account">Setup the Apache account</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Resources</a><ul class="dropdown__menu"><li><a href="https://github.com/apache/cloudberry/wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Wiki</a></li><li><a href="https://github.com/apache/cloudberry/discussions/868" target="_blank" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li><li><a href="https://github.com/apache/cloudberry/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum</a></li><li><a class="dropdown__link" href="/support">Support</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li><li><a href="https://www.apache.org/foundation/policies/conduct" target="_blank" rel="noopener noreferrer" class="dropdown__link">Code of Conduct</a></li></ul></div><div class="toggle_vylO colorModeToggle_x44X check-theme-switch"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_BF9v"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_Rg9N"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/deployment/">Deploy and Build</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/next/data-loading/">Load Data</a><button aria-label="Expand sidebar category &#x27;Load Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/operate-with-data/operate-with-db-objects/create-and-manage-database">Create and Prepare</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/operate-with-data/operate-with-db-objects/create-and-manage-tablespaces">Operate with Data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/performance/define-database-performance">Optimize Performance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/next/security/">Security and Permission</a><button aria-label="Expand sidebar category &#x27;Security and Permission&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/sys-admin/backup-and-restore/">Manage System</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/developer/develop-extensions-using-rust">Developer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/ecosystem/sql-clients/dbeaver">Ecosystem</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/sql-stmts/">References</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/next/tutorials/crash-course">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/crash-course">Apache Cloudberry Crash Course</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/next/tutorials/quick-trial-lessons/">Quick Trial Lessons</a><button aria-label="Expand sidebar category &#x27;Quick Trial Lessons&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/next/tutorials/product-principles/about-mvcc">Product Principles</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/next/tutorials/best-practices/">Best Practices</a><button aria-label="Collapse sidebar category &#x27;Best Practices&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/best-practices/schema-design-best-practices">Schema Design Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/best-practices/load-data-best-practices">Load Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/tutorials/best-practices/db-encryption-best-practices">Encrypt Data and Database Connections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/best-practices/high-availability-best-practices">High Availability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/best-practices/resource-group-best-practices">Memory and Resource Management with Resource Groups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/best-practices/system-configuration-best-practices">System Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/best-practices/system-monitor-and-maintain-best-practices">System Monitoring and Maintenance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/best-practices/manage-bloat">Manage Bloat in a Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/best-practices/identify-and-mitigate-heap-table-performance-issues">Identify and Mitigate Heap Table Performance Issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/best-practices/security-best-practices">Security</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_hjYf"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Apache Cloudberry (Incubating)<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/tutorials/best-practices/db-encryption-best-practices">latest version</a></b> (<!-- -->2.x<!-- -->).</div></div><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link" id="支付">Tutorials</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" style="cursor:pointer">Best Practices</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Encrypt Data and Database Connections</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Encrypt Data and Database Connections</h1>
<p>Best practices for implementing encryption and managing keys.</p>
<p>Encryption can be used to protect data in a Apache Cloudberry system in the following ways:</p>
<ul>
<li>Connections between clients and the coordinator database can be encrypted with SSL. This is enabled by setting the <code>ssl</code> server configuration parameter to <code>on</code> and editing the <code>pg_hba.conf</code> file.</li>
<li>Apache Cloudberry allows SSL encryption of data in transit between the Cloudberry parallel file distribution server, <code>gpfdist</code>, and segment hosts. See <a href="#encrypt-gpfdist-connections">Encrypt gpfdist connections</a> for more information. </li>
<li>Network communications between hosts in the Apache Cloudberry cluster can be encrypted using IPsec. An authenticated, encrypted VPN is established between every pair of hosts in the cluster. Check your operating system documentation for IPsec support, or consider a third-party solution such as that provided by <a href="https://www.zettaset.com" target="_blank" rel="noopener noreferrer">Zettaset</a>.</li>
<li>The <code>pgcrypto</code> module of encryption/decryption functions protects data at rest in the database. Encryption at the column level protects sensitive information, such as passwords, Social Security numbers, or credit card numbers. See <a href="#encrypt-data-in-tables-using-pgp">Encrypt data in tables using PGP</a> for an example.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices">Best practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best practices" title="Direct link to Best practices">​</a></h2>
<ul>
<li>Encryption ensures that data can be seen only by users who have the key required to decrypt the data.</li>
<li>Encrypting and decrypting data has a performance cost; only encrypt data that requires encryption.</li>
<li>Do performance testing before implementing any encryption solution in a production system.</li>
<li>Server certificates in a production Apache Cloudberry system should be signed by a certificate authority (CA) so that clients can authenticate the server. The CA may be local if all clients are local to the organization.</li>
<li>Client connections to Apache Cloudberry should use SSL encryption whenever the connection goes through an insecure link.</li>
<li>A symmetric encryption scheme, where the same key is used to both encrypt and decrypt, has better performance than an asymmetric scheme and should be used when the key can be shared safely.</li>
<li>Use functions from the pgcrypto module to encrypt data on disk. The data is encrypted and decrypted in the database process, so it is important to secure the client connection with SSL to avoid transmitting unencrypted data.</li>
<li>Use the gpfdists protocol to secure ETL data as it is loaded into or unloaded from the database. See <a href="#encrypt-gpfdist-connections">Encrypt gpfdist connections</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-management">Key management<a href="#key-management" class="hash-link" aria-label="Direct link to Key management" title="Direct link to Key management">​</a></h2>
<p>Whether you are using symmetric (single private key) or asymmetric (public and private key) cryptography, it is important to store the coordinator or private key securely. There are many options for storing encryption keys, for example, on a file system, key vault, encrypted USB, trusted platform module (TPM), or hardware security module (HSM).</p>
<p>Consider the following questions when planning for key management:</p>
<ul>
<li>Where will the keys be stored?</li>
<li>When should keys expire?</li>
<li>How are keys protected?</li>
<li>How are keys accessed?</li>
<li>How can keys be recovered and revoked?</li>
</ul>
<p>The Open Web Application Security Project (OWASP) provides a very comprehensive <a href="https://www.owasp.org/index.php/Cryptographic_Storage_Cheat_Sheet" target="_blank" rel="noopener noreferrer">guide to securing encryption keys</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="encrypt-data-at-rest-with-pgcrypto">Encrypt data at rest with pgcrypto<a href="#encrypt-data-at-rest-with-pgcrypto" class="hash-link" aria-label="Direct link to Encrypt data at rest with pgcrypto" title="Direct link to Encrypt data at rest with pgcrypto">​</a></h2>
<p>The pgcrypto module for Apache Cloudberry provides functions for encrypting data at rest in the database. Administrators can encrypt columns with sensitive information, such as social security numbers or credit card numbers, to provide an extra layer of protection. Database data stored in encrypted form cannot be read by users who do not have the encryption key, and the data cannot be read directly from disk.</p>
<p>pgcrypto is installed by default when you install Apache Cloudberry. You must explicitly enable pgcrypto in each database in which you want to use the module.</p>
<p>pgcrypto allows PGP encryption using symmetric and asymmetric encryption. Symmetric encryption encrypts and decrypts data using the same key and is faster than asymmetric encryption. It is the preferred method in an environment where exchanging secret keys is not an issue. With asymmetric encryption, a public key is used to encrypt data and a private key is used to decrypt data. This is slower then symmetric encryption and it requires a stronger key.</p>
<p>Using pgcrypto always comes at the cost of performance and maintainability. It is important to use encryption only with the data that requires it. Also, keep in mind that you cannot search encrypted data by indexing the data.</p>
<p>Before you implement in-database encryption, consider the following PGP limitations.</p>
<ul>
<li>No support for signing. That also means that it is not checked whether the encryption sub-key belongs to the coordinator key.</li>
<li>No support for encryption key as coordinator key. This practice is generally discouraged, so this limitation should not be a problem.</li>
<li>No support for several subkeys. This may seem like a problem, as this is common practice. On the other hand, you should not use your regular GPG/PGP keys with pgcrypto, but create new ones, as the usage scenario is rather different.</li>
</ul>
<p>Apache Cloudberry is compiled with zlib by default; this allows PGP encryption functions to compress data before encrypting. When compiled with OpenSSL, more algorithms will be available.</p>
<p>Because pgcrypto functions run inside the database server, the data and passwords move between pgcrypto and the client application in clear-text. For optimal security, you should connect locally or use SSL connections and you should trust both the system and database administrators.</p>
<p>pgcrypto configures itself according to the findings of the main PostgreSQL configure script.</p>
<p>When compiled with <code>zlib</code>, pgcrypto encryption functions are able to compress data before encrypting.</p>
<p>Pgcrypto has various levels of encryption ranging from basic to advanced built-in functions. The following table shows the supported encryption algorithms.</p>
<table><thead><tr><th style="text-align:left">Value Functionality</th><th style="text-align:left">Built-in</th><th style="text-align:left">With OpenSSL</th></tr></thead><tbody><tr><td style="text-align:left">MD5</td><td style="text-align:left">yes</td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left">SHA1</td><td style="text-align:left">yes</td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left">SHA224/256/384/512</td><td style="text-align:left">yes</td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left">Other digest algorithms</td><td style="text-align:left">no</td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left">Blowfish</td><td style="text-align:left">yes</td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left">AES</td><td style="text-align:left">yes</td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left">DES/3DES/CAST5</td><td style="text-align:left">no</td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left">Raw Encryption</td><td style="text-align:left">yes</td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left">PGP Symmetric-Key</td><td style="text-align:left">yes</td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left">PGP Public Key</td><td style="text-align:left">yes</td><td style="text-align:left">yes</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-pgp-keys">Create PGP keys<a href="#create-pgp-keys" class="hash-link" aria-label="Direct link to Create PGP keys" title="Direct link to Create PGP keys">​</a></h2>
<p>To use PGP asymmetric encryption in Apache Cloudberry, you must first create public and private keys and install them.</p>
<p>This section assumes you are installing Apache Cloudberry on a Linux machine with the Gnu Privacy Guard (<code>gpg</code>) command line tool. It is recommended to use the latest version of GPG to create keys. Download and install Gnu Privacy Guard (GPG) for your operating system from <a href="https://www.gnupg.org/download/" target="_blank" rel="noopener noreferrer">https://www.gnupg.org/download/</a>. On the GnuPG website you will find installers for popular Linux distributions and links for Windows and Mac OS X installers.</p>
<ol>
<li>
<p>As root, run the following command and choose option 1 from the menu:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain"># gpg --gen-key </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg (GnuPG) 2.0.14; Copyright (C) 2009 Free Software Foundation, Inc.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">This is free software: you are free to change and redistribute it.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">There is NO WARRANTY, to the extent permitted by law.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg: directory `/root/.gnupg&#x27; created</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg: new configuration file `/root/.gnupg/gpg.conf&#x27; created</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg: WARNING: options in `/root/.gnupg/gpg.conf&#x27; are not yet active during this run</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg: keyring `/root/.gnupg/secring.gpg&#x27; created</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg: keyring `/root/.gnupg/pubring.gpg&#x27; created</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Please select what kind of key you want:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> (1) RSA and RSA (default)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> (2) DSA and Elgamal</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> (3) DSA (sign only)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> (4) RSA (sign only)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Your selection? 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Respond to the prompts and follow the instructions, as shown in this example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">RSA keys may be between 1024 and 4096 bits long.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">What keysize do you want? (2048) Press enter to accept default key size</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Requested keysize is 2048 bits</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Please specify how long the key should be valid.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> 0 = key does not expire</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &lt;n&gt; = key expires in n days</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &lt;n&gt;w = key expires in n weeks</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &lt;n&gt;m = key expires in n months</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &lt;n&gt;y = key expires in n years</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> Key is valid for? (0) 365</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Key expires at Wed 13 Jan 2016 10:35:39 AM PST</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Is this correct? (y/N) y</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">GnuPG needs to construct a user ID to identify your key.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Real name: John Doe</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Email address: jdoe@email.com</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Comment: </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You selected this USER-ID:</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> &quot;John Doe &lt;jdoe@email.com&gt;&quot;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You need a Passphrase to protect your secret key.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">(For this demo the passphrase is blank.)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">can&#x27;t connect to `/root/.gnupg/S.gpg-agent&#x27;: No such file or directory</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">You don&#x27;t want a passphrase - this is probably a *bad* idea!</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">I will do it anyway.  You can change your passphrase at any time,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">using this program with the option &quot;--edit-key&quot;.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">We need to generate a lot of random bytes. It is a good idea to perform</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">some other action (type on the keyboard, move the mouse, utilize the</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">disks) during the prime generation; this gives the random number</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">generator a better chance to gain enough entropy.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">We need to generate a lot of random bytes. It is a good idea to perform</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">some other action (type on the keyboard, move the mouse, utilize the</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">disks) during the prime generation; this gives the random number</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">generator a better chance to gain enough entropy.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg: /root/.gnupg/trustdb.gpg: trustdb created</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg: key 2027CC30 marked as ultimately trusted</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">public and secret key created and signed.</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg:  checking the trustdbgpg: </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      3 marginal(s) needed, 1 complete(s) needed, PGP trust model</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg:  depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg:  next trustdb check due at 2016-01-13</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">pub   2048R/2027CC30 2015-01-13 [expires: 2016-01-13]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      Key fingerprint = 7EDA 6AD0 F5E0 400F 4D45   3259 077D 725E 2027 CC30</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">uid                  John Doe &lt;jdoe@email.com&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">sub   2048R/4FD2EFBB 2015-01-13 [expires: 2016-01-13]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>List the PGP keys by entering the following command:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gpg --list-secret-keys </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">/root/.gnupg/secring.gpg</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">sec   2048R/2027CC30 2015-01-13 [expires: 2016-01-13]</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">uid                  John Doe &lt;jdoe@email.com&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ssb   2048R/4FD2EFBB 2015-01-13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2027CC30 is the public key and will be used to <em>encrypt</em> data in the database. 4FD2EFBB is the private (secret) key and will be used to <em>decrypt</em> data.</p>
</li>
<li>
<p>Export the keys using the following commands:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain"># gpg -a --export 4FD2EFBB &gt; public.key</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"># gpg -a --export-secret-keys 2027CC30 &gt; secret.key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>See the <a href="https://www.postgresql.org/docs/14/pgcrypto.html" target="_blank" rel="noopener noreferrer">pgcrypto</a> documentation for more information about PGP encryption functions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="encrypt-data-in-tables-using-pgp">Encrypt data in tables using PGP<a href="#encrypt-data-in-tables-using-pgp" class="hash-link" aria-label="Direct link to Encrypt data in tables using PGP" title="Direct link to Encrypt data in tables using PGP">​</a></h2>
<p>This section shows how to encrypt data inserted into a column using the PGP keys you generated.</p>
<ol>
<li>
<p>Dump the contents of the <code>public.key</code> file and then copy it to the clipboard:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain"># cat public.key</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">-----BEGIN PGP PUBLIC KEY BLOCK-----</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Version: GnuPG v2.0.14 (GNU/Linux)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">mQENBFS1Zf0BCADNw8Qvk1V1C36Kfcwd3Kpm/dijPfRyyEwB6PqKyA05jtWiXZTh</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">2His1ojSP6LI0cSkIqMU9LAlncecZhRIhBhuVgKlGSgd9texg2nnSL9Admqik/yX</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">R5syVKG+qcdWuvyZg9oOOmeyjhc3n+kkbRTEMuM3flbMs8shOwzMvstCUVmuHU/V</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">. . .</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">WH+N2lasoUaoJjb2kQGhLOnFbJuevkyBylRz+hI/+8rJKcZOjQkmmK8Hkk8qb5x/</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">HMUc55H0g2qQAY0BpnJHgOOQ45Q6pk3G2/7Dbek5WJ6K1wUrFy51sNlGWE8pvgEx</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">/UUZB+dYqCwtvX0nnBu1KNCmk2AkEcFK3YoliCxomdOxhFOv9AKjjojDyC65KJci</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">Pv2MikPS2fKOAg1R3LpMa8zDEtl4w3vckPQNrQNnYuUtfj6ZoCxv</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">=XZ8J</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">-----END PGP PUBLIC KEY BLOCK-----</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Enable the <code>pgcrypto</code> extension:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">CREATE</span><span class="token plain"> EXTENSION pgcrypto</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a table called <code>userssn</code> and insert some sensitive data, social security numbers for Bob and Alice, in this example. Paste the public.key contents after &quot;dearmor(&quot;.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">TABLE</span><span class="token plain"> userssn</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"> ssn_id </span><span class="token keyword" style="color:#66d9ef">SERIAL</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">KEY</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    username </span><span class="token keyword" style="color:#66d9ef">varchar</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">100</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> ssn bytea</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">INTO</span><span class="token plain"> userssn</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">username</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> ssn</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> robotccs</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">username</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> pgp_pub_encrypt</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">robotccs</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">ssn</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">keys</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">pubkey</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">AS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ssn</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;Alice&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;123-45-6788&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;Bob&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;123-45-6799&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">AS</span><span class="token plain"> robotccs</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">username</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> ssn</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">CROSS</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">JOIN</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> dearmor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;-----BEGIN PGP PUBLIC KEY BLOCK-----</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">Version: GnuPG v2.0.22 (GNU/Linux)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">mQENBGCb7NQBCADfCoMFIbjb6dup8eJHgTpo8TILiIubqhqASHqUPe/v3eI+p9W8</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">mZbTZo+EUFCJmFZx8RWw0s0t4DG3fzBQOv5y2oBEu9sg3ofgFkK6TaQV7ueZfifx</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">S1DxQE8kWEFrGsB13VJlLMMLPr4tdjtaYOdn5b+3N4/8GOJALn2CeWrP8lIXaget</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">. . .</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">T9dl2HhMOatlVhBUOcYrqSBEWgwtQbX36hFzhp1tNCDOvtDpsfLNHJr8vIpXAeyz</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">juW0/vEgrAtSK8P2/kmRsmNM/LJIbCBHD+tTSTHZ194+QYUc1KYXW4NV5LLW08MY</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">skETyovyVDFYEpTMVrRKJYLROhEBv8cqYgKq1XtcIH8eiwJIZ0L1L/1Cw7Z/BpRT</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">WbrwmhXTpqi+/Vdm7q9gPFoAfw/ur44hJGsc13bQxdmluTigSN2f+qf9RzA=</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">=xdQf</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">-----END PGP PUBLIC KEY BLOCK-----&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">as</span><span class="token plain"> pubkey</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">keys</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Verify that the <code>ssn</code> column is encrypted.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">test_db</span><span class="token operator" style="color:#66d9ef">=</span><span class="token comment" style="color:#8292a2;font-style:italic"># select * from userssn;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ssn_id   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">username </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Alice</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">ssn      </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> \</span><span class="token number" style="color:#ae81ff">301</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">300</span><span class="token plain">L\</span><span class="token number" style="color:#ae81ff">003</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">235</span><span class="token plain">M</span><span class="token operator" style="color:#66d9ef">%</span><span class="token plain">_O\</span><span class="token number" style="color:#ae81ff">322</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">357</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">273</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">001</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">010</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">000</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">272</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">227</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">010</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">341</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">216</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">360</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">217</span><span class="token plain">C\</span><span class="token number" style="color:#ae81ff">020</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">261</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain">_\</span><span class="token number" style="color:#ae81ff">367</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">227</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">034</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">313</span><span class="token plain">:C\</span><span class="token number" style="color:#ae81ff">354</span><span class="token plain">d</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">337</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">006</span><span class="token plain">Q\</span><span class="token number" style="color:#ae81ff">351</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">&#x27;\</span><span class="token number" style="color:#ae81ff">2330</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">031</span><span class="token plain">lX\</span><span class="token number" style="color:#ae81ff">263</span><span class="token plain">Qf\</span><span class="token number" style="color:#ae81ff">341</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">262</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">200</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">3015</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">235</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">036</span><span class="token plain">AK\</span><span class="token number" style="color:#ae81ff">242</span><span class="token plain">fL</span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">315</span><span class="token plain">g\</span><span class="token number" style="color:#ae81ff">322</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">7</span><span class="token plain">u\</span><span class="token number" style="color:#ae81ff">270</span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">304</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">361</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">355</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">220</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">021</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">330</span><span class="token plain">&quot;\</span><span class="token number" style="color:#ae81ff">200</span><span class="token operator" style="color:#66d9ef">%</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">264</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">274</span><span class="token plain">}R\</span><span class="token number" style="color:#ae81ff">213</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">377</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">363</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">235</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">366</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">030</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">023</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">364</span><span class="token operator" style="color:#66d9ef">!</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">331</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">303</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">237</span><span class="token plain">t\</span><span class="token number" style="color:#ae81ff">277</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">f \</span><span class="token number" style="color:#ae81ff">015</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">004</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">242</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">231</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">263</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">225</span><span class="token operator" style="color:#66d9ef">%</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">032</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">271</span><span class="token plain">a\</span><span class="token number" style="color:#ae81ff">001</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">035</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">277</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">021</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">375</span><span class="token plain">X\</span><span class="token number" style="color:#ae81ff">232</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">304</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">305</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">340</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">334</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">0131</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">325</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">344</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token operator" style="color:#66d9ef">~</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">362</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">37</span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">251</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">336</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">303</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">340</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">377</span><span class="token plain">_\</span><span class="token number" style="color:#ae81ff">011</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">275</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">301</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">MY\</span><span class="token number" style="color:#ae81ff">334</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">343</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">245</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">244</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">372</span><span class="token plain">y\</span><span class="token number" style="color:#ae81ff">257</span><span class="token plain">S\</span><span class="token number" style="color:#ae81ff">374</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">230</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">346</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">277</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">373</span><span class="token plain">W\</span><span class="token number" style="color:#ae81ff">346</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">230</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">276</span><span class="token plain">\</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">017</span><span class="token plain">fi\</span><span class="token number" style="color:#ae81ff">226</span><span class="token plain">Q\</span><span class="token number" style="color:#ae81ff">307</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">012</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">326</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">3646</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">000</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">326</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">005</span><span class="token plain">:E\</span><span class="token number" style="color:#ae81ff">364</span><span class="token plain">W\</span><span class="token number" style="color:#ae81ff">252</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">zz\</span><span class="token number" style="color:#ae81ff">010</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">:\</span><span class="token number" style="color:#ae81ff">343</span><span class="token plain">Y\</span><span class="token number" style="color:#ae81ff">237</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">257</span><span class="token plain">iqU\</span><span class="token number" style="color:#ae81ff">0326</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">350</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">v0\</span><span class="token number" style="color:#ae81ff">362</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">327</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">350</span><span class="token plain">\</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">315</span><span class="token plain">G</span><span class="token operator" style="color:#66d9ef">^</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">027</span><span class="token plain">:K_9\</span><span class="token number" style="color:#ae81ff">254</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">362</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">354</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">215</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">001</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">304</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">357</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">331</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">355</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">323</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">302</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">213</span><span class="token plain">Fe\</span><span class="token number" style="color:#ae81ff">265</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">315</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">232</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">367</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">254</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">245</span><span class="token operator" style="color:#66d9ef">%</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">\\\</span><span class="token number" style="color:#ae81ff">373</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">4</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">254</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">230</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">331</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">356</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">006</span><span class="token plain">B\</span><span class="token number" style="color:#ae81ff">257</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">333</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">326</span><span class="token plain">H\</span><span class="token number" style="color:#ae81ff">022</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">013</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">353</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">216</span><span class="token plain">F?\</span><span class="token number" style="color:#ae81ff">023</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">220</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">370</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">035</span><span class="token plain">vH5</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">227</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">344</span><span class="token plain">b\</span><span class="token number" style="color:#ae81ff">322</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">227</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">026</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">362</span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain">\</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">42</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">033</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">322</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">001</span><span class="token plain">}\</span><span class="token number" style="color:#ae81ff">243</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">224</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">030</span><span class="token plain">zqX\</span><span class="token number" style="color:#ae81ff">214</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">340</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">221</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">035</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">275</span><span class="token plain">U\</span><span class="token number" style="color:#ae81ff">345</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">327</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">214</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">032</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">351</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">223</span><span class="token plain">c\</span><span class="token number" style="color:#ae81ff">2442</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">345</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">304</span><span class="token plain">K\</span><span class="token number" style="color:#ae81ff">016</span><span class="token plain">\</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">011</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">214</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">307</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">227</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">237</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">270</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">026</span><span class="token identifier punctuation" style="color:#f8f8f2">`</span><span class="token identifier">R\205\205a~1\263\236[\037C\260\031\205\374\245\317\033k|\366\253\037</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">---------+--------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">ssn_id   | 2</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">username | Bob</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">ssn      | \301\300L\003\235M%_O\322\357\273\001\007\377t&gt;\345\343,\200\256\272\300\012\033M4\265\032L</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">L[v\262k\244\2435\264\232B\357\370d9\375\011\002\327\235&lt;\246\210b\030\012\337@\226Z\361\246\032\00</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token identifier">7</span><span class="token identifier punctuation" style="color:#f8f8f2">`</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">012</span><span class="token plain">c\</span><span class="token number" style="color:#ae81ff">353</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">355</span><span class="token plain">d7\</span><span class="token number" style="color:#ae81ff">360</span><span class="token plain">T\</span><span class="token number" style="color:#ae81ff">335</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">314</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">367</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">370</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">X\</span><span class="token number" style="color:#ae81ff">371</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">350</span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">231</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">212</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">260</span><span class="token plain">B\</span><span class="token number" style="color:#ae81ff">010</span><span class="token comment" style="color:#8292a2;font-style:italic">#RQ0\223\253c7\0132b\355\242\233\34</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">1</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">000</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">370</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">370</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">366</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">013</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">022</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">357</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">005</span><span class="token plain">i\</span><span class="token number" style="color:#ae81ff">202</span><span class="token operator" style="color:#66d9ef">~</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">005</span><span class="token plain">\\z\</span><span class="token number" style="color:#ae81ff">301</span><span class="token plain">o\</span><span class="token number" style="color:#ae81ff">012</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">230</span><span class="token plain">Z\</span><span class="token number" style="color:#ae81ff">014</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">362</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">244</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">324</span><span class="token operator" style="color:#66d9ef">&amp;</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">243</span><span class="token plain">g\</span><span class="token number" style="color:#ae81ff">351</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">362</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">325</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">375</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">\</span><span class="token number" style="color:#ae81ff">213</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">032</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">226</span><span class="token plain">$\</span><span class="token number" style="color:#ae81ff">2751</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">256</span><span class="token plain">XR\</span><span class="token number" style="color:#ae81ff">346</span><span class="token plain">k\</span><span class="token number" style="color:#ae81ff">266</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">030</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">234</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">267</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">201</span><span class="token plain">vUh\</span><span class="token number" style="color:#ae81ff">004</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">250</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">337</span><span class="token plain">A\</span><span class="token number" style="color:#ae81ff">231</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">223</span><span class="token plain">u\</span><span class="token number" style="color:#ae81ff">247</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">366</span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain">i\</span><span class="token number" style="color:#ae81ff">022</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">275</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">276</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">350</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">20</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">316</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">306</span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">203</span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">010</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">261</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">232</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">254</span><span class="token plain">tp\</span><span class="token number" style="color:#ae81ff">255</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">243</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">261</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">373</span><span class="token plain">Rq</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">316</span><span class="token plain">w\</span><span class="token number" style="color:#ae81ff">357</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">006</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">207</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">374</span><span class="token plain">U\</span><span class="token number" style="color:#ae81ff">333</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">365</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">365</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">245</span><span class="token plain">hg\</span><span class="token number" style="color:#ae81ff">031</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">005</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">\</span><span class="token number" style="color:#ae81ff">322</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">347</span><span class="token plain">ea\</span><span class="token number" style="color:#ae81ff">220</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">015</span><span class="token plain">l\</span><span class="token number" style="color:#ae81ff">212</span><span class="token plain">g\</span><span class="token number" style="color:#ae81ff">337</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">264</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">336</span><span class="token plain">b\</span><span class="token number" style="color:#ae81ff">263</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">004</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">311</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">210.4</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">340</span><span class="token plain">G</span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">221</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">274</span><span class="token plain">D\</span><span class="token number" style="color:#ae81ff">035</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">375</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">2216</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">241</span><span class="token punctuation" style="color:#f8f8f2">`</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">346</span><span class="token plain">a0\</span><span class="token number" style="color:#ae81ff">273</span><span class="token plain">wE\</span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">12</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">342</span><span class="token plain">y</span><span class="token operator" style="color:#66d9ef">^</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">202</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">262</span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">A7\</span><span class="token number" style="color:#ae81ff">202</span><span class="token plain">t\</span><span class="token number" style="color:#ae81ff">240</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">333</span><span class="token plain">p\</span><span class="token number" style="color:#ae81ff">345</span><span class="token plain">G\</span><span class="token number" style="color:#ae81ff">373</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">253</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">243</span><span class="token plain">oCO\</span><span class="token number" style="color:#ae81ff">011</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">360</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">247</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">211</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">014</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">024</span><span class="token plain">{\</span><span class="token number" style="color:#ae81ff">272</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">271</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">322</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">001</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">267</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">\</span><span class="token number" style="color:#ae81ff">347</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">240</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">005</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">213</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">0078</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">036</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">210</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">307</span><span class="token plain">$\</span><span class="token number" style="color:#ae81ff">317</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">322</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">311</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">222</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">035</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">354</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">006</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">266</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">264</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">004</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">376</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">251</span><span class="token plain">q\</span><span class="token number" style="color:#ae81ff">256</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">220</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">030</span><span class="token plain">\</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token number" style="color:#ae81ff">3270</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">013</span><span class="token plain">c\</span><span class="token number" style="color:#ae81ff">327</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">272</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">212</span><span class="token operator" style="color:#66d9ef">%</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">363</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">033</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">252</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">322</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">337</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">354</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">276</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">225</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">232</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">201</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">212</span><span class="token operator" style="color:#66d9ef">^</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">304</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">210</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">2269</span><span class="token plain">@\</span><span class="token number" style="color:#ae81ff">3230</span><span class="token plain">\</span><span class="token number" style="color:#ae81ff">370</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Extract the public.key ID from the database:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> pgp_key_id</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">dearmor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;-----BEGIN PGP PUBLIC KEY BLOCK-----</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">Version: GnuPG v2.0.14 (GNU/Linux)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">mQENBFS1Zf0BCADNw8Qvk1V1C36Kfcwd3Kpm/dijPfRyyEwB6PqKyA05jtWiXZTh</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">2His1ojSP6LI0cSkIqMU9LAlncecZhRIhBhuVgKlGSgd9texg2nnSL9Admqik/yX</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">R5syVKG+qcdWuvyZg9oOOmeyjhc3n+kkbRTEMuM3flbMs8shOwzMvstCUVmuHU/V</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">. . .</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">WH+N2lasoUaoJjb2kQGhLOnFbJuevkyBylRz+hI/+8rJKcZOjQkmmK8Hkk8qb5x/</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">HMUc55H0g2qQAY0BpnJHgOOQ45Q6pk3G2/7Dbek5WJ6K1wUrFy51sNlGWE8pvgEx</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">/UUZB+dYqCwtvX0nnBu1KNCmk2AkEcFK3YoliCxomdOxhFOv9AKjjojDyC65KJci</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">Pv2MikPS2fKOAg1R3LpMa8zDEtl4w3vckPQNrQNnYuUtfj6ZoCxv</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">=XZ8J</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">-----END PGP PUBLIC KEY BLOCK-----&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">pgp_key_id </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">9</span><span class="token plain">D4D255F4FD2EFBB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This shows that the PGP key ID used to encrypt the <code>ssn</code> column is 9D4D255F4FD2EFBB. It is recommended to perform this step whenever a new key is created and then store the ID for tracking.</p>
<p>You can use this key to see which key pair was used to encrypt the data:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> username</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> pgp_key_id</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ssn</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">As</span><span class="token plain"> key_used                                                                                                                       </span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> userssn</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain">                                                                                                                                                                 username </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Bob</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">key_used </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">9</span><span class="token plain">D4D255F4FD2EFBB</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">---------+-----------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">username </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Alice</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">key_used </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">9</span><span class="token plain">D4D255F4FD2EFBB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Note</strong> Different keys may have the same ID. This is rare, but is a normal event. The client application should try to decrypt with each one to see which fits — like handling <code>ANYKEY</code>. See <a href="https://www.postgresql.org/docs/14/pgcrypto.html" target="_blank" rel="noopener noreferrer">pgp_key_id()</a> in the pgcrypto documentation.</p>
</blockquote>
</li>
<li>
<p>Decrypt the data using the private key.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> username</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> pgp_pub_decrypt</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">ssn</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">keys</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">privkey</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 </span><span class="token keyword" style="color:#66d9ef">AS</span><span class="token plain"> decrypted_ssn </span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> userssn</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 </span><span class="token keyword" style="color:#66d9ef">CROSS</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">JOIN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> dearmor</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;-----BEGIN PGP PRIVATE KEY BLOCK-----</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">Version: GnuPG v2.0.14 (GNU/Linux)</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">lQOYBFS1Zf0BCADNw8Qvk1V1C36Kfcwd3Kpm/dijPfRyyEwB6PqKyA05jtWiXZTh</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">2His1ojSP6LI0cSkIqMU9LAlncecZhRIhBhuVgKlGSgd9texg2nnSL9Admqik/yX</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">R5syVKG+qcdWuvyZg9oOOmeyjhc3n+kkbRTEMuM3flbMs8shOwzMvstCUVmuHU/V</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">. . .</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">QNPSvz62WH+N2lasoUaoJjb2kQGhLOnFbJuevkyBylRz+hI/+8rJKcZOjQkmmK8H</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">kk8qb5x/HMUc55H0g2qQAY0BpnJHgOOQ45Q6pk3G2/7Dbek5WJ6K1wUrFy51sNlG</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">WE8pvgEx/UUZB+dYqCwtvX0nnBu1KNCmk2AkEcFK3YoliCxomdOxhFOv9AKjjojD</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">yC65KJciPv2MikPS2fKOAg1R3LpMa8zDEtl4w3vckPQNrQNnYuUtfj6ZoCxv</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">=fa+6</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token string" style="color:#a6e22e">-----END PGP PRIVATE KEY BLOCK-----&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">AS</span><span class="token plain"> privkey</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">AS</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">keys</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">username </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> decrypted_ssn </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">----------+---------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> Alice    </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">123</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">45</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">6788</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> Bob      </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">123</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">45</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">6799</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you created a key with passphrase, you may have to enter it here. However for the purpose of this example, the passphrase is blank.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="encrypt-gpfdist-connections">Encrypt gpfdist connections<a href="#encrypt-gpfdist-connections" class="hash-link" aria-label="Direct link to Encrypt gpfdist connections" title="Direct link to Encrypt gpfdist connections">​</a></h2>
<p>The <code>gpfdists</code> protocol is a secure version of the <code>gpfdist</code> protocol that securely identifies the file server and the Apache Cloudberry and encrypts the communications between them. Using <code>gpfdists</code> protects against eavesdropping and man-in-the-middle attacks.</p>
<p>The <code>gpfdists</code> protocol implements client/server SSL security with the following notable features:</p>
<ul>
<li>Client certificates are required.</li>
<li>Multilingual certificates are not supported.</li>
<li>A Certificate Revocation List (CRL) is not supported.</li>
<li>The TLSv1 protocol is used with the <code>TLS_RSA_WITH_AES_128_CBC_SHA</code> encryption algorithm. These SSL parameters cannot be changed.</li>
<li>SSL renegotiation is supported.</li>
<li>The SSL ignore host mismatch parameter is set to false.</li>
<li>Private keys containing a passphrase are not supported for the <code>gpfdist</code> file server (server.key) or for the Apache Cloudberry (client.key).</li>
<li>It is the user&#x27;s responsibility to issue certificates that are appropriate for the operating system in use. Generally, converting certificates to the required format is supported, for example using the SSL Converter at <a href="http://www.commoncriteriaportal.org/products/?expand#ALL" target="_blank" rel="noopener noreferrer">https://www.sslshopper.com/ssl-converter.html</a>.</li>
</ul>
<p>A <code>gpfdist</code> server started with the <code>--ssl</code> option can only communicate with the <code>gpfdists</code> protocol. A <code>gpfdist</code> server started without the <code>--ssl</code> option can only communicate with the <code>gpfdist</code> protocol.</p>
<p>There are two ways to enable the <code>gpfdists</code> protocol:</p>
<ul>
<li>Run <code>gpfdist</code> with the <code>--ssl</code> option and then use the <code>gpfdists</code> protocol in the <code>LOCATION</code> clause of a <code>CREATE EXTERNAL TABLE</code> statement.</li>
<li>Use a YAML control file with the SSL option set to true and run <code>gpload</code>. Running <code>gpload</code> starts the <code>gpfdist</code> server with the <code>--ssl</code> option and then uses the <code>gpfdists</code> protocol.</li>
</ul>
<p>When using gpfdists, the following client certificates must be located in the <code>$PGDATA/gpfdists</code> directory on each segment:</p>
<ul>
<li>The client certificate file, <code>client.crt</code></li>
<li>The client private key file, <code>client.key</code></li>
<li>The trusted certificate authorities, <code>root.crt</code></li>
</ul>
<blockquote>
<p><strong>Important</strong> Do not protect the private key with a passphrase. The server does not prompt for a passphrase for the private key, and loading data fails with an error if one is required.</p>
</blockquote>
<p>When using <code>gpload</code> with SSL you specify the location of the server certificates in the YAML control file. When using <code>gpfdist</code> with SSL, you specify the location of the server certificates with the --ssl option.</p>
<p>The following example shows how to securely load data into an external table. The example creates a readable external table named <code>ext_expenses</code> from all files with the <code>txt</code> extension, using the <code>gpfdists</code> protocol. The files are formatted with a pipe (<code>|</code>) as the column delimiter and an empty space as null.</p>
<ol>
<li>
<p>Run <code>gpfdist</code> with the <code>--ssl</code> option on the segment hosts.</p>
</li>
<li>
<p>Log into the database and run the following command:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token operator" style="color:#66d9ef">=</span><span class="token comment" style="color:#8292a2;font-style:italic"># CREATE EXTERNAL TABLE ext_expenses </span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">   </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"> name </span><span class="token keyword" style="color:#66d9ef">text</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> amount float4</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> category </span><span class="token keyword" style="color:#66d9ef">text</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> desc1 </span><span class="token keyword" style="color:#66d9ef">text</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">LOCATION </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&#x27;gpfdists://etlhost-1:8081/*.txt&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;gpfdists://etlhost-2:8082/*.txt&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">FORMAT </span><span class="token string" style="color:#a6e22e">&#x27;TEXT&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">DELIMITER</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;|&#x27;</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">NULL</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27; &#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/cloudberry-site/edit/main/docs/tutorials/best-practices/db-encryption-best-practices.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_VsjB"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-09-25T02:34:27.000Z">Sep 25, 2025</time></b> by <b>Dianjin Wang</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/tutorials/best-practices/load-data-best-practices"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label single-line-overflow hide-before-after">Load Data</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/tutorials/best-practices/high-availability-best-practices"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label single-line-overflow hide-before-after">High Availability</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best practices</a></li><li><a href="#key-management" class="table-of-contents__link toc-highlight">Key management</a></li><li><a href="#encrypt-data-at-rest-with-pgcrypto" class="table-of-contents__link toc-highlight">Encrypt data at rest with pgcrypto</a></li><li><a href="#create-pgp-keys" class="table-of-contents__link toc-highlight">Create PGP keys</a></li><li><a href="#encrypt-data-in-tables-using-pgp" class="table-of-contents__link toc-highlight">Encrypt data in tables using PGP</a></li><li><a href="#encrypt-gpfdist-connections" class="table-of-contents__link toc-highlight">Encrypt gpfdist connections</a></li></ul></div></div></div></div></main></div></div></div><div class="wrap_QlFE"><div class="mainWrap_IbWk"><div class="linksWrap_Zcc4"><div><div class="footerLinkTitle_PxTg">Support</div><div class="footerLinkItem_Kf4k"><a href="https://github.com/apache/cloudberry/issues" target="_blank" rel="noopener noreferrer">GitHub Issues</a></div><div class="footerLinkItem_Kf4k"><a href="https://github.com/apache/cloudberry/discussions" target="_blank" rel="noopener noreferrer">GitHub Discussions</a></div><div class="footerLinkItem_Kf4k"><a href="https://inviter.co/apache-cloudberry" target="_blank" rel="noopener noreferrer">Slack</a></div><div class="footerLinkItem_Kf4k"><a href="https://x.com/ASFCloudberry" target="_blank" rel="noopener noreferrer">Twitter</a></div><div class="footerLinkItem_Kf4k"><a href="https://youtube.com/@ApacheCloudberry" target="_blank" rel="noopener noreferrer">Youtube</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/community/security">Security</a></div></div><div><div class="footerLinkTitle_PxTg">Resources</div><div class="footerLinkItem_Kf4k"><a href="/releases" target="_blank">Download</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/docs/">Documentation</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/community/events">Events</a></div><div class="footerLinkItem_Kf4k"><a href="/community/brand" target="_blank">Brand Guidelines</a></div></div><div><div class="footerLinkTitle_PxTg">Contribution</div><div class="footerLinkItem_Kf4k"><a target="_self" href="/contribute/git">Working with Git &amp; GitHub</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/contribute/how-to-contribute">Contribution Overview</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/contribute/code">Code Contribution</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/contribute/doc">Doc Contribution</a></div></div></div><div class="logoLinkWrap_MDp5"><div class="logoWrap_qcVI"><img class="logo_cphB" src="/img/apache-incubator.svg" alt=""></div><div class="links_yA93"><svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M15.002 0c-8.288 0-15 6.713-15 15 0 6.637 4.293 12.244 10.256 14.231.75.131 1.031-.319 1.031-.712 0-.356-.019-1.538-.019-2.794-3.769.694-4.744-.919-5.044-1.763-.168-.43-.9-1.762-1.537-2.118-.525-.282-1.275-.975-.019-.994 1.181-.019 2.025 1.087 2.306 1.537 1.35 2.27 3.507 1.632 4.37 1.238.13-.975.524-1.631.956-2.006-3.338-.375-6.826-1.669-6.826-7.406 0-1.632.582-2.982 1.538-4.032-.15-.375-.675-1.912.15-3.975 0 0 1.256-.394 4.125 1.538 1.2-.338 2.475-.506 3.75-.506s2.55.168 3.75.506c2.869-1.95 4.125-1.538 4.125-1.538.825 2.063.3 3.6.15 3.975.956 1.05 1.538 2.382 1.538 4.032 0 5.756-3.507 7.03-6.844 7.406.544.468 1.012 1.369 1.012 2.775 0 2.006-.018 3.619-.018 4.125 0 .394.28.862 1.03.712A15.024 15.024 0 0 0 30.003 15c0-8.287-6.713-15-15-15Z"></path></svg><svg width="32" height="26" viewBox="0 0 32 26" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M31.319 3.484c-1.145.507-2.36.84-3.603.987a6.293 6.293 0 0 0 2.758-3.47 12.518 12.518 0 0 1-3.983 1.52A6.274 6.274 0 0 0 15.64 6.815c0 .493.056.97.161 1.43a17.811 17.811 0 0 1-12.93-6.555 6.252 6.252 0 0 0-.85 3.154 6.272 6.272 0 0 0 2.791 5.222 6.253 6.253 0 0 1-2.841-.785l-.001.077a6.277 6.277 0 0 0 5.033 6.153 6.305 6.305 0 0 1-2.834.108 6.278 6.278 0 0 0 5.86 4.356 12.59 12.59 0 0 1-7.79 2.686c-.5 0-1-.03-1.497-.088a17.746 17.746 0 0 0 9.616 2.818c11.54 0 17.849-9.559 17.849-17.848 0-.272-.007-.544-.019-.812a12.746 12.746 0 0 0 3.13-3.246Z"></path></svg><svg width="30" height="24" viewBox="0 0 30 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M15.366 0c.801.004 2.805.024 4.935.11l.755.032c2.145.102 4.287.275 5.35.571 1.417.398 2.53 1.56 2.907 3.033.6 2.339.675 6.903.684 8.008l.002.229v.032l-.002.229c-.009 1.104-.084 5.669-.684 8.008-.381 1.478-1.495 2.64-2.907 3.032-1.063.297-3.205.47-5.35.571l-.755.033c-2.13.086-4.134.105-4.935.11h-.734c-1.696-.01-8.785-.087-11.04-.714-1.418-.398-2.532-1.56-2.908-3.032-.6-2.34-.675-6.904-.684-8.008v-.49c.01-1.105.084-5.67.684-8.008.382-1.478 1.496-2.64 2.908-3.033C5.847.086 12.936.01 14.632 0h.734Zm-3.367 6.749v10.5l9-5.25-9-5.25Z"></path></svg><svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M6.791 18.77a2.959 2.959 0 0 1-2.952 2.952 2.959 2.959 0 0 1-2.951-2.951 2.959 2.959 0 0 1 2.951-2.952h2.952v2.952Zm1.487 0a2.959 2.959 0 0 1 2.952-2.951 2.959 2.959 0 0 1 2.952 2.952v7.39a2.959 2.959 0 0 1-2.952 2.952 2.959 2.959 0 0 1-2.952-2.952v-7.39ZM11.23 6.792A2.959 2.959 0 0 1 8.278 3.84 2.959 2.959 0 0 1 11.23.888a2.959 2.959 0 0 1 2.952 2.951v2.952H11.23Zm0 1.487a2.959 2.959 0 0 1 2.952 2.952 2.959 2.959 0 0 1-2.952 2.952H3.84A2.959 2.959 0 0 1 .887 11.23a2.959 2.959 0 0 1 2.951-2.952h7.391Zm11.98 2.952a2.959 2.959 0 0 1 2.951-2.952 2.959 2.959 0 0 1 2.952 2.952 2.959 2.959 0 0 1-2.952 2.952H23.21V11.23Zm-1.488 0a2.959 2.959 0 0 1-2.951 2.952 2.959 2.959 0 0 1-2.952-2.952V3.84A2.959 2.959 0 0 1 18.771.887a2.959 2.959 0 0 1 2.951 2.951v7.391Zm-2.951 11.98a2.959 2.959 0 0 1 2.951 2.951 2.959 2.959 0 0 1-2.951 2.952 2.959 2.959 0 0 1-2.952-2.952V23.21h2.952Zm0-1.488a2.959 2.959 0 0 1-2.952-2.951 2.959 2.959 0 0 1 2.952-2.952h7.39a2.959 2.959 0 0 1 2.952 2.952 2.959 2.959 0 0 1-2.952 2.951h-7.39Z"></path></svg><svg width="28" height="30" viewBox="0 0 28 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M22.48 4.286H5.195c-.845 0-1.52.724-1.52 1.568v18.579c0 .844.675 1.568 1.52 1.568h17.283c.845 0 1.52-.724 1.52-1.568V5.854c0-.844-.675-1.568-1.52-1.568Z"></path><path d="M6.233 12.156h3.081v10.756H6.233V12.156Zm1.57-5.315c.988 0 1.802.875 1.802 1.938s-.814 1.939-1.803 1.939C6.814 10.718 6 9.842 6 8.779c0-1.063.814-1.938 1.802-1.938Zm3.488 5.315h2.965v1.439h.058c.407-.876 1.453-1.751 2.965-1.751 3.14 0 3.721 2.25 3.721 5.127v5.879h-3.081v-5.253c0-1.25 0-2.877-1.628-2.877s-1.86 1.376-1.86 2.752v5.315h-3.082v-10.63h-.058Z" fill="#000"></path></svg><svg width="34" height="28" viewBox="0 0 34 28" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M26.863 16.567c.748 0 1.347-.636 1.347-1.347 0-.748-.599-1.347-1.347-1.347s-1.347.599-1.347 1.347.599 1.347 1.347 1.347Zm-6.639 0c.749 0 1.347-.636 1.347-1.347 0-.748-.598-1.347-1.347-1.347-.748 0-1.346.599-1.346 1.347s.598 1.347 1.346 1.347Zm9.852 7.56a.52.52 0 0 0-.258.553c0 .074 0 .148.036.221.148.627.442 1.622.442 1.66 0 .11.037.184.037.257a.33.33 0 0 1-.331.332c-.074 0-.11-.037-.184-.074l-2.174-1.253c-.147-.074-.331-.147-.516-.147-.11 0-.22 0-.294.037-1.032.294-2.1.442-3.242.442-5.49 0-9.91-3.687-9.91-8.258 0-4.57 4.42-8.257 9.91-8.257 5.489 0 9.91 3.686 9.91 8.257 0 2.47-1.327 4.719-3.427 6.23ZM24.01 8.147a13.662 13.662 0 0 0-.418-.007c-6.262 0-11.41 4.29-11.41 9.757 0 .83.119 1.634.342 2.4h-.133c-1.33 0-2.659-.221-3.877-.553-.111-.037-.222-.037-.333-.037-.221 0-.443.074-.627.185L4.932 21.4a.525.525 0 0 1-.221.074.409.409 0 0 1-.406-.405c0-.11.036-.184.073-.294.037-.037.37-1.251.554-1.987 0-.074.037-.184.037-.258a.834.834 0 0 0-.332-.662C2.089 16.065.5 13.378.5 10.398.501 4.916 5.855.5 12.428.5 18.073.5 22.82 3.753 24.01 8.146Zm-7.73.627c.859 0 1.54-.716 1.54-1.54 0-.858-.681-1.539-1.54-1.539-.86 0-1.54.68-1.54 1.54 0 .859.68 1.54 1.54 1.54Zm-7.89 0c.86 0 1.54-.716 1.54-1.54 0-.858-.68-1.539-1.54-1.539-.859 0-1.539.68-1.539 1.54 0 .859.68 1.54 1.54 1.54Z"></path></svg></div></div></div><div class="copyrightWrap_yPz7"><div class="copyright_AoBa">
      <p>
        Apache Cloudberry is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
      </p>
      <p>
        Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.</p>
      <p>
        Apache®, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.
      </p>
      </div></div></div></div>
</body>
</html>