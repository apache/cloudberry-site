<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2.x docs-doc-page docs-doc-id-operate-with-data/sql-queries/window-functions" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Queries with Window Functions | Apache Cloudberry (Incubating)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://cloudberry.apache.org/docs/operate-with-data/sql-queries/window-functions"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.x"><meta data-rh="true" name="docsearch:version" content="2.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.x"><meta data-rh="true" property="og:title" content="Queries with Window Functions | Apache Cloudberry (Incubating)"><meta data-rh="true" name="description" content="Window expressions allow application developers to more easily compose complex online analytical processing (OLAP) queries using standard SQL commands. For example, with window expressions, users can calculate moving averages or sums over various intervals, reset aggregations and ranks as selected column values change, and express complex ratios in simple terms."><meta data-rh="true" property="og:description" content="Window expressions allow application developers to more easily compose complex online analytical processing (OLAP) queries using standard SQL commands. For example, with window expressions, users can calculate moving averages or sums over various intervals, reset aggregations and ranks as selected column values change, and express complex ratios in simple terms."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cloudberry.apache.org/docs/operate-with-data/sql-queries/window-functions"><link data-rh="true" rel="alternate" href="https://cloudberry.apache.org/docs/operate-with-data/sql-queries/window-functions" hreflang="en"><link data-rh="true" rel="alternate" href="https://cloudberry.apache.org/docs/operate-with-data/sql-queries/window-functions" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Cloudberry (Incubating) is one advanced and mature open-source MPP (Massively Parallel Processing) databases available. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Cloudberry (Incubating) is one advanced and mature open-source MPP (Massively Parallel Processing) databases available. Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Apache Cloudberry (Incubating) is one advanced and mature open-source MPP (Massively Parallel Processing) databases available. JSON Feed">




<link rel="preconnect" href="https://analytics.apache.org/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://analytics.apache.org/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","66"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel="stylesheet" href="/assets/css/styles.6426df7d.css">
<script src="/assets/js/runtime~main.fdf700fe.js" defer="defer"></script>
<script src="/assets/js/main.759f761c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="tipsWrap_WWTe"><div class="tipsContent_sMsy"><div class="text_VINd"><a href="https://github.com/apache/cloudberry" target="_blank" rel="noopener noreferrer"><span>If you like Apache Cloudberry (Incubating), give it a star on GitHub! </span><img src="/img/home/hcard/star.svg" alt=""></a></div><div class="close_vVex"><img src="/img/home/hcard/close.svg" alt=""></div></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div class="nav-left-logo"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/apache_cloudberry_color_black.svg" alt="Apache Cloudberry (Incubating)" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/apache_cloudberry_color_white.svg" alt="Apache Cloudberry (Incubating)" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/">2.x (Current)</a></li><li><a class="dropdown__link" href="/docs/1.x">1.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community">Overview</a></li><li><a class="dropdown__link" href="/community/slack">Slack Guide</a></li><li><a class="dropdown__link" href="/community/wechat">WeChat Guide</a></li><li><a class="dropdown__link" href="/community/events">Community Events</a></li><li><a class="dropdown__link" href="/community/mailing-lists">Mailing Lists</a></li><li><a class="dropdown__link" href="/community/brand">Brand Guidelines</a></li><li><a class="dropdown__link" href="/community/security">Security Policy</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contribute">Overview</a></li><li><a class="dropdown__link" href="/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/contribute/git">Working with Git &amp; GitHub</a></li><li><a class="dropdown__link" href="/contribute/code">Code Contribution Guide</a></li><li><a class="dropdown__link" href="/contribute/proposal">Proposal Guide</a></li><li><a class="dropdown__link" href="/contribute/doc">Doc Contribution Guide</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/releases">Download</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Team</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/team">Who we are</a></li><li><a class="dropdown__link" href="/team/new-committers">Inviting New Committers</a></li><li><a class="dropdown__link" href="/team/sign-icla">Sign ICLA</a></li><li><a class="dropdown__link" href="/team/setup-apache-email-account">Setup the Apache account</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Resources</a><ul class="dropdown__menu"><li><a href="https://github.com/apache/cloudberry/wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Wiki</a></li><li><a href="https://github.com/apache/cloudberry/discussions/868" target="_blank" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li><li><a href="https://github.com/apache/cloudberry/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum</a></li><li><a class="dropdown__link" href="/support">Support</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li><li><a href="https://www.apache.org/foundation/policies/conduct" target="_blank" rel="noopener noreferrer" class="dropdown__link">Code of Conduct</a></li></ul></div><div class="toggle_vylO colorModeToggle_x44X check-theme-switch"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_BF9v"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_Rg9N"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/deployment/">Deploy and Build</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/data-loading/">Load Data</a><button aria-label="Expand sidebar category &#x27;Load Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/operate-with-data/operate-with-db-objects/create-and-manage-database">Create and Prepare</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/operate-with-data/operate-with-db-objects/create-and-manage-tablespaces">Operate with Data</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/operate-with-data/operate-with-db-objects/create-and-manage-tablespaces">Operate with Database Objects</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/operate-with-data/sql-queries/">SQL Queries</a><button aria-label="Collapse sidebar category &#x27;SQL Queries&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/basic-query-syntax">Basic Query Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/sql-language">SQL Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/where-clauses">WHERE Clauses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/group-by-and-having-clauses">Group By and Having Clauses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/join-queries">Join Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/table-and-column-aliases">Table and Column Aliases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/evaluation-order">Expression Evaluation Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/value-expressions">Value Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/aggregates-expressions">Queries with Aggregate Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/subqueries">Subqueries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/cte-queries">Common Table Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/sql-queries/table-functions">Table Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/operate-with-data/sql-queries/window-functions">Queries with Window Functions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/operate-with-data/sql-queries/full-text-search/">Full Text Search</a><button aria-label="Expand sidebar category &#x27;Full Text Search&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/advanced-analytics/postgis">Advanced Analytics</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/heap-and-ao-table-formats">Heap and AO Table Formats</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/pax-table-format">PAX Storage Format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/work-with-transactions">Work with Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/transactional-concurrency-control">Concurrency Control for Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operate-with-data/manage-spill-files">Manage Spill Files Generated by Queries</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/performance/define-database-performance">Optimize Performance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/security/">Security and Permission</a><button aria-label="Expand sidebar category &#x27;Security and Permission&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/sys-admin/backup-and-restore/">Manage System</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/developer/develop-extensions-using-rust">Developer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ecosystem/sql-clients/dbeaver">Ecosystem</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/sql-stmts/">References</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tutorials/crash-course">Tutorials</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_hjYf"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link" id="支付">Operate with Data</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" style="cursor:pointer">SQL Queries</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Queries with Window Functions</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Queries with Window Functions</h1>
<p>Window expressions allow application developers to more easily compose complex online analytical processing (OLAP) queries using standard SQL commands. For example, with window expressions, users can calculate moving averages or sums over various intervals, reset aggregations and ranks as selected column values change, and express complex ratios in simple terms.</p>
<p>A window expression represents the application of a <code>&lt;window function&gt;</code> to a <code>&lt;window frame&gt;</code>, which is defined with an <code>OVER()</code> clause. This is comparable to the type of calculation that can be done with an aggregate function and a <code>GROUP BY</code> clause. Unlike aggregate functions, which return a single result value for each group of rows, window functions return a result value for every row, but that value is calculated with respect to the set of rows in the window frame to which the row belongs. The <code>OVER()</code> clause allows dividing the rows into <em>partitions</em> and then further restricting the window frame by specifying which rows preceding or following the current row within its partition to include in the calculation.</p>
<p>Apache Cloudberry does not support specifying a window function as an argument to another window function.</p>
<p>The syntax of a window expression is:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">window_function</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">expression</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"> FILTER </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">WHERE</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">filter_clause</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">window_specification</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Where <code>&lt;window_function&gt;</code> might be a user-defined window function, and <code>&lt;expression&gt;</code> is any value expression that does not contain a window expression, and <code>&lt;window_specification&gt;</code> is:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">window_name</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">expression</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">expression</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token keyword" style="color:#66d9ef">ASC</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">DESC</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">USING</span><span class="token plain"> operator</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">NULLS {</span><span class="token keyword" style="color:#66d9ef">FIRST</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">LAST</span><span class="token plain">}</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">frame_clause</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The optional <code>&lt;frame_clause&gt;</code> can be one of the following:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">{ RANGE </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">ROWS</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> GROUPS } </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">frame_start</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">frame_exclusion</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">{ RANGE </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">ROWS</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> GROUPS } </span><span class="token operator" style="color:#66d9ef">BETWEEN</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">frame_start</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">AND</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">frame_end</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">frame_exclusion</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Where <code>&lt;frame_start&gt;</code> and <code>&lt;frame_end&gt;</code> can be one of the following:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">UNBOUNDED</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">PRECEDING</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">offset</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">PRECEDING</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">CURRENT</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">ROW</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token keyword" style="color:#66d9ef">offset</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">FOLLOWING</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">UNBOUNDED</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">FOLLOWING</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and <code>&lt;frame_exclusion&gt;</code> can be one of the following:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">EXCLUDE </span><span class="token keyword" style="color:#66d9ef">CURRENT</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">ROW</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">EXCLUDE </span><span class="token keyword" style="color:#66d9ef">GROUP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">EXCLUDE TIES</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">EXCLUDE </span><span class="token keyword" style="color:#66d9ef">NO</span><span class="token plain"> OTHERS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A window expression can appear only in the select list of a <code>SELECT</code> command. For example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">count</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#66d9ef">*</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> customer_id</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> sales</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If <code>FILTER</code> is specified, then only the input rows for which the <code>&lt;filter_clause&gt;</code> evaluates to true are fed to the window function; other rows are discarded. In a window expression, a <code>FILTER</code> clause can be used only with a <code>&lt;window_function&gt;</code> that is an aggregate function.</p>
<p>In a window expression, the expression must contain an <code>OVER</code> clause. The <code>OVER</code> clause specifies the window frame—the rows to be processed by the window function. This syntactically distinguishes the function from a regular or aggregate function.</p>
<p>In a window aggregate function that is used in a window expression, Apache Cloudberry does not support a <code>DISTINCT</code> clause with multiple input expressions.</p>
<p>A window specification has the following characteristics:</p>
<ul>
<li>The <code>PARTITION BY</code> clause defines the window partitions to which the window function is applied. If omitted, the entire result set is treated as one partition.</li>
<li>The <code>ORDER BY</code> clause defines the expression(s) for sorting rows within a window partition. The <code>ORDER BY</code> clause of a window specification is separate and distinct from the <code>ORDER BY</code> clause of a regular query expression. The <code>ORDER BY</code> clause is required for the window functions that calculate rankings, as it identifies the measure(s) for the ranking values. For OLAP aggregations, the <code>ORDER BY</code> clause is required to use window frames (the <code>ROWS</code>, <code>RANGE</code> or <code>GROUPS</code> clause).</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Columns of data types without a coherent ordering, such as <code>time</code>, are not good candidates for use in the <code>ORDER BY</code> clause of a window specification. <code>Time</code>, with or without a specified time zone, lacks a coherent ordering because addition and subtraction do not have the expected effects. For example, the following is not generally true: <code>x::time &lt; x::time + &#x27;2 hour&#x27;::interval</code></p></div></div>
<ul>
<li>
<p>The <code>&lt;frame_clause&gt;</code> specifies the set of rows constituting the <code>&lt;window frame&gt;</code>, which is a subset of the current partition, for those window functions that act on the frame instead of the whole partition. The set of rows in the frame can vary depending on which row is the current row. The frame can be specified in <code>RANGE</code>, <code>ROWS</code> or <code>GROUPS</code> mode; in each case, it runs from the <code>&lt;frame_start&gt;</code> to the <code>&lt;frame_end&gt;</code>. If <code>&lt;frame_end&gt;</code> is omitted, the end defaults to <code>CURRENT ROW</code>.</p>
</li>
<li>
<p>A <code>&lt;frame_start&gt;</code> of <code>UNBOUNDED PRECEDING</code> means that the frame starts with the first row of the partition, and similarly a <code>&lt;frame_end&gt;</code> of <code>UNBOUNDED FOLLOWING</code> means that the frame ends with the last row of the partition.</p>
</li>
<li>
<p>In <code>RANGE</code> or <code>GROUPS</code> mode, a <code>&lt;frame_start&gt;</code> of <code>CURRENT ROW</code> means the frame starts with the current row&#x27;s first peer row (a row that the window&#x27;s <code>ORDER BY</code> clause sorts as equivalent to the current row), while a <code>&lt;frame_end&gt;</code> of <code>CURRENT ROW</code> means the frame ends with the current row&#x27;s last peer row. In <code>ROWS</code> mode, <code>CURRENT ROW</code> simply means the current row.</p>
</li>
<li>
<p>In the <code>&lt;offset&gt; PRECEDING</code> and <code>&lt;offset&gt; FOLLOWING</code> frame options, the <code>&lt;offset&gt;</code> must be an expression not containing any variables, aggregate functions, or window functions. The meaning of the <code>&lt;offset&gt;</code> depends on the frame mode:</p>
<ul>
<li>
<p>In <code>ROWS</code> mode, the <code>&lt;offset&gt;</code> must yield a non-null, non-negative integer, and the option means that the frame starts or ends the specified number of rows before or after the current row.</p>
</li>
<li>
<p>In <code>GROUPS</code> mode, the <code>&lt;offset&gt;</code> again must yield a non-null, non-negative integer, and the option means that the frame starts or ends the specified number of peer groups before or after the current row&#x27;s peer group, where a peer group is a set of rows that are equivalent in the <code>ORDER BY</code> ordering. (There must be an <code>ORDER BY</code> clause in the window definition to use <code>GROUPS</code> mode).</p>
</li>
<li>
<p>In <code>RANGE</code> mode, these options require that the <code>ORDER BY</code> clause specifies exactly one column. The <code>&lt;offset&gt;</code> specifies the maximum difference between the value of that column in the current row and its value in preceding or following rows of the frame. The data type of the <code>&lt;offset&gt;</code> expression varies depending on the data type of the ordering column. For numeric ordering columns it is typically of the same type as the ordering column, but for datetime ordering columns it is an <code>interval</code>. For example, if the ordering column is of type <code>date</code> or <code>timestamp</code>, one could write <code>RANGE BETWEEN &#x27;1 day&#x27; PRECEDING AND &#x27;10 days&#x27; FOLLOWING</code>. The <code>&lt;offset&gt;</code> is still required to be non-null and non-negative, though the meaning of “non-negative” depends on its data type.</p>
</li>
</ul>
<p>In any case, the distance to the end of the frame is limited by the distance to the end of the partition, so that for rows near the partition ends the frame might contain fewer rows than elsewhere.</p>
</li>
<li>
<p>Notice that in both <code>ROWS</code> and <code>GROUPS</code> mode, <code>0 PRECEDING</code> and <code>0 FOLLOWING</code> are equivalent to <code>CURRENT ROW</code>. This normally holds in <code>RANGE</code> mode as well, for an appropriate data-type-specific meaning of “zero”.</p>
</li>
<li>
<p>The <code>&lt;frame_exclusion&gt;</code> option allows rows around the current row to be excluded from the frame, even if they would be included according to the frame start and frame end options. <code>EXCLUDE CURRENT ROW</code> excludes the current row from the frame. <code>EXCLUDE GROUP</code> excludes the current row and its ordering peers from the frame. <code>EXCLUDE TIES</code> excludes any peers of the current row from the frame, but not the current row itself. <code>EXCLUDE NO OTHERS</code> simply specifies explicitly the default behavior of not excluding the current row or its peers.</p>
</li>
<li>
<p>The default framing option is <code>RANGE UNBOUNDED PRECEDING</code>, which is the same as <code>RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW</code>. With <code>ORDER BY</code>, this sets the frame to be all rows from the partition start up through the current row&#x27;s last <code>ORDER BY</code> peer. Without <code>ORDER BY</code>, this means all rows of the partition are included in the window frame, because all rows become peers of the current row.</p>
</li>
<li>
<p>Restrictions are that <code>&lt;frame_start&gt;</code> cannot be <code>UNBOUNDED FOLLOWING</code>, <code>&lt;frame_end&gt;</code> cannot be <code>UNBOUNDED PRECEDING</code>, and the <code>&lt;frame_end&gt;</code> choice cannot appear earlier in the above list than the <code>&lt;frame_start&gt;</code> choice. for example <code>RANGE BETWEEN CURRENT ROW AND value PRECEDING</code> is not allowed.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="window-examples">Window examples<a href="#window-examples" class="hash-link" aria-label="Direct link to Window examples" title="Direct link to Window examples">​</a></h2>
<p>The following examples demonstrate using window functions with partitions and window frames.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-1--aggregate-window-function-over-a-partition">Example 1 – Aggregate window function over a partition<a href="#example-1--aggregate-window-function-over-a-partition" class="hash-link" aria-label="Direct link to Example 1 – Aggregate window function over a partition" title="Direct link to Example 1 – Aggregate window function over a partition">​</a></h3>
<p>The <code>PARTITION BY</code> list in the <code>OVER</code> clause divides the rows into groups, or partitions, that have the same values as the specified expressions.</p>
<p>This example compares employees&#x27; salaries with the average salaries for their departments:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> empno</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> salary</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">avg</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">salary</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> empsalary</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  depname  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> empno </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> salary </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">          avg          </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">-----------+-------+--------+-----------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">9</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5020.0000000000000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5020.0000000000000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">11</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5020.0000000000000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">7</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5020.0000000000000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">8</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">6000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5020.0000000000000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">5</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3700.0000000000000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3900</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3700.0000000000000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">4866.6666666666666667</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">3</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">4866.6666666666666667</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">4</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">4866.6666666666666667</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The first three output columns come from the table <code>empsalary</code>, and there is one output row for each row in the table. The fourth column is the average calculated on all rows that have the same <code>depname</code> value as the current row. Rows that share the same <code>depname</code> value constitute a partition, and there are three partitions in this example. The <code>avg</code> function is the same as the regular <code>avg</code> aggregate function, but the <code>OVER</code> clause causes it to be applied as a window function.</p>
<p>You can also put the window specification in a <code>WINDOW</code> clause and reference it in the select list. This example is equivalent to the previous query:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> empno</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> salary</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">avg</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">salary</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">mywindow</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> empsalary</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">WINDOW mywindow </span><span class="token keyword" style="color:#66d9ef">AS</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Defining a named window is useful when the select list has multiple window functions using the same window specification.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-2--ranking-window-function-with-an-order-by-clause">Example 2 – Ranking window function with an ORDER BY clause<a href="#example-2--ranking-window-function-with-an-order-by-clause" class="hash-link" aria-label="Direct link to Example 2 – Ranking window function with an ORDER BY clause" title="Direct link to Example 2 – Ranking window function with an ORDER BY clause">​</a></h3>
<p>An <code>ORDER BY</code> clause within the <code>OVER</code> clause controls the order in which rows are processed by window functions. The <code>ORDER BY</code> list for the window function does not have to match the output order of the query. This example uses the <code>rank()</code> window function to rank employees&#x27; salaries within their departments:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> empno</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> salary</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    rank</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> depname </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> salary </span><span class="token keyword" style="color:#66d9ef">DESC</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> empsalary</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  depname  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> empno </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> salary </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> rank </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">-----------+-------+--------+------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">8</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">6000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">11</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">9</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">7</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3900</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">5</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">4</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">3</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-3--aggregate-function-over-a-row-window-frame">Example 3 – Aggregate function over a row window frame<a href="#example-3--aggregate-function-over-a-row-window-frame" class="hash-link" aria-label="Direct link to Example 3 – Aggregate function over a row window frame" title="Direct link to Example 3 – Aggregate function over a row window frame">​</a></h3>
<p>A <code>RANGE</code>, <code>ROWS</code> or <code>GROUPS</code> clause defines the window frame—a set of rows within a partition—that the window function includes in the calculation. <code>ROWS</code> specifies a physical set of rows to process, for example all rows from the beginning of the partition to the current row.</p>
<p>This example calculates a running total of employee&#x27;s salaries by department using the <code>sum()</code> function to total rows from the start of the partition to the current row:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> empno</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> salary</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">sum</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">salary</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> depname </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> salary</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">ROWS</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">between</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">UNBOUNDED</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">PRECEDING</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">AND</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">CURRENT</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">ROW</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> empsalary </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sum</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  depname  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> empno </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> salary </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  sum  </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">-----------+-------+--------+-------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">7</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">4200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">9</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">8700</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">11</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">13900</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">19100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">8</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">6000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">25100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">5</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">3500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3900</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">7400</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">4</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">3</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">9600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">14600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-4--aggregate-function-for-a-range-or-groups-window-frame">Example 4 – Aggregate function for a range or groups window frame<a href="#example-4--aggregate-function-for-a-range-or-groups-window-frame" class="hash-link" aria-label="Direct link to Example 4 – Aggregate function for a range or groups window frame" title="Direct link to Example 4 – Aggregate function for a range or groups window frame">​</a></h3>
<p><code>RANGE</code> and <code>GROUPS</code> modes specify logical values based on values of the <code>ORDER BY</code> expression in the <code>OVER</code> clause. This example demonstrates the difference between <code>ROWS</code> and <code>RANGE</code> or <code>GROUPS</code>. The frame contains all rows with salary values less than or equal to the current row. Unlike the previous example, for employees with the same salary, the sum is the same and includes the salaries of all of those employees.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> empno</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> salary</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">sum</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">salary</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> depname </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> salary</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        RANGE </span><span class="token operator" style="color:#66d9ef">between</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">UNBOUNDED</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">PRECEDING</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">AND</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">CURRENT</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">ROW</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> empsalary </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sum</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  depname  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> empno </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> salary </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  sum  </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">-----------+-------+--------+-------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">7</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">4200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">9</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">8700</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">11</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">19100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">19100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">8</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">6000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">25100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">5</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">3500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3900</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">7400</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">4</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">9600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">3</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">9600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">14600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, because the <code>&lt;frame_start&gt;</code> and <code>&lt;frame_end&gt;</code> are not using an <code>&lt;offset&gt;</code>, <code>RANGE</code> and <code>GROUPS</code> mode provide identical results:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> empno</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> salary</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#e6db74">sum</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">salary</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> depname </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> salary</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        GROUPS </span><span class="token operator" style="color:#66d9ef">between</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">UNBOUNDED</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">PRECEDING</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">AND</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">CURRENT</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">ROW</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> empsalary </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> depname</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sum</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  depname  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> empno </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> salary </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  sum</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">-----------+-------+--------+-------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">7</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">4200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">9</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">8700</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">11</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">19100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">    </span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5200</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">19100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> develop   </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">8</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">6000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">25100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">5</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3500</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">3500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> personnel </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">3900</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">7400</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">4</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">9600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">3</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">4800</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">9600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> sales     </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">     </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   </span><span class="token number" style="color:#ae81ff">5000</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">14600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-5--aggregate-function-for-a-range-and-a-groups-window-frame">Example 5 – Aggregate function for a range and a groups window frame<a href="#example-5--aggregate-function-for-a-range-and-a-groups-window-frame" class="hash-link" aria-label="Direct link to Example 5 – Aggregate function for a range and a groups window frame" title="Direct link to Example 5 – Aggregate function for a range and a groups window frame">​</a></h3>
<p>This example demonstrates the difference between <code>RANGE</code> and <code>GROUPS</code>. The table <code>sales</code> lists the sales a company&#x27;s two shops during a period of four days.</p>
<p>When using <code>GROUPS</code> mode, the value of <code>&lt;offset&gt;</code> indicates the number of peer groups before the current row&#x27;s peer group. The different peer groups are set by the <code>ORDER BY</code> clause, in this case the date. because the query does not specify a value for <code>&lt;frame_end&gt;</code>, the end defaults to <code>CURRENT ROW</code>.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> shop</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> total</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">sum</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> shop </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">asc</span><span class="token plain"> GROUPS </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">PRECEDING</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> sales </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> shop</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token plain">    </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  shop  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  total  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   sum    </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">------------+--------+---------+----------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">07</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">3000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">08</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">4000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">09</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">11000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">09</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">11000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">07</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">4000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">07</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">6000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">09</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">7000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">21000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">09</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">4000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">21000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">23000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">9</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In order to get the equivalent result when using the <code>RANGE</code> mode, the <code>&lt;frame_clause&gt;</code> must specify an <code>&lt;offset&gt;</code> using the same data type as the ordering column, in this case <code>date</code>. Using the numberic value <code>2</code> will return an error.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> shop</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> total</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">sum</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">total</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">OVER</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> shop </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">asc</span><span class="token plain"> RANGE </span><span class="token string" style="color:#a6e22e">&#x27;2 days&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">PRECEDING</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> sales </span><span class="token keyword" style="color:#66d9ef">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">BY</span><span class="token plain"> shop</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">date</span><span class="token plain">    </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  shop  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  total  </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">   sum    </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">------------+--------+---------+----------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">07</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">3000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">3000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">08</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain">  </span><span class="token number" style="color:#ae81ff">4000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">09</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">5000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">11000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">09</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">11000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">07</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">4000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">07</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">6000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">10000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">09</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">7000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">21000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">09</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">4000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">21000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2022</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">01</span><span class="token operator" style="color:#66d9ef">-</span><span class="token number" style="color:#ae81ff">10</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> Shop </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2000.00</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">13000.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token number" style="color:#ae81ff">9</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">rows</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that the above outputs differ in the last row because <code>RANGE</code> mode uses the entries from the previous two days and there is no entry for <code>2022-01-08</code> for Shop 2, but <code>GROUPS</code> mode uses the previous two peer groups, which are <code>2022-01-07</code> and <code>2022-01-09</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/cloudberry-site/edit/main/versioned_docs/version-2.x/operate-with-data/sql-queries/window-functions.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_VsjB"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-09-25T02:34:27.000Z">Sep 25, 2025</time></b> by <b>Dianjin Wang</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/operate-with-data/sql-queries/table-functions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label single-line-overflow hide-before-after">Table Functions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/operate-with-data/sql-queries/full-text-search/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label single-line-overflow hide-before-after">Full Text Search</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#window-examples" class="table-of-contents__link toc-highlight">Window examples</a></li></ul></div></div></div></div></main></div></div></div><div class="wrap_QlFE"><div class="mainWrap_IbWk"><div class="linksWrap_Zcc4"><div><div class="footerLinkTitle_PxTg">Support</div><div class="footerLinkItem_Kf4k"><a href="https://github.com/apache/cloudberry/issues" target="_blank" rel="noopener noreferrer">GitHub Issues</a></div><div class="footerLinkItem_Kf4k"><a href="https://github.com/apache/cloudberry/discussions" target="_blank" rel="noopener noreferrer">GitHub Discussions</a></div><div class="footerLinkItem_Kf4k"><a href="https://inviter.co/apache-cloudberry" target="_blank" rel="noopener noreferrer">Slack</a></div><div class="footerLinkItem_Kf4k"><a href="https://x.com/ASFCloudberry" target="_blank" rel="noopener noreferrer">Twitter</a></div><div class="footerLinkItem_Kf4k"><a href="https://youtube.com/@ApacheCloudberry" target="_blank" rel="noopener noreferrer">Youtube</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/community/security">Security</a></div></div><div><div class="footerLinkTitle_PxTg">Resources</div><div class="footerLinkItem_Kf4k"><a href="/releases" target="_blank">Download</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/docs/">Documentation</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/community/events">Events</a></div><div class="footerLinkItem_Kf4k"><a href="/community/brand" target="_blank">Brand Guidelines</a></div></div><div><div class="footerLinkTitle_PxTg">Contribution</div><div class="footerLinkItem_Kf4k"><a target="_self" href="/contribute/git">Working with Git &amp; GitHub</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/contribute/how-to-contribute">Contribution Overview</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/contribute/code">Code Contribution</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/contribute/doc">Doc Contribution</a></div></div></div><div class="logoLinkWrap_MDp5"><div class="logoWrap_qcVI"><img class="logo_cphB" src="/img/apache-incubator.svg" alt=""></div><div class="links_yA93"><svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M15.002 0c-8.288 0-15 6.713-15 15 0 6.637 4.293 12.244 10.256 14.231.75.131 1.031-.319 1.031-.712 0-.356-.019-1.538-.019-2.794-3.769.694-4.744-.919-5.044-1.763-.168-.43-.9-1.762-1.537-2.118-.525-.282-1.275-.975-.019-.994 1.181-.019 2.025 1.087 2.306 1.537 1.35 2.27 3.507 1.632 4.37 1.238.13-.975.524-1.631.956-2.006-3.338-.375-6.826-1.669-6.826-7.406 0-1.632.582-2.982 1.538-4.032-.15-.375-.675-1.912.15-3.975 0 0 1.256-.394 4.125 1.538 1.2-.338 2.475-.506 3.75-.506s2.55.168 3.75.506c2.869-1.95 4.125-1.538 4.125-1.538.825 2.063.3 3.6.15 3.975.956 1.05 1.538 2.382 1.538 4.032 0 5.756-3.507 7.03-6.844 7.406.544.468 1.012 1.369 1.012 2.775 0 2.006-.018 3.619-.018 4.125 0 .394.28.862 1.03.712A15.024 15.024 0 0 0 30.003 15c0-8.287-6.713-15-15-15Z"></path></svg><svg width="32" height="26" viewBox="0 0 32 26" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M31.319 3.484c-1.145.507-2.36.84-3.603.987a6.293 6.293 0 0 0 2.758-3.47 12.518 12.518 0 0 1-3.983 1.52A6.274 6.274 0 0 0 15.64 6.815c0 .493.056.97.161 1.43a17.811 17.811 0 0 1-12.93-6.555 6.252 6.252 0 0 0-.85 3.154 6.272 6.272 0 0 0 2.791 5.222 6.253 6.253 0 0 1-2.841-.785l-.001.077a6.277 6.277 0 0 0 5.033 6.153 6.305 6.305 0 0 1-2.834.108 6.278 6.278 0 0 0 5.86 4.356 12.59 12.59 0 0 1-7.79 2.686c-.5 0-1-.03-1.497-.088a17.746 17.746 0 0 0 9.616 2.818c11.54 0 17.849-9.559 17.849-17.848 0-.272-.007-.544-.019-.812a12.746 12.746 0 0 0 3.13-3.246Z"></path></svg><svg width="30" height="24" viewBox="0 0 30 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M15.366 0c.801.004 2.805.024 4.935.11l.755.032c2.145.102 4.287.275 5.35.571 1.417.398 2.53 1.56 2.907 3.033.6 2.339.675 6.903.684 8.008l.002.229v.032l-.002.229c-.009 1.104-.084 5.669-.684 8.008-.381 1.478-1.495 2.64-2.907 3.032-1.063.297-3.205.47-5.35.571l-.755.033c-2.13.086-4.134.105-4.935.11h-.734c-1.696-.01-8.785-.087-11.04-.714-1.418-.398-2.532-1.56-2.908-3.032-.6-2.34-.675-6.904-.684-8.008v-.49c.01-1.105.084-5.67.684-8.008.382-1.478 1.496-2.64 2.908-3.033C5.847.086 12.936.01 14.632 0h.734Zm-3.367 6.749v10.5l9-5.25-9-5.25Z"></path></svg><svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M6.791 18.77a2.959 2.959 0 0 1-2.952 2.952 2.959 2.959 0 0 1-2.951-2.951 2.959 2.959 0 0 1 2.951-2.952h2.952v2.952Zm1.487 0a2.959 2.959 0 0 1 2.952-2.951 2.959 2.959 0 0 1 2.952 2.952v7.39a2.959 2.959 0 0 1-2.952 2.952 2.959 2.959 0 0 1-2.952-2.952v-7.39ZM11.23 6.792A2.959 2.959 0 0 1 8.278 3.84 2.959 2.959 0 0 1 11.23.888a2.959 2.959 0 0 1 2.952 2.951v2.952H11.23Zm0 1.487a2.959 2.959 0 0 1 2.952 2.952 2.959 2.959 0 0 1-2.952 2.952H3.84A2.959 2.959 0 0 1 .887 11.23a2.959 2.959 0 0 1 2.951-2.952h7.391Zm11.98 2.952a2.959 2.959 0 0 1 2.951-2.952 2.959 2.959 0 0 1 2.952 2.952 2.959 2.959 0 0 1-2.952 2.952H23.21V11.23Zm-1.488 0a2.959 2.959 0 0 1-2.951 2.952 2.959 2.959 0 0 1-2.952-2.952V3.84A2.959 2.959 0 0 1 18.771.887a2.959 2.959 0 0 1 2.951 2.951v7.391Zm-2.951 11.98a2.959 2.959 0 0 1 2.951 2.951 2.959 2.959 0 0 1-2.951 2.952 2.959 2.959 0 0 1-2.952-2.952V23.21h2.952Zm0-1.488a2.959 2.959 0 0 1-2.952-2.951 2.959 2.959 0 0 1 2.952-2.952h7.39a2.959 2.959 0 0 1 2.952 2.952 2.959 2.959 0 0 1-2.952 2.951h-7.39Z"></path></svg><svg width="28" height="30" viewBox="0 0 28 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M22.48 4.286H5.195c-.845 0-1.52.724-1.52 1.568v18.579c0 .844.675 1.568 1.52 1.568h17.283c.845 0 1.52-.724 1.52-1.568V5.854c0-.844-.675-1.568-1.52-1.568Z"></path><path d="M6.233 12.156h3.081v10.756H6.233V12.156Zm1.57-5.315c.988 0 1.802.875 1.802 1.938s-.814 1.939-1.803 1.939C6.814 10.718 6 9.842 6 8.779c0-1.063.814-1.938 1.802-1.938Zm3.488 5.315h2.965v1.439h.058c.407-.876 1.453-1.751 2.965-1.751 3.14 0 3.721 2.25 3.721 5.127v5.879h-3.081v-5.253c0-1.25 0-2.877-1.628-2.877s-1.86 1.376-1.86 2.752v5.315h-3.082v-10.63h-.058Z" fill="#000"></path></svg><svg width="34" height="28" viewBox="0 0 34 28" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M26.863 16.567c.748 0 1.347-.636 1.347-1.347 0-.748-.599-1.347-1.347-1.347s-1.347.599-1.347 1.347.599 1.347 1.347 1.347Zm-6.639 0c.749 0 1.347-.636 1.347-1.347 0-.748-.598-1.347-1.347-1.347-.748 0-1.346.599-1.346 1.347s.598 1.347 1.346 1.347Zm9.852 7.56a.52.52 0 0 0-.258.553c0 .074 0 .148.036.221.148.627.442 1.622.442 1.66 0 .11.037.184.037.257a.33.33 0 0 1-.331.332c-.074 0-.11-.037-.184-.074l-2.174-1.253c-.147-.074-.331-.147-.516-.147-.11 0-.22 0-.294.037-1.032.294-2.1.442-3.242.442-5.49 0-9.91-3.687-9.91-8.258 0-4.57 4.42-8.257 9.91-8.257 5.489 0 9.91 3.686 9.91 8.257 0 2.47-1.327 4.719-3.427 6.23ZM24.01 8.147a13.662 13.662 0 0 0-.418-.007c-6.262 0-11.41 4.29-11.41 9.757 0 .83.119 1.634.342 2.4h-.133c-1.33 0-2.659-.221-3.877-.553-.111-.037-.222-.037-.333-.037-.221 0-.443.074-.627.185L4.932 21.4a.525.525 0 0 1-.221.074.409.409 0 0 1-.406-.405c0-.11.036-.184.073-.294.037-.037.37-1.251.554-1.987 0-.074.037-.184.037-.258a.834.834 0 0 0-.332-.662C2.089 16.065.5 13.378.5 10.398.501 4.916 5.855.5 12.428.5 18.073.5 22.82 3.753 24.01 8.146Zm-7.73.627c.859 0 1.54-.716 1.54-1.54 0-.858-.681-1.539-1.54-1.539-.86 0-1.54.68-1.54 1.54 0 .859.68 1.54 1.54 1.54Zm-7.89 0c.86 0 1.54-.716 1.54-1.54 0-.858-.68-1.539-1.54-1.539-.859 0-1.539.68-1.539 1.54 0 .859.68 1.54 1.54 1.54Z"></path></svg></div></div></div><div class="copyrightWrap_yPz7"><div class="copyright_AoBa">
      <p>
        Apache Cloudberry is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
      </p>
      <p>
        Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.</p>
      <p>
        Apache®, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.
      </p>
      </div></div></div></div>
</body>
</html>